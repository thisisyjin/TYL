# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Reference Book**](https://www.youtube.com/watch?v=Zb70S1I6u6U&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn&index=20)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***   


# React ë³µìŠµ

### < ì˜ˆì œ > Input ì»´í¬ë„ŒíŠ¸

- Input ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ë©´ì„œ ë³µìŠµí•˜ê¸°



```jsx

import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';

class Input extends PureComponent {
  constructor(props) {
    super(props);
    this.setRef = this.setRef.bind(this);
    this.handleChange = this.handleChange.bind(this);
  }

  handleChange(e) {
    const { name, onChange } = this.props;
    if (onChange) {
      onChange(name, e.target.value);
    }
  }

  componentDidMount() {
    if (this.props.autoFocus) {  // autoFocusê°€ Trueë©´, ìë™ í¬ì»¤ìŠ¤ë˜ê²Œ
      this.ref.focus();
    }
  }

  componentDidUpdate() {
    if (this.props.autoFocus) {
      this.ref.focus();
    }
  }

  setRef(ref) {
    this.ref = ref;
  }

  render() {
    const { errorMsg, label, name, value, type, onFocus } = this.props;
    return (
      <label>
        {label}
        <input
          type={type}
          id={`input_${name}`}
          ref={this.setRef}
          onChange={this.handleChange}
          onFocus={onFocus}
          value={value}
        />
        {errorMsg && <span className="error">{errorMsg}</span>}
      </label>
    );
  }
}

Input.propTypes = {
  type: PropTypes.oneOf(['text', 'number', 'price']),
  name: PropTypes.string.isRequired,
  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),
  errorMsg: PropTypes.string,
  label: PropTypes.string,
  onChange: PropTypes.func,
  onFocus: PropTypes.func,
  autoFocus: PropTypes.bool,
};
Input.defaultProps = {
  onChange: () => {},
  onFocus: () => {},
  autoFocus: false,
  type: 'text',
};

export default Input;

```

### 1. í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì´ë©°, PureComponent í˜•íƒœë¡œ ì‘ì„±í•¨.
- `PureComponent`ëŠ” ì™œ ì‚¬ìš©í•˜ëŠ”ì§€?


### PureComponent

- PureComponentëŠ” Componentë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ë¡œ, Hooks(í•¨ìˆ˜í˜•)ìœ¼ë¡  ëª»í•˜ê³  í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥.
- PureComponentëŠ” **shouldComponentUpdate()í•¨ìˆ˜**ë¥¼ **ì–•ì€ ë¹„êµ**ë¥¼ í•˜ë„ë¡ í•¨.


- ì¦‰, ì–•ì€ ë¹„êµë¥¼ í†µí•´ ë°ì´í„°ê°€ ë¹„êµëœ ê²½ìš°ì—ë§Œ `true`ë¥¼ ë°˜í™˜í•´ render()ì„ í˜¸ì¶œí•¨.
- ì•„ë˜ëŠ” React í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•œ ê·¸ë¦¼ì„. 
-> shouldComponentUpdateê°€ `true`ë¥¼ ë°˜í™˜í•´ì•¼ ë‹¤ìŒ renderë¡œ ë„˜ì–´ê°€ê²Œ ë¨. (ê°±ì‹ )

![](https://media.vlpt.us/images/thisisyjin/post/bea6e098-75aa-4ab5-abf9-8391b6d6cc4e/image.png)

|Component	|PureComponent|
|:--:|:--:|
|í•­ìƒ render()í•¨ìˆ˜ í˜¸ì¶œ|	ì–•ì€ ë¹„êµë¥¼ í†µí•´ ë°ì´í„°ê°€ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ render() í˜¸ì¶œ|


### 2. ref ì„¤ì • - focus() ë˜ë„ë¡
- í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ refë¥¼ ì‚¬ìš©í•  ë•Œì—ëŠ”
- ì»´í¬ë„ŒíŠ¸ì˜ ì–´íŠ¸ë¦¬ë·°íŠ¸ë¡œ ref = {this.setRef}ë¥¼ ì¤˜ì„œ setRefí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
- ì—¬ê¸°ì„œ, ì¸ìˆ˜ë¡œ ìê¸°ìì‹ (=DOM element)ê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤.


- setRef(ref) { this.ref = ref } ê°€ ì‹¤í–‰ë˜ì–´ this.refì— ì¸ìˆ˜ë¡œ ë“¤ì–´ê°„ 
input ìš”ì†Œê°€ ì €ì¥ëœë‹¤.
- componentDidMountì™€ componentDidUpdateì—ì„œ, 
autoFocusê°€ trueë©´ this.refì— focus()ë¡œ í¬ì»¤ì‹±í•˜ë„ë¡ í•¨.


> **- componentDidMount()**  
> render() í•¨ìˆ˜ê°€ JSXë¥¼ í™”ë©´ì— ë Œë”ë§ í•œ ì´í›„ì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜.
> **- componentDidUpdate()**
> ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ì‹¤ì œë¡œ ì¶œë ¥ëœ ì´í›„ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ 

> **ğŸ™‹â€â™€ï¸ componentDidMount() vs. componentDidUpdate()**
> 1) the DOM is available (initial render) - componentDidMount 
> 2) properties got changed - componentDidUpdate


### 3. constructor ì•ˆì—ì„œ í•¨ìˆ˜ë¥¼ ë°”ì¸ë”© í•œ ì´ìœ 

```jsx
constructor(props) {
    super(props);
    this.setRef = this.setRef.bind(this);
    this.handleChange = this.handleChange.bind(this);
  }
```

í´ë˜ìŠ¤ì˜ constructor í•¨ìˆ˜ ë‚´ì—ì„  ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ë¥¼ ìƒì„± ë° ì´ˆê¸°í™”í•¨.


### this ë°”ì¸ë”©
- ì¼ë°˜ í•¨ìˆ˜ì—ì„œ `this`ëŠ” ì „ì—­ê°ì²´(window)ë¥¼ ì˜ë¯¸í•˜ê³ ,
ë©”ì„œë“œì—ì„œì˜ `this`ëŠ” ìì‹ ì„ í˜¸ì¶œí•œ ê°ì²´(ì¦‰, . ì•ì— ê°ì²´)ë¥¼ ì˜ë¯¸í•œë‹¤.
- ìƒì„±ìí•¨ìˆ˜(newì™€ í•¨ê»˜ í˜¸ì¶œ)ì—ì„œì˜ `this`ëŠ” ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.
ë‹¨, new ì—†ì´ ì¼ë°˜í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ ì „ì—­ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- í™”ì‚´í‘œí•¨ìˆ˜(=>)ì—ì„œëŠ” ìì²´ì˜ this ë°”ì¸ë”©ì´ ì¡´ì¬í•˜ì§€ ì•Šê³ , ìƒìœ„ìŠ¤ì½”í”„ì˜ thisë¥¼ ë”°ë¥¸ë‹¤.





ê·¸ë ‡ë‹¤ë©´, ì™œ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë©”ì„œë“œì— thisë¥¼ ë°”ì¸ë”© í•´ì¤˜ì•¼ í• ê¹Œ?

```jsx
class Input extends PureComponent {
  constructor() {
     this.handleChange = this.handleChange.bind(this);  // this ë°”ì¸ë”©
  }

  handleChange(e) {
    // ë‚´ìš©
  }
}

```

- handleChangeë¥¼ **ì´ í´ë˜ìŠ¤ ë‚´ë¶€**ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì•„ë¬´ ë¬¸ì œê°€ ì—†ë‹¤.
```jsx
render() {
  return (
  	<input onChange={this.handleChange} />  
  );
}
```

- í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ this.handleChangeëŠ” **ë©”ì†Œë“œë¡œì„œ ì‘ë™**í•˜ê¸° ë•Œë¬¸ì— 
thisê°€ ì•Œì•„ì„œ bindingì´ ë  ê²ƒì´ë‹¤.

- í•˜ì§€ë§Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë‚˜ (windowì˜)Event Handlerê°€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ë©´?
-> thisë¥¼ ë°”ì¸ë”©í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê°’ì´ ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤.


- this ë°”ì¸ë”©ì„ ìƒëµí•˜ë ¤ë©´ arrow functionì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.
(ì•Œì•„ì„œ ìƒìœ„ìŠ¤ì½”í”„ì˜ thisë¡œ ë°”ì¸ë”©ëœë‹¤.)


> ì˜ˆì‹œ - this.state ì“°ì§€ ì•Šê³ , constructor ì“°ì§€ ì•Šê³ . 
> ë©”ì„œë“œë¥¼ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì„ ì–¸ì‹œ - this ë°”ì¸ë”© í•„ìš” X
```jsx
class App extends React.Component {
  state = {
    count: 10,
  };
  resetCount = () => {
    this.setState(({ count }) => ({
      count: count + 10,
    }));
  };
```


### 4. ë‹¨ì¶•í‰ê°€ (&&)

```jsx
{errorMsg && <span className="error">{errorMsg}</span>}
```

- ì¢Œí•­(errorMsg)ê°€ falseì´ë©´ falseì´ê³ ,
trueì´ë©´ ìš°í•­(`<span>`)ì„ ë°˜í™˜í•¨.

#### ğŸ’¬   > ë‹¨ì¶•í‰ê°€ë€?
|AND (&&)|OR (\|\|)|
|:--:|:--:|
|ifë¬¸ ëŒ€ì²´|ê¸°ë³¸ê°’ ì„¤ì •|

**1. AND (&&)**
_true && anything -> anything
false && anything -> false_ ì´ë¯€ë¡œ 
ì¢Œí•­ì´ trueë©´ ìš°í•­ì„ ë°˜í™˜í•˜ê³ , ì¢Œí•­ì´ falseë©´ false ë°˜í™˜.

**2. OR (||)**
_true || anything -> true
false || anything -> anything _ì´ë¯€ë¡œ
ì¢Œí•­ì´ falseì¼ë•ŒëŠ” ìš°í•­ì„ ë°˜í™˜. (ê¸°ë³¸ê°’ìœ¼ë¡œ ì“°ì„)




### 5. PropTypesì˜ oneOf, oneOfType

```jsx
Input.propTypes = {
type: PropTypes.oneOf(['text', 'number', 'price']),
value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),
}
```

- oneOf - ê°’ì´ ë°°ì—´ì˜ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•¨.
- oneOfType - typeì´ ë°°ì—´ì˜ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•¨.



### 6. defaultTypes 

- í”„ë¡œí¼í‹° ê¸°ë³¸ê°’ ì„¤ì •.
- defaultPropsëŠ” propì˜ ê°’ì´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì˜í•´ ëª…ì‹œë˜ì§€ ì•Šì•˜ì„ ë•Œ ê°’ì„ ê°–ë„ë¡ í•´ì¤Œ.
(ì¦‰, ê¸°ë³¸ê°’ ì„¤ì •)


- propTypes(íƒ€ì… ê²€ì‚¬)ëŠ” defaultPropsì—ë„ ì ìš©ë˜ê²Œ í•˜ê¸° ìœ„í•˜ì—¬ defaultPropsê°€ ì²˜ë¦¬ëœ ë’¤ì— í•˜ëŠ”ê²ƒì´ ì¢‹ìŒ.
