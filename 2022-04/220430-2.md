# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**Reference Book**](https://thebook.io/080203/)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)

***

> **ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ  DAY 14**
- ì™¸ë¶€ API ì—°ë™ - ë‰´ìŠ¤ ë·°ì–´ ì œì‘


# ì™¸ë¶€ API ì—°ë™ - ë‰´ìŠ¤ ë·°ì–´


## ë¹„ë™ê¸° ì‘ì—…

ì›¹ì—ì„œ ì„œë²„ ìª½ ë°ì´í„°ê°€ í•„ìš”í•  ë•Œì—ëŠ” - `AJAX` ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„° ìˆ˜ì‹  ê°€ëŠ¥.
ì„œë²„ì˜ APIë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°, ë„¤íŠ¸ì›Œí¬ ì†¡ìˆ˜ì‹  ê³¼ì •ì—ì„œ ì‹œê°„ì´ ê±¸ë ¤ì„œ ì‘ì—…ì´ ì¦‰ì‹œ ì²˜ë¦¬ë˜ì§€ ì•Šê³ ,
ì‘ë‹µì„ ë°›ì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì „ë‹¬ë°›ì€ **ì‘ë‹µ(response)ì„ ì²˜ë¦¬**í•¨.
-> **ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬**í•¨.

| ë™ê¸°ì  | ë¹„ë™ê¸°ì  |
| : -- : | : -- : |
| ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬. ë‹¤ë¥¸ ì‘ì—… í•  ìˆ˜ X. | ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ. ì—¬ëŸ¬ ìš”ì²­ ì²˜ë¦¬ ê°€ëŠ¥. |

- ì„œë²„ API í˜¸ì¶œ, setTimeout(íƒ€ì´ë¨¸ í•¨ìˆ˜) ë“±ì˜ ì‘ì—…ì‹œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•¨.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì‹œ `ì½œë°± í•¨ìˆ˜`ë¥¼ ì‚¬ìš©í•¨.
-> í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬í•´ì¤Œ.

### ì½œë°± í•¨ìˆ˜
``` js
function increase(number, callback) {
    setTimeout(() => {
        const result = number + 10;
        if (callback) {
            callback(result);
        }
    }, 1000)
}

increase(0, result => {
    console.log(result);
});
```

< (1ì´ˆ í›„) 10

<br>

ë§Œì•½, 1ì´ˆë§ˆë‹¤ 10, 20, 30, 40ê³¼ ê°™ì´ ì—¬ëŸ¬ë²ˆ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ìœ¼ë©´
**ì½œë°±í•¨ìˆ˜ë¥¼ ì¤‘ì²©**í•˜ë©´ ëœë‹¤.

``` js
function increase(number, callback) {
    setTimeout(() => {
        const result = number + 10;
        if (callback) {
            callback(result);
        }
    }, 1000)
}

increase(0, result => {
    console.log(result);
    increase(result, result => {
        console.log(result);
        increase(result, result => {
            console.log(result);
            increase(result, result => {
                console.log(result);
            });
        });
    });
});

```

![](https://velog.velcdn.com/images/thisisyjin/post/abe2304d-4079-4ae2-ae2e-73ecc63a12d1/image.png)

- ì›í•˜ë˜ ê²°ê³¼ëŠ” ì–»ì—ˆì§€ë§Œ, ì—¬ëŸ¬ ë²ˆ ì¤‘ì²©ë˜ë‹¤ ë³´ë‹ˆ ê°€ë…ì„±ì´ ë–¨ì–´ì¡Œë‹¤. = `ì½œë°± ì§€ì˜¥`
- ì´ëŸ° ì½”ë“œëŠ” ì§€í–¥í•´ì•¼ í•œë‹¤.

> #### ğŸ™‹â€â™‚ï¸ ì½œë°± ì§€ì˜¥(callback hell)
ì½œë°± í•¨ìˆ˜ë¥¼ ìµëª… í•¨ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë˜ ë‹¤ì‹œ ì½œë°± ì•ˆì— í•¨ìˆ˜ í˜¸ì¶œì´ ë°˜ë³µë˜ì–´ 
ì½”ë“œì˜ ë“¤ì—¬ì“°ê¸° ìˆ˜ì¤€ì´ ê°ë‹¹í•˜ê¸° í˜ë“¤ ì •ë„ë¡œ ê¹Šì–´ì§€ëŠ” í˜„ìƒ.

<br>

### Promise

- ì½œë°± ì§€ì˜¥ (Callback Hell)ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ES6ì— ë„ì…ë¨.


- PromiseëŠ” new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ê³  ì¸ìë¡œ ì½œë°±ì„ ë°›ëŠ”ë‹¤.
->PromiseëŠ” Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- PromiseëŠ” í˜¸ì¶œë  ë•Œ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ë§Œ ê·¸ ì•ˆì— ì½œë°±ì€ resolve, reject ë‘˜ ì¤‘ í•˜ë‚˜ê°€ í˜¸ì¶œ ë˜ê¸° ì „ì— then ë˜ëŠ” catchë¡œ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.


- resolve, reject ë¡œ ì„±ê³µ í˜¹ì€ ì‹¤íŒ¨ë¡œ ê²°ê³¼ ê°’ì„ ë‚˜íƒ€ë‚´ì–´ **ë‹¤ìŒ ì‘ì—…ì„ ì²´ì´ë‹**í•  ìˆ˜ ìˆë‹¤. (ì¦‰, ë¹„ë™ê¸° ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.)
-> ê³„ì†í•´ì„œ Promise ê°ì²´ë¥¼ ë¦¬í„´í•˜ë¯€ë¡œ.


- thenìœ¼ë¡œ ì‘ì—…ì„ ì´ì–´ê°€ê¸° ìœ„í•´ì„œëŠ” **resolve() í•¨ìˆ˜**ë¥¼ í˜¸ì¶œí•œë‹¤.
- ì‘ì—…ì„ ì¤‘ë‹¨í•˜ê±°ë‚˜ err ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” **reject() í•¨ìˆ˜**ë¥¼ í˜¸ì¶œí•œë‹¤.


<br>

``` js
function increase(number) {
        const promise = new Promise((resolve, reject) => {
            setTimeout(() => {
                const result = number + 10;
                if (result > 50) {
                    const e = new Error('NumberTooBig');
                    return reject(e);
                }
                resolve(result);
            }, 1000);
        });
        return promise;
    }

increase(0)
    .then(number => {
        console.log(number);
        return increase(number);
    })
    .then(number => {
        console.log(number);
        return increase(number);
    })
    .then(number => {
        console.log(number);
        return increase(number);
    })
    .then(number => {
        console.log(number);
        return increase(number);
    })
    .catch(e => {
        console.log(e);
    });
```


- ì—¬ëŸ¬ ì‘ì—…ì„ ì—°ë‹¬ì•„ ì²˜ë¦¬í•  ë•Œ, í•¨ìˆ˜ì˜ ì¤‘ì²© ëŒ€ì‹  `.then ë©”ì„œë“œ`ë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ë¯€ë¡œ ì½œë°± ì§€ì˜¥ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ.



<br>


### async/await
- Promiseë¥¼ ë”ìš± ì‰½ê²Œ ì‚¬ìš©í•˜ê²Œ í•´ì£¼ëŠ” ES8 ë¬¸ë²•.
- í•¨ìˆ˜ ì•ë¶€ë¶„ì— `async` í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•˜ê³ , í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ Promise ì•ë¶€ë¶„ì— `await` í‚¤ì›Œë“œ ì‚¬ìš©.
-> Promiseê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³ , ê²°ê³¼ê°’ì„ íŠ¹ì • ë³€ìˆ˜ì— ë‹´ì„ ìˆ˜ ìˆìŒ.


``` js
function increase(number) {
    const promise = new Promise((resolve, reject) => {
        setTimeout(() => {
            const result = number + 1;
            if (result > 50) {
                const e = new Error('NumberTooBig');
                return reject(e);
            }
            resolve(result);
        }, 1000)
    });
    return promise;
}

async function runTasks() {
    try {
        let result = await increase(0);
        console.log(result);
        result = await increase(result);
        console.log(result);
        result = await increase(result);
        console.log(result);
        result = await increase(result);
        console.log(result);
        result = await increase(result);
        console.log(result);
        result = await increase(result);
        console.log(result);
    } catch (e) {
        console.log(e);
    }
}
```

- ìœ„ì—ì„œ increase()ì˜ ë¦¬í„´ê°’ì´ promise ì´ë¯€ë¡œ ê·¸ ì•ë¶€ë¶„ì— `await` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì¤Œ.
- try ~ catch ë¬¸ì„ ì´ìš©í•¨.






***

## `axios`ë¡œ API í˜¸ì¶œí•˜ì—¬ ë°ì´í„° ìˆ˜ì‹ 

> ### âœ… axios
- ê°€ì¥ ë§ì´ ì‚¬ìš©ì¤‘ì¸ HTTP í´ë¼ì´ì–¸íŠ¸.
- HTTP ìš”ì²­ì„ `Promise` ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬.
- [ëŸ¬ë‹ ê°€ì´ë“œ](https://yamoo9.github.io/axios/)  /  [ê³µì‹ ë¬¸ì„œ](https://github.com/axios/axios)

App.js
``` jsx
import { useState } from 'react';
import axios from 'axios';

const App = () => {
  const [data, setData] = useState(null);
  const onClickBtn = () => {
    axios.get('https://jsonplaceholder.typicode.com/todos/1').then(response => {
      setData(response.data);
    });
  };

  return (
    <div>
      <div>
        <button onClick={onClickBtn}>ë¶ˆëŸ¬ì˜¤ê¸°</button>
      </div>
      {data && <textarea rows={7} value={JSON.stringify(data, null, 2)} readOnly={true} />}
    </div>
  );
}

export default App;
```

![](https://velog.velcdn.com/images/thisisyjin/post/143522e5-553e-4792-94c5-24cb0b260980/image.png)

- get()ì•ˆì— URLì€ JSON í˜•ì‹ì˜ íŒŒì¼ì„. 
axios.get ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ , then ë©”ì„œë“œë¡œ í›„ì†ì²˜ë¦¬.

- setData(response.data)ë¡œ ì„œë²„ê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ.

> ì°¸ê³  - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
>
``` js
{
  // `data`ëŠ” ì„œë²„ê°€ ì œê³µí•œ ì‘ë‹µ(ë°ì´í„°)ì…ë‹ˆë‹¤.
  data: {},
>
  // `status`ëŠ” ì„œë²„ ì‘ë‹µì˜ HTTP ìƒíƒœ ì½”ë“œì…ë‹ˆë‹¤.
  status: 200,
>
  // `statusText`ëŠ” ì„œë²„ ì‘ë‹µìœ¼ë¡œ ë¶€í„°ì˜ HTTP ìƒíƒœ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
  statusText: 'OK',
>
  // `headers` ì„œë²„ê°€ ì‘ë‹µ í•œ í—¤ë”ëŠ” ëª¨ë“  í—¤ë” ì´ë¦„ì´ ì†Œë¬¸ìë¡œ ì œê³µë©ë‹ˆë‹¤.
  headers: {},
>
  // `config`ëŠ” ìš”ì²­ì— ëŒ€í•´ `axios`ì— ì„¤ì •ëœ êµ¬ì„±(config)ì…ë‹ˆë‹¤.
  config: {},
>
  // `request`ëŠ” ì‘ë‹µì„ ìƒì„±í•œ ìš”ì²­ì…ë‹ˆë‹¤.
  // ë¸Œë¼ìš°ì €: XMLHttpRequest ì¸ìŠ¤í„´ìŠ¤
  // Node.js: ClientRequest ì¸ìŠ¤í„´ìŠ¤(ë¦¬ë””ë ‰ì…˜)
  request: {}
}
```



![](https://velog.velcdn.com/images/thisisyjin/post/483987c8-9b4a-4ccb-9a76-dbb92bf2af52/image.png)

- `response.data`ëŠ” ì„œë²„ê°€ ì œê³µí•œ ì‘ë‹µ(=data)ì„ ì˜ë¯¸í•¨.
- useState Hookì˜ setStateí•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ 'data' stateì— ì €ì¥.


- onClickBtn í•¨ìˆ˜ì—ì„œëŠ” `axios.get()` ë©”ì„œë“œ ì‚¬ìš©.
-> ì¸ìë¡œ ì „ë‹¬ëœ ì£¼ì†Œì— **GET ìš”ì²­**ì„ í•´ì¤Œ. (HTTP Request)
-> ê²°ê³¼ëŠ” `.then`ì„ í†µí•´ ë¹„ë™ê¸°ì ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥



> âš¡ï¸ async/await ì ìš©ì‹œ

``` jsx
import { useState } from 'react';
import axios from 'axios';

const App = () => {
  const [data, setData] = useState(null);
  const onClickBtn = async () => {
    try {
      const response = await axios.get(
        'https://jsonplaceholder.typicode.com/todos/1'
      );
      setData(response.data);
    } catch (e) {
      console.log(e);
    }
  };
  
  return (
    <div>
      <div>
        <button onClick={onClickBtn}>ë¶ˆëŸ¬ì˜¤ê¸°</button>
      </div>
      {data && <textarea rows={7} value={JSON.stringify(data, null, 2)} readOnly={true} />}
    </div>
  );
}

export default App;
```

***

## newsapi ë¶ˆëŸ¬ì˜¤ê¸°

- [newsAPI](https://newsapi.org/) - íšŒì›ê°€ì… í›„ API í‚¤ ì–»ì„ ìˆ˜ ìˆìŒ.


- App.jsì— axios.get()ì˜ ì¸ìë¡œ        
`https://newsapi.org/v2/top-headlines?country=kr&apiKey=APIì¸ì¦í‚¤` ë¥¼ ë„£ì–´ì¤Œ.


![](https://velog.velcdn.com/images/thisisyjin/post/ef7daf21-49fd-4699-874d-5b8c59889dd1/image.png)

ë¶ˆëŸ¬ì˜¤ê¸°ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ APIì˜ ë°ì´í„°ê°€ ë¶ˆëŸ¬ì™€ì§.


***

## ë‰´ìŠ¤ ë·°ì–´ UI ì œì‘


### styled-components ì„¤ì¹˜

``` bash
$ yarn add styled-components
```


ìš°ì„  **NewsItem.js**ì™€ **NewsList.js** íŒŒì¼ì„ ìƒì„±í•œ í›„,
ë‰´ìŠ¤ ë°ì´í„°ì—ëŠ” **ì–´ë–¤ í•„ë“œ**ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì.

``` json
"source": {
        "id": null,
        "name": "Sbs.co.kr"
      },
      "author": "ì„œëŒ€ì› ê¸°ì",
      "title": "ê³ ì§„ì˜, LPGA íˆ¬ì–´ íŒ”ë¡œìŠ¤ ë²„ë””ìŠ¤ ì±”í”¼ì–¸ì‹­ 2R ê³µë™ 2ìœ„ - SBS ë‰´ìŠ¤",
      "description": "ì—¬ìê³¨í”„ ì„¸ê³„ë­í‚¹ 1ìœ„ ê³ ì§„ì˜ ì„ ìˆ˜ê°€ ë¯¸êµ­ì—¬ìí”„ë¡œê³¨í”„ íˆ¬ì–´ ì‹ ì„¤ëŒ€íšŒì¸ íŒ”ë¡œìŠ¤ ë²„ë””ìŠ¤ ì±”í”¼ì–¸ì‹­ 2ë¼ìš´ë“œì—ì„œ ê³µë™ 2ìœ„ì— ì˜¬ëìŠµë‹ˆë‹¤. ê³ ì§„ì˜ì€ ë¯¸êµ­ ìº˜ë¦¬í¬ë‹ˆì•„ì£¼ íŒ”ë¡œìŠ¤ ë²„ë””ìŠ¤ ê³¨í”„í´ëŸ½ì—ì„œ ì—´ë¦° ëŒ€íšŒ ì´í‹€ì§¸ ê²½ê¸°ì—ì„œ ë²„ë”” 1ê°œì™€ ë”ë¸” ë³´ê¸° 1ê°œë¡œ 1ì˜¤ë²„íŒŒë¥¼ ì³¤ìŠµë‹ˆë‹¤.",
      "url": "https://news.sbs.co.kr/news/endPage.do?news_id=N1006733776",
      "urlToImage": "https://img.sbs.co.kr/newimg/news/20220425/201658611_1280.jpg",
      "publishedAt": "2022-04-30T02:23:00Z",
      "content": null
    },
```

1. title = ì œëª©
2. description = ê¸°ì‚¬ ë‚´ìš©
3. url = ë§í¬
4. urlToImage = ë‰´ìŠ¤ ì´ë¯¸ì§€


### NewsItem ì»´í¬ë„ŒíŠ¸ ìƒì„±

> #### ğŸ™‹â€â™‚ï¸ styled-component ì‚¬ìš©.
> ì£¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ëŠ” `___Block` (=styled.div)ë¥¼ ìœ„ì— ë³„ë„ë¡œ ìƒì„±í•¨.


``` jsx
import styled from 'styled-components';

const NewsItemBlock = styled.div`
    display: flex;
    .thumbnail {
        margin-right: 1rem;
        img {
            display: block;
            width: 160px;
            height: 100px;
            object-fit: cover;
        }
    }

    .contents{
        h2 {
            margin: 0;
            a {
                color: black;
            }
        }
        p {
            margin: 0;
            line-height: 1.5;
            margin-top: 0.5rem;
            white-space: normal;
        }
    }
    & + & {
        margin-top: 3rem;
    }
`; 

const NewsItem = ({ article }) => {
    const { title, description, url, urltoImage } = article;
    return (
        <NewsItemBlock>
            {urltoImage && (
                <div className='thumbnail'>
                    <a href={url} target="_blank" rel="noopener noreferrer">
                        <img src={urltoImage} alt="thumbnail" />
                    </a>
                </div>
            )}
            <div className='contents'>
                <h2>
                    <a href={url} target="_blank" rel="noopener noreferrer">
                        {title}
                    </a>
                </h2>
                <p>{description}</p>
            </div>
        </NewsItemBlock>
    )
}

export default NewsItem;
```


### NewList ì»´í¬ë„ŒíŠ¸ ìƒì„±

``` jsx
import styled from 'styled-components';
import NewsItem from './NewsItem';

const NewsListBlock = styled.div`
    box-sizing: border-box;
    padding-bottom: 3rem;
    width: 768px;
    margin: 0 auto;
    margin-top: 2rem;

    @media screen and (max-width: 768px) {
        width: 100%;
        padding-left: 1rem;
        padding-right: 1rem;
    }
`;

const sampleArticle = {
    title: 'ì œëª©',
    description: 'ê¸°ì‚¬ ë‚´ìš©ì…ë‹ˆë‹¤.',
    url: 'https://google.com',
    urlToImage: 'https://via.placeholder.com/160',
};

const NewsList = () => {
    return (
        <NewsListBlock>
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
            <NewsItem article={sampleArticle} />
        </NewsListBlock>
    )
}

export default NewsList;
```
- ì—¬ê¸°ì„œ ë‚˜ì¤‘ì— API ìš”ì²­ì„ í•  ê²ƒì„.
- ì•„ì§ì€ ì•ˆí–ˆìœ¼ë¯€ë¡œ, ìƒ˜í”Œ ë°ì´í„°ì¸ sampleArticleì„ ê°™ì´ ìƒì„±í•´ì¤Œ.
- í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì¸ NewsItemì— propsë¡œ `article`ì„ ë„˜ê²¨ì¤Œ.
-> ì—¬ê¸°ì„œ articleì€ ê° ë‰´ìŠ¤ ë°ì´í„°ì„.

App.js

``` jsx
import NewsList from './components/NewsList';

const App = () => {
  return <NewsList />;
}

export default App;
```

### Result

![](https://velog.velcdn.com/images/thisisyjin/post/0588e9b6-12b9-49f7-826d-55f4c930fd50/image.png)


***

## ë°ì´í„° ì—°ë™

- ì´ì œ newsapiì˜ ë°ì´í„°ë¥¼ ì—°ë™ì‹œí‚¤ë©´ ëœë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ëŠ” ìˆœê°„ APIë¥¼ ìš”ì²­í•œë‹¤.
-> `useEffect`ë¥¼ ì´ìš©. ë‘ë²ˆì§¸ ì¸ìë¥¼ [ ] ë¡œ í•˜ì—¬ ë§¨ ì²˜ìŒì—ë§Œ ì‹¤í–‰ë˜ë„ë¡.
- `loading` ì´ë¼ëŠ” stateë¡œ ë¡œë”©ì¤‘ì¸ì§€ íŒë³„í•  ìˆ˜ ìˆê²Œ í•¨.


> â—ï¸ ì£¼ì˜
- useEffectì˜ ì½œë°± ì•ˆì— `async`ë¥¼ ë¶™ì—¬ì„  ì•ˆëœë‹¤.
- useEffectëŠ” ë’·ì •ë¦¬ í•¨ìˆ˜ë¥¼ return í•˜ê¸° ë•Œë¬¸.
-> ë”°ë¼ì„œ, ì½œë°±ì—ì„œ `async`ë¥¼ ì“°ê³  ì‹¶ë‹¤ë©´ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ í˜¸ì¶œí•´ì¤˜ì•¼ í•¨.


NewsList.js
``` jsx
// ì—¬ê¸°ì„œ API ìš”ì²­
import { useState, useEffect } from 'react';
import styled from 'styled-components';
import NewsItem from './NewsItem';
import axios from 'axios';

const NewsListBlock = styled.div`
    box-sizing: border-box;
    padding-bottom: 3rem;
    width: 768px;
    margin: 0 auto;
    margin-top: 2rem;

    @media screen and (max-width: 768px) {
        width: 100%;
        padding-left: 1rem;
        padding-right: 1rem;
    }
`;

const NewsList = () => {
    const [articles, setArticles] = useState(null);
    const [loading, setLoading] = useState(false);

    useEffect(() => {
        const fetchData = async () => {
            setLoading(true);

            try {
                const response = await axios.get(
                    'https://newsapi.org/v2/top-headlines?country=kr&apiKey=f6052deb31a34f38b602753e2ddf0daf'
                );
                setArticles(response.data.articles);
            } catch (e) {
                console.log(e);
            }

            setLoading(false);
        };

        fetchData();
    }, []);

    if (loading) {
        return <NewsListBlock>ëŒ€ê¸° ì¤‘...</NewsListBlock>
    }

    if (!articles) {
        return null;
    }
    return (
        <NewsListBlock>
            {articles.map(article => (
                <NewsItem key={article.url} article={article} />
            ))}
        </NewsListBlock>
    );
};

export default NewsList;
```

- ë¡œë”©ì¤‘ ì¼ë•ŒëŠ” ëŒ€ê¸°ì¤‘... ì´ë¼ëŠ” ë¬¸êµ¬ê°€ ëœ¨ê²Œ í•˜ê³ ,
- â­ï¸ `!articles` ì¼ë•Œ, ì¦‰ **articlesê°€ null ì¼ë•Œë¥¼ ê²€ì‚¬**í•´ì•¼ í•œë‹¤.
-> ì•„ì§ ë°ì´í„°ê°€ ì—†ì„ ë•Œ mapí•¨ìˆ˜ë¥¼ ê±°ì¹˜ë©´ ë Œë”ë§ ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸.



### Result

![](https://velog.velcdn.com/images/thisisyjin/post/3850752a-9b3a-459d-ac4e-45e8b104485c/image.png)





