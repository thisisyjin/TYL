# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Lecture**](https://www.youtube.com/watch?v=KDJNjLZrqJk&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn&index=18)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***   

[ì§€ë‚œì‹œê°„ Review](https://velog.io/@thisisyjin/TIL-22-03-18-1)

#### ì§€ë‚œì‹œê°„ [ì¶”ê°€] - **í•¨ìˆ˜í˜• setState**
- ì´ì „ stateë¥¼ setStateì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´
í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±í•´ì•¼í•œë‹¤ê³  ë°°ì› ì—ˆë‹¤.

```jsx
// ì¼ë°˜ setState
setTries([...tries, { try: value, result: "í™ˆëŸ°! ì •ë‹µì…ë‹ˆë‹¤." }]);

// í•¨ìˆ˜í˜• setState - â­ ì´ì „ state ì‚¬ìš©ì‹œ
setTries(prevState => [
        ...prevState.tries,
        { try: value, result: "í™ˆëŸ°! ì •ë‹µì…ë‹ˆë‹¤." },
      ]);
```

ğŸ”» ì°¸ê³  - classí˜• Component
```jsx
this.setState( {
  tries: [
    ...prevState.tries,
        { try: value, result: "í™ˆëŸ°! ì •ë‹µì…ë‹ˆë‹¤."}]
	});
```
***


### React Devtools

- `props` ë•Œë¬¸ì— ë Œë”ë§ì´ ìì£¼ ì¼ì–´ë‚˜ê³ ,
ì„±ëŠ¥ ìµœì í™”ì— ì¢‹ì§€ ì•Šë‹¤.



> í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ì¸ `React devtool`ë¡œ ë³´ë©´ 
Hooksë¡œ ì“´ ì»´í¬ë„ŒíŠ¸ëŠ” `state`ì˜ ì´ë¦„ì´ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤.
![](https://images.velog.io/images/thisisyjin/post/3f9e466e-1ab3-439c-ac76-11bc5f16c121/image.png)



- react devtoolsë¥¼ ì´ìš©í•˜ë©´ ë Œë”ê°€ ë‹¤ì‹œ ë ë•Œ ì•Œë ¤ì¤€ë‹¤!

> ğŸ™‹â€â™‚ï¸ **ì–¸ì œ renderê°€ ë‹¤ì‹œ ë˜ëŠ”ì§€?**
- `state`ë‚˜ `props`ê°€ ë°”ë€Œì—ˆì„ ë•Œ.

devtoolì—ì„œ âš™ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬
ì•„ë˜ ë¶€ë¶„ì— ì²´í¬ë¥¼ í•´ë³´ì.

âœ…Highlight updates when components render

![setting](https://images.velog.io/images/thisisyjin/post/13208320-e3e6-4992-a6fc-633d732e476f/image.png)


> ğŸš€ **ê²°ê³¼**

Componentê°€ **ë¦¬ë Œë”ë§ ë  ë•Œ ë§ˆë‹¤**í•˜ì´ë¼ì´íŠ¸ ëœë‹¤.
![example](https://images.velog.io/images/thisisyjin/post/b0b115d4-7fe8-4d2c-beae-1e83ef3b87e2/dal.gif)

- input valueë§Œ ë°”ë€ê±´ë°
`<Try />`ë„ ë¦¬ë Œë”ë§ ë˜ê³ ìˆìŒ.

- ë Œë”ë§ì´ ë¹ ë¥´ê²Œ ë ìˆ˜ë¡ ë¹¨ê°„ìƒ‰ì— ê°€ê¹Œì›Œì§.



### Reactì˜ Rendering ì›ë¦¬


```jsx

import React, { Component } from "react";

class TestRendering extends Component {
  state = {
    counter: 0,
  };

  onClickBtn = () => {
    this.setState({});
  };
  render() {
    console.log("ë Œë”ë§" + this.state.counter);
    return (
      <div>
        <button onClick={this.onClickBtn}>í´ë¦­</button>
      </div>
    );
  }
}

export default TestRendering;

```

- dev-toolë¡œ í™•ì¸í•´ë³¸ ê²°ê³¼, highlightê°€ ëœë‹¤. ì¦‰, ë¦¬ë Œë”ë§ì´ ëœë‹¤!

- ReactëŠ” ë˜‘ë˜‘í•˜ì§€ ì•Šì•„ì„œ (...)
ì¦‰, stateë‚˜ propsê°€ ë°”ë€Œì§€ ì•Šì•„ë„ `setState()`ë§Œ í˜¸ì¶œí•´ë„ ì „ì²´ê°€ renderingì´ ëœë‹¤.

<br>

ğŸ™‹â€â™‚ï¸ **shouldComponentUpdate()**ë¥¼ ì‚¬ìš©í•˜ì!

- `shouldComponentUpdate`ëŠ” Life-cycle Method ì¤‘ í•˜ë‚˜ë¡œ, Class Componentì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

> ğŸ“Œ **shouldComponentUpdate(nextProps, nextState)**
>
>**propsë¥¼ ë³€ê²½**í•˜ê±°ë‚˜ **setState()ë¥¼ í˜¸ì¶œ**í•˜ì—¬ stateë¥¼ ë³€ê²½í•˜ë©´, ë‹¤ì‹œ ë Œë”ë§í•´ì•¼í•˜ëŠ”ì§€ íŒë‹¨í•˜ëŠ” í•¨ìˆ˜.
>
>ì¦‰, ë¦¬ë Œë”ë§ í• ì§€ ë§ì§€ íŒë‹¨. í™”ë©´ ë³€ê²½ì„ ìœ„í•œ ê²€ì¦ ì‘ì—…. ë°ì´í„° ë³€í™”ë¥¼ ë¹„êµí•˜ëŠ” ì‘ì—… í¬í•¨ë¨. 
(ì„±ëŠ¥ì— ì˜í–¥ å¤š)
>
> `ì–•ì€ ë¹„êµ`(shallow-compare)ë¥¼ í†µí•´ ë°ì´í„°ê°€ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ `render()`ì„ í˜¸ì¶œí•¨.



```jsx
shouldComponentUpdate(nextProps, nextState) {
      if (this.state.counter !== nextState.counter) {
          return true;     // ê°’ì´ ë‹¤ë¦„ - ë³€ê²½ëœ ê²ƒ -> ë¦¬ë Œë”ë§ í•´ë¼!
      } 
      return false;   // ê°’ì´ ê°™ìŒ - ë³€ê²½ ì•ˆë¨ -> ë¦¬ë Œë”ë§ í•˜ì§€ë§ˆë¼
  }
```
 
 <br>


|shouldComponentUpdate()ì‚¬ìš©ì‹œ | ë¯¸ì‚¬ìš©ì‹œ |
|:----------------------------:|:-------:|
|![use](https://images.velog.io/images/thisisyjin/post/1e04754b-564a-424e-8fb4-fedda9a905e4/al.gif) | ![not](https://images.velog.io/images/thisisyjin/post/8ebf9d46-e120-4e7c-a60c-5b20390ecd13/ld.gif)|
| ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤! | ê³„ì† ë Œë”ë§ ëœë‹¤. |


<br>

ì´ê²ƒì´ ë°”ë¡œ **ì„±ëŠ¥ ìµœì í™”** í•˜ëŠ”ê²ƒì´ë‹¤.
ë°”ë€ŒëŠ” ê²ƒì´ ì—†ë‹¤ë©´ ë Œë”ë§ ë˜ì§€ ì•Šë„ë¡.
- devToolë¡œ ë³´ë©´ì„œ í•˜ë©´ í¸ë¦¬í•˜ë‹¤.


<br>

***

### PureComponentì˜ ì‚¬ìš©

ìœ„ì—ì„œ ë°°ìš´ëŒ€ë¡œ ì¼ì¼íˆ stateë‚˜ propsê°€ ë°”ë€Œë©´ trueë¥¼ returní•˜ê²Œ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆì§€ë§Œ,
`PureComponent`ë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ë‹¤.


>ğŸ™‹â€â™‚ï¸ PureComponentë€?

- class _(ì»´í¬ë„ŒíŠ¸ëª…)_ extends `React.PureComponent` ë¡œ ì‘ì„±.
- `React.Component`ë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤.
- shouldComponentUpdate()ë¥¼ í¬í•¨í•œ ì»´í¬ë„ŒíŠ¸ë¼ê³  í•  ìˆ˜ ìˆìŒ.
- shouldComponentUpdate()ë¥¼ **ì–•ì€ë¹„êµ**ë¥¼ í•˜ë„ë¡ ì¬ì •ì˜í•¨.
<br>

ğŸ”» ì´ì „ ì˜ˆì‹œ - **PureComponentë¡œ ë³€ê²½**

```jsx
import React, { Component, PureComponent } from "react";

class TestRendering extends PureComponent {
  state = {
    counter: 0,
  };
  onClickBtn = () => {
    this.setState({});
  };
  render() {
    console.log("ë Œë”ë§" + this.state.counter);
    return (
      <div>
        <button onClick={this.onClickBtn}>í´ë¦­</button>
      </div>
    );
  }
}

export default TestRendering;

```
- shouldComponentUpdate ì—†ì´ë„ ì•Œì•„ì„œ ë¦¬ë Œë”ë§ ê±¸ëŸ¬ì¤Œ. 
(ê°’ì´ ì•ˆë°”ë€Œë¯€ë¡œ ë¦¬ë Œë”ë§ âŒ)


>ì™œ PureComponentëŠ” `ì–•ì€ ë¹„êµ`ë¥¼ í•˜ëŠ”ê±¸ê¹Œ?
- ê°’ì´ ë°”ë€Œì—ˆëŠ”ì§€ ë¹„êµí•´ì•¼í•  ëŒ€ìƒ(props, state)ì´ ë§Œì•½ ê°ì²´(Object)ë¼ë©´ ê°’ì„ ë¹„êµí•˜ê¸° ì–´ë ¤ì›Œì§.
- ì¦‰, `ê¹Šì€ ë¹„êµ`ë¥¼ í•˜ë©´ 
```js
const list1 = [1,2,3];
const list2 = [1,2,3];
```
ìœ„ ì½”ë“œì—ì„œ `list1 === list2` ëŠ” falseì´ë‹¤.
- referenceê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸. ë‘ ê°ì²´ëŠ” ë‹¤ë¥¸ ê°ì²´ì„.
-> ì´ëŸ¬ë©´ ê°’ì€ ê·¸ëŒ€ë¡œì¸ë°ë„ (ë³€í™” X) ë‘ ê°’ì€ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë Œë”ë§ì´ ë°œìƒí•¨.
>
>ë°˜ë©´ì—, `ì–•ì€ ë¹„êµ`ì—ì„  `list1 === list2` ê°€ trueê°€ ëœë‹¤.
> ë‘ ê°’ì€ ê°™ê¸° ë•Œë¬¸ì—.
              



ğŸ™‹â€â™‚ï¸ **ì˜ˆì œ ë³€ê²½**   

```jsx
import React, { Component, PureComponent } from "react";

class TestRendering extends PureComponent {
  state = {
    array: [],
  };

  onClickBtn = () => {
    this.setState({
      array: [],
    });
  };
  render() {
    return (
      <div>
        <button onClick={this.onClickBtn}>í´ë¦­</button>
      </div>
    );
  }
}

export default TestRendering;
```

arrayëŠ” []ì—ì„œ []ë¡œ ë°”ë€Œì—ˆì§€ë§Œ, ì•„ì˜ˆ ìƒˆë¡œìš´ ê°ì²´ë¡œ ì„ ì–¸ë˜ì—ˆê¸° ë•Œë¬¸ì— ë¦¬ë Œë”ë§ì´ ë°œìƒí•œë‹¤.
(ì›ë˜ stateì¸ []ì™€ ìƒˆë¡­ê²Œ ë³€ê²½í•œ ê°’ì¸ []ëŠ” ref, ì¦‰ ì£¼ì†Œê°€ ë‹¤ë¥´ë¯€ë¡œ)



```jsx
import React, { Component, PureComponent } from "react";

class TestRendering extends PureComponent {
  state = {
    array: [],
  };

  onClickBtn = () => {
    const array = this.state.array;
    array.push(1);   // ì›ë³¸ì´ ë³€ê²½ë¨ 
    this.setState({
      array: array,  // ê²°êµ­ ë³€ê²½ë˜ì§€ ì•Šì•„ì„œ, ë¦¬ë Œë”ë§ X 
    });
  };

  // ìƒëµ

```
ìœ„ ì˜ˆì œì—ì„œëŠ” `state`ì¸ arrayë¥¼ arrayì˜ ì›ë³¸ì— push(1)ì„ í•˜ê³ ë‚œ í›„
setState()ë¡œ 'ë³€ê²½ëœ array'ë¡œ ë°”ê¾¼ë‹¤ë©´?
-> PureComponentëŠ” ë¦¬ë Œë”ë§ì„ í•˜ì§€ ì•ŠìŒ. (ë³€ê²½x)

- ë”°ë¼ì„œ ìƒˆë¡œìš´ ê°ì²´íƒ€ì…(ë°°ì—´, ê°ì²´ ë“±)ì„ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, pushì™€ ê°™ì´ ì›ë³¸ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ìì œí•˜ê³ , **`spread(...)`ë¥¼ ì´ìš©**í•´ì¤˜ì•¼ í•œë‹¤!


```jsx
import React, { Component, PureComponent } from "react";

class TestRendering extends PureComponent {
  state = {
    array: [],
  };

  onClickBtn = () => {
    this.setState({
      array: [...this.state.array, 1], // ìƒˆë¡œìš´ ë°°ì—´ì´ ìƒì„±ë¨ -> stateê°€ ë³€ê²½ -> ë¦¬ë Œë”ë§ O
    });
  };

  // ìƒëµ

```


> ì°¸ê³  - ê°ì²´ ì•ˆì— ê°ì²´ì˜ ë‚´ë¶€ê°€ ë³€ê²½ë˜ì–´ë„ ì•Œì•„ì°¨ë¦¬ì§€ ëª»í• ìˆ˜ë„ ìˆë‹¤. (ì›ë³¸ì´ ê°™ì´ ë³€ê²½ë˜ëŠ” ê²½ìš°ëŠ” ë³€ê²½ ì¸ì§€X)
> ë”°ë¼ì„œ, ê°ì²´ì¸ ê²½ìš°ì—ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼í•¨ (spread ì´ìš©)
>
> ì¶”ê°€ë¡œ, state = { {a: 1} } ì—ì„œ setState( { {a:1} }) ë¥¼ í• ë•Œ, ë‘˜ì€ ê°™ì§€ë§Œ
ë¦¬ë Œë”ë§ ëœë‹¤. 
> âŒ stateì— ì™ ë§Œí•´ì„œëŠ” (ë³µì¡í•œ) ê°ì²´ êµ¬ì¡°ë¥¼ ì“°ì§€ ë§ì!


***

### ì˜ˆì œ - ë¦¬ë Œë”ë§ ë§‰ê¸°

#### ë°©ë²• 1. PureComponentë¡œ ë°”ê¾¸ê¸°

- ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ê²Œ ìª¼ê°¤ìˆ˜ë¡ PureComponentë¡œ ë³€ê²½í•˜ê¸° ì‰½ë‹¤.
- ë‹¨, class ì»´í¬ë„ŒíŠ¸ë¡œë§Œ ê°€ëŠ¥ 



+) ì§€ë‚œì‹œê°„ - í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ (<Try />)

``` jsx
// BullsAndCows.jsxì˜ tries.map ë¶€ë¶„
<ul>
        ğŸ” ë¡œê·¸
        {tries.map((v, index) => (
          <Try key={`${index}ì°¨ì‹œë„`} tryInfo={v} />  // vë¥¼ propsë¡œ ë„˜ê²¨ì¤Œ
        ))}
</ul>
```

- Class Component - PureComponent
-> this.propsì—ì„œ ì§ì ‘ ê°€ì ¸ì˜´.

```jsx
import React, { PureComponent } from "react";

class Try extends PureComponent {
  render() {
    const { tryInfo, index } = this.props;
    return (
      <li key={`${index}ì°¨ì‹œë„`}>
        {tryInfo.try} : {tryInfo.result}
      </li>
    );
  }
}

export default Try;

```

#### ë°©ë²• 2. Hookì—ì„œëŠ”?

- `memo` ì‚¬ìš©

- Hooks ì‚¬ìš©ì‹œ
-> í•¨ìˆ˜ì´ë¯€ë¡œ, ì¸ìˆ˜ë¡œ propsë¥¼ ë°›ê³ , ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ í• ë‹¹. 

```jsx
// Try.jsx
import React, { memo } from "react"; // ğŸ‘ˆ memo ì„í¬íŠ¸

const Try = memo(({ tryInfo, index }) => {  // ğŸ‘ˆ memo() ë¶™ì—¬ì£¼ê¸°
  return (
    <li key={`${index}ì°¨ ì‹œë„:`}>
      {tryInfo.try} : {tryInfo.result}
    </li>
  );
});

export default Try;
```




+) ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸, ì¦‰ BullsAndCowsì—ë„ memoë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤.

``` jsx
import React from "react";
import { useState, useRef, memo } from "react";  // ğŸ‘ˆ memo ì„í¬íŠ¸
import Try from "./Try";


const BullsAndCows = memo(() => { // ì»´í¬ë„ŒíŠ¸ ì „ì²´ì— memo() ì”Œì›Œì¤Œ
  
  // ìƒëµ 
 
});

export default BullsAndCows;
```

***

> âœ… ê²°ë¡ 
> ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë§‰ì•„ ë°˜ë“œì‹œ **ì„±ëŠ¥ ìµœì í™”**ë¥¼ í•´ì•¼í•œë‹¤!
>
> Class ì»´í¬ë„ŒíŠ¸ì¼ë• - **`PureComponent`** ì‚¬ìš©
> Hooks ì¼ë• - **`memo()`** ì‚¬ìš© (=React.memo)

***

