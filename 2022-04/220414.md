# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Lecture**](https://www.youtube.com/watch?v=KDJNjLZrqJk&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***  


>  ### **React Lecture CH 6**
~~1 - ë¡œë˜ ì¶”ì²¨ê¸° ì»´í¬ë„ŒíŠ¸
2 - setTimeout ì¤‘ë³µ ì‚¬ìš©~~
3 - componentDidUpdate
4 - useEffect - ì—…ë°ì´íŠ¸ ê°ì§€
5 - useMemo, useCallback
6 - Hooks Tips

## componentDidUpdate


### Class Component 

- ì´ì „ ì½”ë“œì—ì„œ ì¼ë¶€ ìˆ˜ì •
-ì´ì „ì—ëŠ” onClickRedoì—ì„œ stateë“¤ì„ ë‹¤ ì´ˆê¸°í™” í•´ì¤€ í›„, this.runTimeouts()ë¥¼ í•´ì„œ ë‹¤ì‹œí•œë²ˆ setTimeout í•´ì¤¬ì—ˆë‹¤.

``` jsx
// ìˆ˜ì • ì „ 
onClickRedo = () => {
    this.setState({
      winNumbers: getWinNumbers(), // [...winNumbers, bonusNumber]
      winBalls: [],
      bonus: null,
      redo: false,
    });
    this.runTimeouts();
  };
```

#### ìˆ˜ì • ì‚¬í•­
1.  this.timeouts ë°°ì—´ë„ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”í•´ì¤Œ.
(setTimeout í•¨ìˆ˜ë“¤ì´ ë‹´ê¸´ ë°°ì—´)

2. componentDidUpdateë¥¼ ì´ìš©í•¨.
= ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë ë•Œë§ˆë‹¤ ë°œìƒí•¨.
-> ì¡°ê±´ë¬¸ì„ ê±¸ì–´ì¤˜ì•¼ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œë§Œ ì‹¤í–‰ë¨.


``` jsx
componentDidUpdate(prevProps, prevState) {
    if (this.state.winBalls.length === 0) {
      this.runTimeouts();
    }
  }
```

- ë²„íŠ¼ í´ë¦­ì‹œ -> onClickRedo ì‹¤í–‰ -> state ì „ë¶€ ì´ˆê¸°í™”.

- ì´ˆê¸°í™” ëœ stateì¤‘, winBalls ë°°ì—´ì´ ë¹ˆë°°ì—´[]ì´ ë˜ì–´ `this.state.winBalls.length === 0`ì¸ ìƒíƒœì´ë¯€ë¡œ, ì´ë¥¼ ì¡°ê±´ì‹ìœ¼ë¡œ ì´ìš©í•œë‹¤.


> â—ï¸ ì£¼ì˜
> - componentDidUpdateëŠ” ì»´í¬ë„ŒíŠ¸ì˜ state, props ë“±ì´ ë°”ë€Œì–´ render()ê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ëŠ” ìˆœê°„ë§ˆë‹¤ ë§¤ë²ˆ ë°œìƒí•œë‹¤.
> - ë”°ë¼ì„œ, ìœ„ì™€ ê°™ì´ íŠ¹ì • ì¡°ê±´ì—ë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´? 
-> ì¡°ê±´ë¬¸ì„ ê±¸ì–´ì£¼ì.

***

## Hooksë¡œ ë³€ê²½

- ë‚´ê°€ ë³€ê²½í•´ë³¸ ì½”ë“œ.
``` jsx
import React, { useState, useRef, useEffect } from 'react';
import Ball from './Ball';

const getWinNumbers = () => {
  const candidate = Array(45)
    .fill()
    .map((_, i) => i + 1);
  let shuffle = [];
  while (candidate.length > 0) {
    shuffle.push(
      candidate.splice(Math.floor(Math.random() * candidate.length), 1)[0]
    );
  }
  const bonusNumber = shuffle[shuffle.length - 1];
  const winNumbers = shuffle.slice(0, 6).sort((p, c) => p - c);

  return [...winNumbers, bonusNumber];
};

const Lotto = () => {
  const [winNumbers, setWinNumbers] = useState(getWinNumbers());
  const [winBalls, setWinBalls] = useState([]);
  const [bonus, setBonus] = useState(null);
  const [redo, setRedo] = useState(false);

  const timeouts = useRef([]);

  // ğŸ”» ì´ë¶€ë¶„ì„ ëª¨ë¥´ê² ë‹¤.
  useEffect(() => {
    runTimeout();
    return timeouts.current.forEach((v) => clearTimeout(v));
  });

  const runTimeout = () => {
    for (let i = 0; i < winNumbers.length - 1; i++) {
      timeouts.current[i] = setTimeout(() => {
        setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
      }, (i + 1) * 1000);
    }
    timeouts.current[6] = setTimeout(() => {
      setBonus(winNumbers[6]);
      setRedo(true);
    }, 7000);
  };

  const onClickRedo = () => {
    setWinNumbers(getWinNumbers());
    setWinBalls([]);
    setBonus(null);
    setRedo(false);

    timeouts.current = [];

    runTimeout();
  };

  return (
    <>
      <div>ë‹¹ì²¨ ìˆ«ì</div>
      <div id="ê²°ê³¼ì°½">
        {winBalls.map((v) => (
          <Ball key={v} number={v} />
        ))}
      </div>
      <div>ë³´ë„ˆìŠ¤!</div>
      {bonus && <Ball number={bonus} />}
      {redo && <button onClick={onClickRedo}>í•œë²ˆ ë”!</button>}
    </>
  );
};

export default Lotto;
```

- í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ componentDidMount, componentDidUpdate, componentWillUnmountë¥¼ Hooksë¡œ ë‚˜íƒ€ë‚´ë ¤ë©´?
-> `useEffect`ë¥¼ ì‚¬ìš©í•œë‹¤!


<br>
<center>* * *</center>


### componentDidMount

useEffect()ì˜ ì²«ë²ˆì§¸ ì¸ìë¡œ ì½œë°±ì´ ì „ë‹¬ë˜ê³ ,
ë‘ë²ˆì§¸ ì¸ìë¡œëŠ” `dependencies`ê°€ ë°°ì—´ë¡œ ì „ë‹¬ëœë‹¤.
-> ë¦¬ì•¡íŠ¸ê°€ ë³€í™”ë¥¼ ì§€ì¼œë´ì•¼í•˜ëŠ” state.

> **âœ… ë§Œì•½ depsë¥¼ ë¹ˆ ë°°ì—´[] ë¡œ í•œë‹¤ë©´?**
>
>-> ìµœì´ˆ 1íšŒë§Œ ì‹¤í–‰ëœë‹¤. (ì²« ë Œë”ë§ì‹œ)
= `componentDidMount`ì™€ ê°™ë‹¤!


```jsx
useEffect(() => {
    for (let i = 0; i < winNumbers.length - 1; i++) {
      timeouts.current[i] = setTimeout(() => {
        setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
      }, (i + 1) * 1000);
    }
    timeouts.current[6] = setTimeout(() => {
      setBonus(winNumbers[6]);
      setRedo(true);
    }, 7000);
  }, []); // depsê°€ ë¹ˆë°°ì—´ì´ë©´ - componentDidMount ì—­í• 
```


<br>

### componentWillUnmount

- useEffectì˜ ì½œë°± ì•ˆì— returnë¬¸ìœ¼ë¡œ ì‘ì„±í•´ì¤€ë‹¤.
```jsx
return () => { 
  // ì´ë¶€ë¶„ 
}
```


``` jsx
useEffect(() => {
    if (winBalls.length === 0) {
      for (let i = 0; i < winNumbers.length - 1; i++) {
        timeouts.current[i] = setTimeout(() => {
          setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
        }, (i + 1) * 1000);
      }
      timeouts.current[6] = setTimeout(() => {
        setBonus(winNumbers[6]);
        setRedo(true);
      }, 7000);
      
      return () => { 
        // componentWillUnmount ì—­í• 
        timeouts.current.forEach((v) => {
          clearTimeout(v);
        });
      };
    }
  }, []);
```

<br>


### componentDidUpdate

> **â—ï¸â—ï¸ ì£¼ì˜**
depsê°€ **ë¹ˆ ë°°ì—´ì´ë©´ -> componentDidMount** ì—­í• .
ê·¸ë ‡ë‹¤ë©´, depsì— stateê°€ ì¡´ì¬í•˜ë©´? (ë¹ˆ ë°°ì—´ì´ X)
** -> componentDidUpdate + componentDidMount ìˆ˜í–‰.**
(ì¦‰ componentDidUpdateë§Œ ìˆ˜í–‰í•˜ëŠ”ê²ƒì´ ì•„ë‹˜.)


#### ë‚´ê°€ ì²˜ìŒì— ì‘ì„±í–ˆë˜ ì½”ë“œ
- useEffectë¥¼ ë‘ê°œ ì‘ì„±í–ˆìŒ. (..?)
``` jsx
useEffect(() => {
    for (let i = 0; i < winNumbers.length - 1; i++) {
      timeouts.current[i] = setTimeout(() => {
        setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
      }, (i + 1) * 1000);
    }
    timeouts.current[6] = setTimeout(() => {
      setBonus(winNumbers[6]);
      setRedo(true);
    }, 7000);
  }, []); // depsê°€ ë¹ˆë°°ì—´ì´ë©´ - componentDidMount ì—­í• 


// ğŸ”» componentDidUpdateë¥¼ ì˜ˆìƒí–ˆìŒ.
  useEffect(() => {
    if (winBalls.length === 0) {
      for (let i = 0; i < winNumbers.length - 1; i++) {
        timeouts.current[i] = setTimeout(() => {
          setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
        }, (i + 1) * 1000);
      }
      timeouts.current[6] = setTimeout(() => {
        setBonus(winNumbers[6]);
        setRedo(true);
      }, 7000);
    }
  }, [winBalls]);
```
- ë¶„ëª… `componentDidUpdate`ì˜ ê¸°ëŠ¥ì„ ì˜ˆìƒí•˜ê³  ì‘ì„±í–ˆì§€ë§Œ, ê³µì´ ë‘ë²ˆì”© ë Œë”ë§ë˜ì—ˆë‹¤.
![](https://velog.velcdn.com/images/thisisyjin/post/2ea4bee5-2959-43d4-8fcb-20395e074f98/image.png)

- ì¦‰, depsëŠ” ë¹ˆ ë°°ì—´ì´ ì•„ë‹ˆê³  stateê°€ ë“¤ì–´ìˆì§€ë§Œ,
componentDidMountë¥¼ ìˆ˜í–‰í•œ í›„ì— componentDidUpdateë¥¼ ìˆ˜í–‰í•œ ê²ƒ.
**(renderê°€ ë‘ë²ˆ ì¼ì–´ë‚¨)**


<br>

ì¦‰, useEffectì—ì„œëŠ” componentDidMountì™€ componentDidUpdateë¥¼ í•˜ë‚˜ì˜ useEffect í•¨ìˆ˜ë¡œ êµ¬í˜„ ê°€ëŠ¥í•˜ë‹¤.
-> ì–´ì°¨í”¼ ì‹¤í–‰í•˜ëŠ” ì½”ë“œê°€ ê°™ê¸° ë•Œë¬¸ì—!

ê·¸ëŸ°ë°, ìœ„ ì¡°ê±´ëŒ€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
ë”°ë¼ì„œ, depsë¥¼ ìˆ˜ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

> ì°¸ê³ 
- depsì—ëŠ” stateë§Œ ì˜¬ ìˆ˜ ìˆë‹¤?
âŒ **No!**
- ë³€ê²½ì„ ê´€ì°°í•  ìˆ˜ ìˆëŠ” ëŒ€ìƒì´ë¼ë©´ ë­ë“ ì§€ OK.
- ì•„ë˜ ì½”ë“œì—ì„œëŠ” refë¡œ ì‚¬ìš©ëœ `timeouts`ë¥¼ **deps**ë¡œ ì‚¬ìš©í•œë‹¤.
-> `timeouts`ëŠ” ë²„íŠ¼ í´ë¦­ì‹œ **onClickRedo**ì— ì˜í•´ **ë¹ˆ ë°°ì—´**ë¡œ ë³€ê²½ë¨.
>
â—ï¸**ì£¼ì˜ -** timeouts.current[i] = setTimeout(...) ê³¼ ê°™ì´ ë°°ì—´ì˜ 'ìš”ì†Œ'ê°€ ë°”ë€ŒëŠ” ê²ƒì€ ë°”ë€ŒëŠ”ê²ƒìœ¼ë¡œ ì¸ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤.



### deps ìˆ˜ì •

``` jsx
  useEffect(() => {
    if (winBalls.length === 0) {
      for (let i = 0; i < winNumbers.length - 1; i++) {
        timeouts.current[i] = setTimeout(() => {
          setWinBalls((prevWinBalls) => [...prevWinBalls, winNumbers[i]]);
        }, (i + 1) * 1000);
      }
      timeouts.current[6] = setTimeout(() => {
        setBonus(winNumbers[6]);
        setRedo(true);
      }, 7000);
      return () => { 
        // componentWillUnmount ì—­í• 
        timeouts.current.forEach((v) => {
          clearTimeout(v);
        });
      };
    }
  }, [timeouts.current]); // ComponentDidMount + ComponentDidUpdate ë™ì‹œì— ìˆ˜í–‰

```

> ğŸ™‹â€â™‚ï¸ ì™œ depsê°€ ë°”ë€ê±´ì§€?
- ë§¨ ì²˜ìŒì— ì„¤ì •í•´ì¤¬ë˜ ì¡°ê±´ì€ `winBalls.length === 0`ì´ì˜€ë‹¤.
- ë”°ë¼ì„œ, deps ë°°ì—´ ì•ˆì— [winBalls.length === 0]ì„ ì‘ì„±í•´ì£¼ë©´?
-> **ë‘ë²ˆì”© ë Œë”ë§**ëœë‹¤.

>- ğŸ™‹â€â™€ï¸ ì™œ ë‘ë²ˆì”© ë Œë”ë§ ë˜ëŠ”ì§€?
-> winBallsì˜ ì´ˆê¸°ê°’ì´ [] ì´ë¯€ë¡œ ë§¨ ì²˜ìŒì—ë„ length === 0 ì„ ë§Œì¡±í•˜ê²Œ ë¨. - ì²« ê³µì´ ë‘ê°œ ë Œë”ë§ë¨.
![](https://velog.velcdn.com/images/thisisyjin/post/ffe95af8-bd02-48c9-917b-3095be0eb9f2/image.png)



#### â—ï¸ ì¤‘ìš”

- Hooksì˜ useEffectì™€
í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ componentDidUpdateëŠ” **ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•  ìˆ˜ X.**


- componentDidUpdate ì—ì„œëŠ” if()ì˜ ì¡°ê±´ì‹ìœ¼ë¡œ
`winBalls.length === 0`ì„ ì ì–´ì¤¬ì§€ë§Œ,
- useEffect ì—ì„œëŠ” depsë¡œ `winBalls.length === 0`ë¥¼ ì ì–´ì£¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
-> ë”°ë¼ì„œ ê°’ì´ ë‹¬ë¼ì§ˆ ë•Œë§Œ ì‹¤í–‰ë˜ë„ë¡ depsë¥¼ ì˜ ì‘ì„±í•´ì¤˜ì•¼ í•œë‹¤.



***

## useMemoì™€ useCallback


- For. ì„±ëŠ¥ ìµœì í™”
-> ê° í•¨ìˆ˜ì— console.logë¥¼ ì°ì–´ë³´ë©´?

![](https://velog.velcdn.com/images/thisisyjin/post/6e659612-92e1-4867-b456-f664c120acc4/image.png)
- ë§¨ ì²˜ìŒ ë Œë”ë§ ë˜ìë§ˆì useEffectê°€ ì‹¤í–‰ë˜ê³ ,
ë²„íŠ¼ í´ë¦­ì‹œ useEffectê°€ ì‹¤í–‰ë¨.
- ê·¸ëŸ°ë°, `getWinNumbers` í•¨ìˆ˜ê°€ ê³„ì†í•´ì„œ ì‹¤í–‰ë¨.


- **Hooks**ëŠ” ìƒíƒœê°€ ë°”ë€” ë•Œ ë§ˆë‹¤ (Lotto) í•¨ìˆ˜ ì „ì²´ê°€ ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤. **(renderë§Œ ì‹¤í–‰ë˜ëŠ” í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì™€ ë‹¬ë¦¬)**

> 
``` jsx
const Lotto = () => {
  const [winNumbers, setWinNumbers] = useState(getWinNumbers());
  ...
}
```
- ìœ„ ë¶€ë¶„ë„ ë§¤ë²ˆ ë‹¤ì‹œ ì‹¤í–‰ë˜ë¯€ë¡œ, getWinNumbers()ê°€ ê³„ì†í•´ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„.

- ì§€ê¸ˆì€ í° ë¬¸ì œëŠ” ì—†ì§€ë§Œ, ë§Œì•½ ë°˜ë³µë˜ëŠ” í•¨ìˆ˜ê°€ 10ì´ˆê°€ ê±¸ë¦¬ëŠ” í•¨ìˆ˜ë¼ë©´ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  ê²ƒ.



> â­ï¸ ì´ëŸ´ ë•, `useMemo`ë¥¼ ì´ìš©í•˜ì!

-> getWinNumbersê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ê¸°ì–µí•  ìˆ˜ ìˆê²Œ í•¨.

### useMemo


- syntax 
```
useMemo(() => {}, [ë‘ë²ˆì§¸ ì¸ì]);
```


- useMemo ì ìš©í•˜ê¸°!


``` jsx
const Lotto = () => {
  const lottoNumbers = useMemo(() => getWinNumbers(), []);
  // useEffect, useMemo, useCallbackì€ ëª¨ë‘ ë‘ë²ˆì§¸ ì¸ì []ê°€ ì¡´ì¬í•œë‹¤.
  const [winNumbers, setWinNumbers] = useState(lottoNumbers);
  ...
}
```

ì´ì œ ì½˜ì†”ì„ ì‚´í´ë³´ë©´,
getWinNumbers í•¨ìˆ˜ê°€ ë§¨ ì²˜ìŒ í•œë²ˆë§Œ ì‹¤í–‰ëœë‹¤.

![](https://velog.velcdn.com/images/thisisyjin/post/f2c5803f-952b-4ce3-ab23-acc1cfedaa49/image.png)


useMemoëŠ” ë‘ë²ˆì§¸ ì¸ìê°€ ë³€ê²½ë˜ê¸° ì „ê¹Œì§€ëŠ” ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.


> ì°¸ê³  - **ë©”ëª¨ì´ì œì´ì…˜**
 >
- í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ ë°˜ë³µë˜ëŠ” ê²°ê³¼ë¥¼ ì €ì¥í•´ë‘ê³  ë‹¤ìŒì— ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¬ ë•Œ ë¹¨ë¦¬ ì‹¤í–‰í•¨.
- [ì°¸ê³  ë§í¬](https://www.zerocho.com/category/JavaScript/post/579248728241b6f43951af19)

> #### âœ… useMemo vs useRef
| useMemo | useRef |
|--|--|
|ë³µì¡í•œ **í•¨ìˆ˜ ê°’** ê¸°ì–µ | **ì¼ë°˜ ê°’**ì„ ê¸°ì–µ.|


- í•¨ìˆ˜ ì•ˆì—ëŠ” ë‹¤ console.logë¥¼ ë„£ì–´ë‘ê³ , ì„±ëŠ¥ìµœì í™”ê°€ ë˜ì–´ìˆëŠ”ì§€ ìŠµê´€ì ìœ¼ë¡œ ì²´í¬í•´ì•¼í•¨.


<center>* * *</center>

## useCallback

- Syntax
``` jsx
useCallback( () => {}, [use]);
```

- useMemoì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ê¸°ì–µí•˜ëŠ” ê°’ì´ ë‹¤ë¥´ë‹¤!

| useMemo | useCallback |
|--|--|
| í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì„ ê¸°ì–µ | í•¨ìˆ˜ ìì²´ë¥¼ ê¸°ì–µ |

<br>
- useCallback ì˜ˆì‹œ

``` jsx
const onClickRedo = useCallback(() => {
    setWinNumbers(getWinNumbers());
    setWinBalls([]);
    setBonus(null);
    setRedo(false);

    timeouts.current = [];
  }, []);
```

- onClickRedoë¥¼ useCallbackìœ¼ë¡œ ê°ìŒˆ.
-> í•¨ìˆ˜ ìì²´ë¥¼ ê¸°ì–µí•˜ì—¬ ì—¬ëŸ¬ë²ˆ ì‹¤í–‰í•´ë„ **í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ìƒì„±ë˜ì§€ ì•Šê²Œ.**


> Q. ê·¸ë ‡ë‹¤ë©´, ëª¨ë“  í•¨ìˆ˜ì— useCallbackì„ í•˜ëŠ”ê²ƒì´ ì´ë“ì¸ê°€?
- No. ê·¸ë ‡ì§€ë§Œì€ ì•Šë‹¤.
- onClickRedo í•¨ìˆ˜ ì•ˆì—ì„œ consoel.log(winNumbers)ë¥¼ í•´ë³´ì.

![](https://velog.velcdn.com/images/thisisyjin/post/a70d23a2-7e1c-4028-ba09-b5fcbb8b7b0c/image.png)

- ëª‡ë²ˆì„ ë‹¤ì‹œ ë½‘ì•„ë„ winNumbersëŠ” ê·¸ëŒ€ë¡œì´ë‹¤.
(BUT, í™”ë©´ì— ë Œë”ë§ë˜ëŠ” ìˆ«ìë“¤ì€ ë°”ë€ë‹¤.)
-> ê¸°ì–µì„ ë„ˆë¬´ ì˜ í•œ ë‚˜ë¨¸ì§€ ì²«ë²ˆì§¸ winNumbersë¥¼ ê·¸ëŒ€ë¡œ ê¸°ì–µí•˜ëŠ” ê²ƒì„.


> JSXì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ í•¨ìˆ˜ë¥¼ ë„˜ê¸¸ ë•Œ,
ê·¸ í•¨ìˆ˜ì—ëŠ” ë°˜ë“œì‹œ useCallbackì„ í•´ì¤˜ì•¼í•œë‹¤.
``` jsx
> const onClickRedo = useCallback(() => {}, []);
// JSX (ìì‹ ì»´í¬ë„ŒíŠ¸ Button)
<Button onClick={onClickRedo}>
```
- **useCallback**ì´ ì—†ìœ¼ë©´ ë§¤ë²ˆ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³ , ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ê³„ì† ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ê²Œ ë¨.
-> ìì‹ ì»´í¬ë„ŒíŠ¸ ì…ì¥ì—ì„œëŠ” ê³„ì† ìƒˆë¡œìš´ í•¨ìˆ˜ê°€ ë“¤ì–´ì˜¤ë¯€ë¡œ, ë§¤ë²ˆ ë Œë”ë§ì´ ëœë‹¤.



### useCallback ì£¼ì˜ì‚¬í•­

> - â—ï¸ **useCallback ì•ˆì—ì„œ `state`ë¥¼ ì“¸ ë•Œ**ëŠ” í•­ìƒ eë‘ë²ˆì§¸ ì¸ìì¸ **'inputs' ë°°ì—´**ì„ ì ì–´ì¤€ë‹¤.
>
>
>- ê¹Œë¨¹ì„ í•„ìš”ê°€ ìˆëŠ” ê²½ìš° (inputs ë°°ì—´, ì¦‰ ë‘ë²ˆì§¸ ì¸ìì— ì ì–´ì¤€ ê°’ì´ ë°”ë€Œì—ˆì„ë•Œ)ë¥¼ ì§€ì •í•´ì¤Œ.


``` jsx
const onClickRedo = useCallback(() => {
    console.log(winNumbers);
    setWinNumbers(getWinNumbers());
    setWinBalls([]);
    setBonus(null);
    setRedo(false);

    timeouts.current = [];
  }, [winNumbers]);
```

- ì´ì œ, ê³„ì†í•´ì„œ ê°™ì€ winNumbersë¥¼ ê¸°ì–µí•˜ëŠ” ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆë‹¤. 

![](https://velog.velcdn.com/images/thisisyjin/post/abc5faa3-d44e-4b87-bf2b-50680f4d9a20/image.png)

- ì°¸ê³ ë¡œ, onClickRedoëŠ” ê³µì´ ë½‘íˆê³  ë‚œ í›„ í´ë¦­í•˜ë¯€ë¡œ, ì´ì „ ë‹¹ì²¨ìˆ«ìë“¤ì´ ì½˜ì†”ì— ì¶œë ¥ëœë‹¤.


+) `useMemo`ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.
useMemoëŠ” í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì„ ê³„ì† ê¸°ì–µí•˜ë¯€ë¡œ,

``` jsx
const Lotto = () => {
  const [winBalls, setWinBalls] = useState([]);
  const lottoNumbers = useMemo(() => getWinNumbers(), [winBalls]);
  const [winNumbers, setWinNumbers] = useState(lottoNumbers);
  
  ...
  
}
```
- useMemoì˜ ë‘ë²ˆì§¸ ì¸ìì— winBallë¥¼ ì£¼ì—ˆì„ ë•Œ,
ì½”ë“œ í•˜ë‹¨ì— setWinBalls(..)ì— ì˜í•´ì„œ
**winBallsê°€ ë°”ë€”ë•Œë§ˆë‹¤** useMemoë¡œ ì €ì¥í•´ë‘” ë¦¬í„´ê°’ì„ ìŠì–´ë²„ë¦°ë‹¤.

-> ë”°ë¼ì„œ, getWinNumbers í•¨ìˆ˜ê°€ ì´ì „ì²˜ëŸ¼ ê³„ì† ì‹¤í–‰ëœë‹¤. (winBallsê°€ ë°”ë€”ë•Œë§ˆë‹¤)

***

## Hooksì˜ TIP!

1.  HooksëŠ” ìˆœì„œê°€ ë§¤ìš° ì¤‘ìš”í•˜ë¯€ë¡œ, ìˆœì„œê°€ ë°”ë€Œì–´ì„  ì•ˆëœë‹¤!
-> **ì¡°ê±´ë¬¸ ì•ˆ**ì— Hooks ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€!
-> í•¨ìˆ˜ or ë°˜ë³µë¬¸ ì•ˆì—ë„ ì‚¬ìš© ìì œí•˜ê¸°.

<br>

2. useEffect, useMemo, useCallback ì˜ ë‘ë²ˆì§¸ ì¸ì

|useEffect|useMemo|useCallback|
|--|--|--|
|ìµœì´ˆ + ë‘ë²ˆì§¸ ì¸ìê°€ ë°”ë€Œë©´ ì‹¤í–‰|ë‘ë²ˆì§¸ ì¸ìê°€ ë°”ë€Œê¸° ì „ê¹Œì§€ ë¦¬í„´ê°’ ê¸°ì–µ|ë‘ë²ˆì§¸ ì¸ìê°€ ë°”ë€Œê¸° ì „ê¹Œì§€ í•¨ìˆ˜ ê¸°ì–µ|

<br>

3. useEffectëŠ” ì—¬ëŸ¬ë²ˆ ì‚¬ìš©í•´ë„ ëœë‹¤.
- ë§Œì•½, state ë³„ë¡œ ì‹¤í–‰í•˜ëŠ” ì½”ë“œë¥¼ ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ useEffectë¥¼ ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
(ì˜ˆ> timeouts.currentê°€ ë°”ë€” ë•Œ ì‹¤í–‰í•  ì½”ë“œì™€ / winNumbersê°€ ë°”ë€” ë•Œ ì‹¤í–‰í•  ì½”ë“œê°€ ë‹¤ë¥´ë©´)


> cf. í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ”?
- componentDidUpdateì—ì„œ í•œë²ˆì— ê°€ëŠ¥
-> ifë¬¸ì˜ ì¡°ê±´ì„ ë‚˜ëˆ ì„œ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤Œ. 
>
>
- í´ë˜ìŠ¤ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì—¬ëŸ¬ê°œì˜ stateë¥¼ í•œêº¼ë²ˆì— ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ, Hooksì—ì„œëŠ” í•˜ë‚˜ì˜ stateë‹¹ í•˜ë‚˜ì˜ useEffectë¥¼ ì“°ë˜, didMount+didUpdateë¥¼ í•œêº¼ë²ˆì— ê°€ëŠ¥.

ì˜ˆ -
``` jsx
componentDidUpdate(prevProps, prevState) {
  if(this.state.winBalls.length === 0) {
    // code 1
  }
  if (prevState.winNumbers !== this.state.winNumbers) {
    // code 2
  }
```


### useEffect ì—ì„œ didUpdateë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ

- useEffectì—ì„œ ë‘ë²ˆì§¸ ì¸ìë¥¼ ë¹ˆ ë°°ì—´ë¡œ ë‘ë©´ 
componentDidMountì˜ ì—­í• ì„ í•˜ê³ ,

- ë¹ˆ ë°°ì—´ì´ ì•„ë‹ ë•ŒëŠ” componentDidMount + componentDidUpdateì˜ ì—­í• ì„ í•œë‹¤.

- ê·¸ë ‡ë‹¤ë©´, componentDidUpdateì˜ ì—­í• ë§Œ í•˜ë ¤ë©´?
-> didMountë•Œ ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê²Œ í•˜ë©´ ëœë‹¤.
(ì¼ì¢…ì˜ ê¼¼ìˆ˜ ì‚¬ìš©)


``` jsx
// componentDidUpdateì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ

 const mounted = useRef(false);

 useEffect(() => {
    if (!mounted.current) {
      mounted.current = true;
    } else {
      // componentDidUpdateì—ì„œ ì‹¤í–‰í•  ì½”ë“œ
    }
  }, [ë°”ë€ŒëŠ” ê°’]) 
```
1. useRefë¡œ ì„ì˜ì˜ mount ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì„ ì„¤ì •.
2. ìµœì´ˆ ì‹¤í–‰ì‹œ, ì¦‰ mountedê°€ false ì¼ë•ŒëŠ” mountedì— trueë¥¼ ëŒ€ì…í•˜ê³  ë.
3. mountedê°€ trueê°€ ë˜ê³ , ë‘ë²ˆì§¸ ì¸ìì— ì ì–´ì¤€ ê°’ì´ ë°”ë€Œë©´ ë‹¤ì‹œ useEffectê°€ ì‹¤í–‰ëœë‹¤.
4. ì¡°ê±´ì„ ë¶ˆì¶©ì¡±í•˜ë¯€ë¡œ(mountedê°€ trueë‹ˆê¹Œ)
elseë¬¸ìœ¼ë¡œ ë¹ ì ¸ì„œ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤.


> âœ… ì •ë¦¬
>
- useEffectê°€ mountì—ë„ ì‹¤í–‰ë˜ëŠ”ê±´ ì–´ì©” ìˆ˜ ì—†ëŠ” ê²ƒì´ì§€ë§Œ, updateì‹œì—ë§Œ ì‹¤í–‰í•˜ë ¤ë©´ ìœ„ì™€ ê°™ì´ mountì‹œ ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê²Œ í•˜ë©´ ëœë‹¤!

