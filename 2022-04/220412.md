# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Lecture**](https://www.youtube.com/watch?v=KDJNjLZrqJk&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***  


>  ### **React Lecture CH 5**
~~1 - ë¼ì´í”„ì‚¬ì´í´
2 - setIntervalê³¼ ë¼ì´í”„ì‚¬ì´í´ ì—°ë™~~
3 - ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„
4 - ê³ ì°¨í•¨ìˆ˜ (Higher-order Func)
5 - useEffect
6 - í´ë˜ìŠ¤ vs Hooks ë¼ì´í”„ì‚¬ì´í´ ë¹„êµ



## ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„

RSP.jsx

``` jsx
import React, { Component } from 'react';

const rspCoords = {
  ë°”ìœ„: '0',
  ê°€ìœ„: '-142px',
  ë³´: '-284px',
};

const scores = {
  ê°€ìœ„: 1,
  ë°”ìœ„: 0,
  ë³´: -1,
};

const computerChoice = (imgCoord) => {
  return Object.entries(rspCoords).find(function (v) {
    return v[1] === imgCoord;
  })[0];
};

class RSP extends Component {
  state = {
    result: '',
    score: 0,
    imgCoord: '0',
  };

  interval;

  componentDidMount() {
    this.interval = setInterval(this.changeHand, 100);
  }

  componentWillUnmount() {
    clearInterval(this.interval);
  }

  changeHand = () => {
    const { imgCoord } = this.state;
    if (imgCoord === rspCoords.ë°”ìœ„) {
      this.setState({
        imgCoord: rspCoords.ê°€ìœ„,
      });
    } else if (imgCoord === rspCoords.ê°€ìœ„) {
      this.setState({
        imgCoord: rspCoords.ë³´,
      });
    } else if (imgCoord === rspCoords.ë³´) {
      this.setState({
        imgCoord: rspCoords.ë°”ìœ„,
      });
    }
  };

  onClickBtn = (choice) => {
    const { imgCoord } = this.state;
    clearInterval(this.interval);

    const myScore = scores[choice];
    const cpuScore = scores[computerChoice(imgCoord)];
    const diff = myScore - cpuScore;

    if (diff === 0) {
      this.setState({
        result: 'ë¹„ê²¼ìŠµë‹ˆë‹¤',
      });
    } else if ([-1, 2].includes(diff)) {
      this.setState((prevState) => {
        return {
          result: 'ì´ê²¼ìŠµë‹ˆë‹¤!',
          score: prevState.score + 1,
        };
      });
    } else {
      this.setState((prevState) => {
        return {
          result: 'ì¡ŒìŠµë‹ˆë‹¤',
          score: prevState.score - 1,
        };
      });
    }
    setTimeout(() => {
      this.interval = setInterval(this.changeHand, 100);
    }, 2000);
  };

  render() {
    const { result, score, imgCoord } = this.state;
    return (
      <>
        <div
          id="computer"
          style={{
            background: `url(https://en.pimg.jp/023/182/267/1/23182267.jpg) ${imgCoord} 0`,
          }}
        />
        <div>
          <button
            id="rock"
            className="btn"
            onClick={() => this.onClickBtn('ë°”ìœ„')}
          >
            ë°”ìœ„
          </button>
          <button
            id="scissor"
            className="btn"
            onClick={() => this.onClickBtn('ê°€ìœ„')}
          >
            ê°€ìœ„
          </button>
          <button
            id="paper"
            className="btn"
            onClick={() => this.onClickBtn('ë³´')}
          >
            ë³´
          </button>
        </div>
        <div>{result}</div>
        <div>í˜„ì¬ {score}ì </div>
      </>
    );
  }
}

export default RSP;


```

<ë³€ê²½ ì‚¬í•­>

1. setInterval ì•ˆì— ì½œë°±ì„ ë°–ìœ¼ë¡œ ë¹¼ì„œ ë³´ê¸°ì¢‹ê²Œ
-> this.changeHand


<br>

2. onClickBtn í•¨ìˆ˜ ì‘ì„±
- 1) clearInterval
- 2) myScore ê³¼ cpuScoreì„ ë¹„êµí•˜ì—¬
ìŠ¹, íŒ¨ë¥¼ ê°€ë¦¬ëŠ” ë¡œì§ êµ¬í˜„.

### â• ìŠ¹íŒ¨ ê²°ì • ë¡œì§

> ê°€ìœ„ : 1 , ë°”ìœ„ : 0, ë³´ : -1 ì´ë¯€ë¡œ
1. ë‚´ê°€ ì´ê¸°ëŠ”ê²½ìš° 
- ë°”ìœ„ë¡œ ì´ê¸°ë©´? -1
- ê°€ìœ„ë¡œ ì´ê¸°ë©´? 2
- ë³´ë¡œ ì´ê¸°ë©´? -1
âœ… ì´ê¸°ëŠ” ê²½ìš°ì—ëŠ” ë‘˜ì˜ ì°¨ì´(diff)ê°€ -1ì´ë‚˜ 2ì´ë‹¤.
>
2. ë¹„ê¸°ëŠ” ê²½ìš°ì—ëŠ” ì°¨ê°€ 0ì´ë‹¤.
3. ì§€ëŠ” ê²½ìš°ì—ëŠ” else ì²˜ë¦¬.


- if(diff === 0) ë¹„ê¹€
- else if(diffê°€ -1ì´ë‚˜ 2ë©´?) ì´ê¹€
- else ì§

> ì°¸ê³  - includes ë©”ì„œë“œ (Array.prototype)
``` js
[1,2,3,4,5].includes(2)   // true
```
- true/falseë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì¡°ê±´ì‹ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë¨.

<br>

3. ì ìˆ˜ ë³´ì—¬ì¤€ í›„, ë‹¤ì‹œ ì‹œì‘í•˜ê¸° (interval)
- setInterval(this.changeHand, 1000);

4. computerChoice í•¨ìˆ˜ ì‘ì„±
- ì¼ë°˜ í•¨ìˆ˜ì„. í´ë˜ìŠ¤ ë°”ê¹¥ì— ì‘ì„±í•˜ê¸°.


### â• computerChoice ë¡œì§

``` jsx
const computerChoice = (imgCoord) => {
  return Object.entries(rspCoords).find(function (v) {
    return v[1] === imgCoord;
  })[0];
};
```

- ì˜ˆë¥¼ ë“¤ì–´, 'ë°”ìœ„' ë²„íŠ¼ì„ ëˆŒë €ë‹¤ë©´?

- í˜„ì¬ ìƒíƒœì¸ this.state.

```  jsx
const cpuScore = scores[computerChoice(imgCoord)];
```
ì´ë¯€ë¡œ í˜„ì¬ ìƒíƒœì¸ this.state.imgCoordë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.

computerChoice í•¨ìˆ˜ ë‚´ì—ì„œ
Object.entries(rspCoords)ëŠ”

``` jsx
const rspCoords = {
  ê°€ìœ„: '0',
  ë°”ìœ„: '-142px',
  ë³´: '-284px',
};

Object.entries(rspCoords);
// [['ê°€ìœ„', '0'], ['ë°”ìœ„', '-142px'], ['ë³´', '-284px']]

```
ìœ„ì™€ ê°™ì´ `Object.entries`ë¡œ rspCoords ê°ì²´ì˜ í‚¤-ê°’ ìŒì„ ë°°ì—´ë¡œ ë‚˜íƒ€ë‚¸ í›„ì—,
Array.prototype.find()ë¡œ í•´ë‹¹ ì½œë°±ì„ ë§Œì¡±í•˜ëŠ” ì²«ë²ˆì§¸ ìš”ì†Œë¥¼ ë°˜í™˜í•œë‹¤.

``` jsx
[['ê°€ìœ„', '0'], ['ë°”ìœ„', '-142px'], ['ë³´', '-284px']]
  .find(function (v) {
    return v[1] === imgCoord;
  })[0];
// ì—¬ê¸°ì„œ vëŠ” ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ ì˜ë¯¸í•¨.
// v[1]ì€ ë‘ë²ˆì§¸ ìš”ì†Œê°€ imgCoord
// (=ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ê²ƒ. ì¦‰, this.state (í˜„ì¬ ìƒíƒœ))

// find()ëŠ” í•´ë‹¹ ìš”ì†Œë¥¼ ë°˜í™˜í•˜ê³ , 
// ë’¤ì— [0]ì„ ë¶™ì—¬ ì²«ë²ˆì§¸ ìš”ì†Œì¸ 'ê°€ìœ„' or 'ë°”ìœ„' or 'ë³´'ë¥¼ ë°˜í™˜.
```

> Object.entries
- [ì°¸ê³  ë¬¸ì„œ](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)
- ê°ì²´ ìì²´ì˜ enumerable(ìˆœíšŒê°€ëŠ¥) ì†ì„±ì˜ key-valueìŒ ë°°ì—´ì„ ë°˜í™˜.
- cf> for...inì€ í”„ë¡œí† íƒ€ì… ì²´ì¸ì˜ ì†ì„±ë„ ì—´ê±°í•˜ì§€ë§Œ, entriesëŠ” ìì‹ ì˜ ì†ì„±ë§Œ ì—´ê±°í•¨.

> Array.prototype.find
- [ì°¸ê³  ë¬¸ì„œ](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/find)
- ì¸ìˆ˜ë¡œ íŒë³„ í•¨ìˆ˜ê°€ ë“¤ì–´ê°. 
- ë§Œì¡±í•˜ëŠ” ì²«ë²ˆì§¸ ìš”ì†Œì˜ ê°’ì„ ë°˜í™˜.


<br>

4. setTimeout í•´ì£¼ê¸°

- ì ìˆ˜ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì ì‹œ clearIntervalì„ í•´ì¤¬ëŠ”ë°, 2ì´ˆ í›„ ë‹¤ì‹œ setIntervalì„ í•´ì¤€ë‹¤.
(2ì´ˆ ê¸°ë‹¤ë¦¬ì§€ ì•Šìœ¼ë©´ clearí•´ì¤€ ì˜ë¯¸ê°€ X)

``` jsx
setTimeout(() => {
      this.interval = setInterval(this.changeHand, 100);
    }, 2000);
```


***

## ê³ ì°¨í•¨ìˆ˜
= Higher-order Function


``` jsx
// JSX
<button onClick={() => this.onClickBtn('ë°”ìœ„')}>ë°”ìœ„</button>

// onClickBtn í•¨ìˆ˜
onClickBtn = (choice) => {
    // í•¨ìˆ˜ ë‚´ìš© 
}
```

ìœ„ì™€ ê°™ì´ 'ë°”ìœ„'ë¼ëŠ” ì¸ìˆ˜ë¥¼ í•¨ìˆ˜ì— ì „ë‹¬í•´ì£¼ê¸° ìœ„í•´ì„œëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ì˜ë¯¸ì—ì„œ
`() => `ë¥¼ ê¼­ ì ì–´ì¤˜ì•¼ í•œë‹¤.

(ì•ˆê·¸ëŸ¬ë©´ Error: Maximum update depth exceeded ê°€ ë°œìƒ)

> [ë‚´ Error Breaking ë¡œê·¸ ğŸ”¨](https://velog.io/@thisisyjin/React-%EC%97%90%EB%9F%AC-Maximum-update-depth-exceeded)

-> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” í˜¸ì¶œë¶€()ê°€ ìˆë‹¤ë©´ ì—ëŸ¬ ë°œìƒ.

> í•´ê²°ë°©ë²• - ê³ ì°¨í•¨ìˆ˜ (ì»¤ë§)
``` jsx
onClickBtn = (choice) => () => { // () => () => ** ì´ì¤‘.
    // í•¨ìˆ˜ ë‚´ìš©
}
>
// JSX
<button onClick={this.onClickBtn('ë°”ìœ„')}>ë°”ìœ„</button>
```


+) ì°¸ê³ 
- ì§€ê¸ˆì€ event ê°ì²´ê°€ í•„ìš” ì—†ì§€ë§Œ,
ë§Œì•½ e.target.valueë‚˜ e.preventDefault ë“±ì˜ ë™ì‘ì„ í•´ì„œ event ê°ì²´ê°€ í•„ìš”í•˜ë‹¤ë©´?

```jsx
onClickBtn = (choice) => (e) => {
  // í•¨ìˆ˜ ë‚´ìš©
}

// JSX
<button onClick={this.onClickBtn('ë°”ìœ„')}>ë°”ìœ„</button>
```


