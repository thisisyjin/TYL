# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Lecture**](https://www.youtube.com/watch?v=KDJNjLZrqJk&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn&index=18)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***  


>  ### **React Lecture CH 4**
~~1 - ë¦¬ì•¡íŠ¸ ì¡°ê±´ë¬¸
2 - setTimeout (ë°˜ì‘ì†ë„ê²Œì„)~~
3 - ì„±ëŠ¥ì²´í¬
4 - ë°˜ì‘ì†ë„ê²Œì„ (Hooks)
5 - return ë‚´ë¶€ì— for, if ì‚¬ìš©(ì œì–´ë¬¸)-





###  ì§€ë‚œì‹œê°„ Review

- render ë¶€ë¶„ì´ ë³µì¡í•´ì§€ë©´? 
-> ë”°ë¡œ í•¨ìˆ˜ë¡œ ë¹¼ì¤€ë‹¤.

``` jsx
render() {
    const { state, message } = this.state;
    return (
      <>
        <div id="screen" className={state} onClick={this.onClickScreen}>
          {message}
        </div>
        {this.renderAverage()}  // ğŸ‘ˆ ì´ë¶€ë¶„
      </>
    );
  }
```

``` jsx
// this.renderAverage
renderAverage = () => {
    const { results } = this.state;
    return results.length === 0 ? null : ( // â—ï¸ return ë¶™ì—¬ì¤˜ì•¼í•¨.
      <>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
        <button onClick={this.onReset}>ë¦¬ì…‹</button>
      </>
    );
  };
```
- ì‚¬ì‹¤ì€ í•¨ìˆ˜ë¡œ ë¹¼ëŠ”ê²ƒë„ ì¢‹ì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ì£¼ëŠ” ê²ƒì´ ë” ì¢‹ìŒ.

> [ì§€ë‚œì‹œê°„](https://velog.io/@thisisyjin/TIL-22-03-18-1#props%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B0%98%EB%B3%B5%EB%AC%B8) Try ì»´í¬ë„ŒíŠ¸ë¡œ ë¹¼ì¤¬ë˜ ê²ƒ ì²˜ëŸ¼!



***


## reset ë²„íŠ¼ ì¶”ê°€
- í‰ê·  ì‹œê°„ì„ **ë¦¬ì…‹í•˜ëŠ” ê¸°ëŠ¥ì˜ button** ì¶”ê°€í•˜ê¸°.
-> results ë°°ì—´ì˜ **í‰ê· ê°’ì„** êµ¬í•˜ëŠ” ê²ƒ ì´ë¯€ë¡œ
results ë¥¼ setStateë¡œ ë¹ˆë°°ì—´[] ë¡œ ë³€ê²½í•´ì¤€ë‹¤.

``` jsx
 renderAverage = () => {
    const { results } = this.state;
    return results.length === 0 ? null : (
      <>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
        <button onClick={this.onReset}>ë¦¬ì…‹</button>
      </>
    );
  };
```

``` jsx
onReset = () => {
    this.setState({
      results: [],
    });
  };
```

<br>


## ì„±ëŠ¥ì²´í¬

- ì“¸ ë° ì—†ëŠ” ë Œë”ë§ì´ ë°œìƒí•˜ëŠ”ì§€ ì²´í¬í•¨.
- chrome dev toolì˜ highlight ê¸°ëŠ¥ ì´ìš©.



- ë¦¬ì…‹ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í‰ê·  ì‹œê°„ ë¶€ë¶„ì´ ì‚¬ë¼ì§€ëŠ”ë°, ë™ì‹œì— screen ë¶€ë¶„ì´ ë¦¬ë Œë”ë§ ëœë‹¤.
 -> ì•„ë˜ë¶€ë¶„ë§Œ ì‚¬ë¼ì§€ë©´ ë˜ë¯€ë¡œ, ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ë°œìƒí•œ ê²ƒ.
 
 
``` jsx
...
  onReset = () => {
    this.setState({
      results: [],  // state ë³€ê²½ - render() ì‹¤í–‰ 
    });
  };

  renderAverage = () => {
    const { results } = this.state;
    return results.length === 0 ? null : (
      <>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
        <button onClick={this.onReset}>ë¦¬ì…‹</button>  
      </>
    );
  };

// ë²„íŠ¼ onClickì‹œ - onReset ì‹¤í–‰ - setState - render() ì‹¤í–‰ - ì „ì²´ê°€ ë‹¤ì‹œ ë Œë”ë§ë¨

  render() {
    const { state, message } = this.state;
    return (
      <>
        <div id="screen" className={state} onClick={this.onClickScreen}>
          {message}
        </div>
        {this.renderAverage()}
      </>
    );
  }
}

export default ResponseCheck;

```

ë”°ë¼ì„œ, screen ë¶€ë¶„ê³¼ renderAverage ë¶€ë¶„ì€ ë”°ë¡œ ë³„ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ë¶„í•´ì•¼í•œë‹¤.


> #### **âœ… ì°¸ê³ **
> í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ì „ì²´ê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ë§Œ,
í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ëŠ” render()ë¶€ë¶„ë§Œ ë‹¤ì‹œ ì‹¤í–‰ë¨.
-> í•¨ìˆ˜í˜•ì—ì„œëŠ” ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ì˜ ì¬ì‹¤í–‰ì„ ë§‰ê¸° ìœ„í•´ 
`useCallback`, `useMemo` ë“±ì„ ì´ìš©í•´ì•¼í•¨.

***

## Hooksë¡œ ë³€ê²½


``` jsx
// Hooks

import React, { useState, useRef } from 'react';

const ResponseCheck = () => {
  const [state, setState] = useState('waiting');
  const [message, setMessage] = useState('í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”');
  const [results, setResults] = useState([]);

  const timeout = useRef(null);
  const startTime = useRef();
  const endTime = useRef();

  const onClickScreen = () => {
    if (state === 'waiting') {
      setState('ready');
      setMessage('ì´ˆë¡ìƒ‰ì´ ë˜ë©´ í´ë¦­í•˜ì„¸ìš”.');
      timeout.current = setTimeout(() => {
        setState('now');
        setMessage('ì§€ê¸ˆ í´ë¦­');
        startTime.current = new Date();
      }, Math.floor(Math.random() * 1000) + 2000); // 2sec-3sec ì‚¬ì´ ëœë¤ìœ¼ë¡œ
    } else if (state === 'ready') {
      clearTimeout(timeout.current);
      setState('waiting');
      setMessage('ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤. ì´ˆë¡ìƒ‰ì´ ëœ í›„ì— í´ë¦­í•˜ì„¸ìš”.');
    } else if (state === 'now') {
      endTime.current = new Date();
      setState('waiting');
      setMessage('í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”.');

      setResults((prevResults) => [
        ...prevResults,
        endTime.current - startTime.current,
      ]);
    }
  };

  const onReset = () => {
    setResults([]);
  };

  const renderAverage = () => {
    return results.length === 0 ? null : (
      <>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
        <button onClick={onReset}>ë¦¬ì…‹</button>
      </>
    );
  };

  return (
    <>
      <div id="screen" className={state} onClick={onClickScreen}>
        {message}
      </div>
      {renderAverage()}
    </>
  );
};

export default ResponseCheck;
```

> **KEY POINT**
> - React.useStateë¡œ state êµ¬í˜„
> - `this` ëª¨ë‘ ì œê±° - hooksì—ì„œëŠ” ì•ˆì“°ì„.
> - â­ï¸ **useRef()ì˜ ë˜ë‹¤ë¥¸ ìš©ë„**
-> 1. DOMì— ì ‘ê·¼í•˜ëŠ” ìš©ë„ (ex> focus() ë“±)
-> 2. â—ï¸ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ë³€í•˜ëŠ” ê°’.


- ìš°ë¦¬ê°€ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë„
`timeout`, `startTime`, `endTime` ì€ stateê°€ ì•„ë‹Œ í´ë˜ìŠ¤ ëª¸ì²´ì— ì„ ì–¸í–ˆì—ˆë‹¤.

``` jsx
class ResponseCheck extends Component {
  state = {
    state: 'waiting',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };


// ì´ ë¶€ë¶„ ğŸ”»
  timeout;
  startTime;
  endTime;
...
}

```

- í´ë˜ìŠ¤ ëª¸ì²´ì— í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•˜ì—¬ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤.


- ì¦‰, ê°’ì´ ë³€í• ë•Œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì•¼ í•˜ë©´ - `state`
- ê°’ì´ ë³€í•´ë„ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•Šì•„ì•¼ í•˜ë©´ - ìœ„ì™€ ê°™ì´ ì„ ì–¸í•œë‹¤.
= this.timeout, this.startTime, this.endTime

<br>

<center> âœ… ê·¸ë ‡ë‹¤ë©´, Hooks ì—ì„œëŠ”?</center>

- Hooksì—ì„œëŠ” í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¯€ë¡œ, í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•  ìˆ˜ëŠ” ì—†ë‹¤. (this.___ ë¶ˆê°€)

- Hooksì—ì„œëŠ” ëŒ€ì‹  `useRef()`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### useRef()

- useRefëŠ” DOMì— ì ‘ê·¼ ë° ì €ì¥í•˜ì—¬ focus ë“±ì„ í•˜ëŠ”ë° ì‚¬ìš©í–ˆë‹¤.

``` jsx
let inputRef = useRef(null);

<input ref={inputRef} />

// ì‚¬ìš©ì‹œ
inputRef.current.focus();
```


> [ì°¸ê³  - í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ useRef()ì™€ ìœ ì‚¬í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•œ `createRef()`](https://velog.io/@thisisyjin/TIL-22-04-05-4#reactcreateref)



- useRefëŠ” í´ë˜ìŠ¤ ëª¸ì²´ì— ì„ ì–¸í•œ í”„ë¡œí¼í‹°ì™€ ê°™ì€ ë™ì‘ì„ í•œë‹¤.
-> ì¦‰, ê°’ì´ ë³€ê²½ë˜ì–´ë„ ë¦¬ë Œë”ë§ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤!

> #### â—ï¸ ì£¼ì˜
- useRef()ë¥¼ ì‚¬ìš©í• ë•Œ or ê°’ì„ ë³€ê²½í• ë•ŒëŠ” ë°˜ë“œì‹œ
**current**ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤!


> ì°¸ê³  - current í”„ë¡œí¼í‹° (react.org document)
>
render() ì•ˆì—ì„œ **refê°€ ì—˜ë¦¬ë¨¼íŠ¸ì—ê²Œ ì „ë‹¬**ë˜ì—ˆì„ ë•Œ, **ê·¸ ë…¸ë“œë¥¼ í–¥í•œ ì°¸ì¡°ëŠ” refì˜ current ì–´íŠ¸ë¦¬ë·°íŠ¸ì—** ë‹´ê¸°ê²Œ ë©ë‹ˆë‹¤.
>
``` jsx
const node = this.myRef.current;
```
>
refì˜ ê°’ì€ ë…¸ë“œì˜ ìœ í˜•ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.
>
ref ì–´íŠ¸ë¦¬ë·°íŠ¸ê°€ HTML ì—˜ë¦¬ë¨¼íŠ¸ì— ì“°ì˜€ë‹¤ë©´, ìƒì„±ìì—ì„œ React.createRef()ë¡œ ìƒì„±ëœ refëŠ” ìì‹ ì„ ì „ë‹¬ë°›ì€ **DOM ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ current í”„ë¡œí¼í‹°ì˜ ê°’**ìœ¼ë¡œì„œ ë°›ìŠµë‹ˆë‹¤.
>
ref ì–´íŠ¸ë¦¬ë·°íŠ¸ê°€ ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì— ì“°ì˜€ë‹¤ë©´, ref ê°ì²´ëŠ” ë§ˆìš´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ì˜ **ì¸ìŠ¤í„´ìŠ¤ë¥¼ current í”„ë¡œí¼í‹°ì˜ ê°’**ìœ¼ë¡œì„œ ë°›ìŠµë‹ˆë‹¤.
>
í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì— ref ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

<br>

### useRef()ì˜ í™œìš©

- JSë¡œ DOM ìš”ì†Œì— focus í•˜ê¸°, í…ìŠ¤íŠ¸ ì„ íƒì˜ì—­, í˜¹ì€ ë¯¸ë””ì–´ì˜ ì¬ìƒì„ ê´€ë¦¬í•  ë•Œ.
- ì• ë‹ˆë©”ì´ì…˜ì„ ì§ì ‘ì ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¬ ë•Œ.
- ì„œë“œ íŒŒí‹° DOM ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ Reactì™€ ê°™ì´ ì‚¬ìš©í•  ë•Œ.

-> 'ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸'ë¥¼ ì œì–´í•  ë•Œ.

> 'ë¹„ì œì–´ ì»´í¬ë„ŒíŠ¸' ë€?
- ë¦¬ì•¡íŠ¸ê°€ ì œì–´í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸. 
- ìˆœìˆ˜ JSë¡œë§Œ ì œì–´í•¨.


<br>


***

### +) return ì•ˆì—ì„œ if, for ì‚¬ìš©í•˜ê¸°


- Reactì˜ return() ì•ˆì—ì„œëŠ” ì¡°ê±´ë¬¸(if) / ë°˜ë³µë¬¸(for)ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤.
- ë”°ë¼ì„œ if-else ëŒ€ì‹  ì‚¼í•­ì—°ì‚°ì( ? : ) ë¥¼ ì‚¬ìš©í•˜ê³ ,
- ë°˜ë³µë¬¸ ëŒ€ì‹ ì—ëŠ” ë°°ì—´ì˜ map ë©”ì„œë“œë¥¼ ì‚¬ìš©í–ˆë‹¤.

``` jsx
// mapì„ ì´ìš©í•œ ë°˜ë³µë¬¸
return(
  <ul>
  {tries.map((v, index) => (
          <Try key={`${index}ì°¨ì‹œë„`} tryInfo={v} />
        ))}
  </ul>
)


// ì‚¼í•­ì—°ì‚°ìë¥¼ ì´ìš©í•œ ì¡°ê±´ë¬¸
return loading ? null : (
      <>
        <Contents />
      </>
  )
```

- ì‚¬ì‹¤ì€, return ì•ˆì—ì„œë„ ifë‚˜ forì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤!
- ë‹¨, ê±°ì˜ ì´ë ‡ê²Œ ì“¸ ì¼ì€ ì—†ê³  ì½”ë“œë„ ë§¤ìš° ì§€ì €ë¶„í•´ì§„ë‹¤.

> ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜(IIFE) ì•ˆì— if, forë¬¸ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```jsx
return (
    <>
      <div id="screen" className={state} onClick={onClickScreen}>
        {message}
      </div>
      {renderAverage()}

      {(() => {
        if (results.length === 0) {
          return null;
        } else {
          return (
            <>
              í‰ê·  ì‹œê°„:
              {results.reduce((prev, cur) => prev + cur) / results.length}
              ms
              <button onClick={onReset}>ë¦¬ì…‹</button>
            </>
          );
        }
      })()}
```

- í•¨ìˆ˜ ì•ˆì—ëŠ” if,forì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„±ì§ˆì„ ì´ìš©í•¨.
- ë‹¨, í•¨ìˆ˜ê°€ ì¦‰ì‹œ í˜¸ì¶œ(=ì‹¤í–‰)ë˜ë„ë¡ IIFE ë¥¼ ì´ìš©.


<br>

ë°˜ë³µë¬¸ì˜ ê²½ìš°ì—ëŠ”, ê° ìš”ì†Œì— í•´ë‹¹í•˜ëŠ” JSXë¥¼ ì €ì¥í•  array ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ pushí•œ í›„, í•´ë‹¹ arrayë¥¼ ë¦¬í„´í•´ì•¼ í•œë‹¤.

(ê¸°ì¡´ì—ëŠ” ë°°ì—´ ë©”ì„œë“œì¸ mapìœ¼ë¡œ ì•Œì•„ì„œ ìˆœíšŒí–ˆì§€ë§Œ, forë¬¸ìœ¼ë¡œ ë°”ê¿”ì•¼ í•˜ë¯€ë¡œ)

``` jsx
{(() => {
          const array = [];
          for (let i = 0; i < tries.length; i++) {
            array.push(<Try key={`${index}ì°¨ì‹œë„`} tryInfo={v} />)
          }
          return array;
        })()}
```

-> âœ… ì´ì™€ ê°™ì´ ë°°ì—´ ì•ˆì— JSXë¥¼ ë‹´ì•„ ë¦¬í„´í•˜ëŠ” ê²ƒë„ ìœ íš¨í•œ ë¬¸ë²•ì´ë‹¤! 
ì˜ˆ>

``` jsx
// ë°°ì—´ ë¦¬í„´ë„ ê°€ëŠ¥! 
// â—ï¸ ë‹¨, keyë¥¼ ì ì–´ì¤˜ì•¼í•œë‹¤.
return [
    <div key="apple">ì‚¬ê³¼</div>,
    <div key="banana">ë°”ë‚˜ë‚˜</div>,
    <div key="strbr">ë”¸ê¸°</div>,
    <div key="grape">í¬ë„</div>,
    <div key="kiwi">í‚¤ìœ„</div>,
  ];
```
-> ì˜ ì•ˆì”€. ì—¬ëŸ¬ íƒœê·¸ë¥¼ ë¬¶ì–´ì¤„ ë–„ì—ëŠ” `<></>`ë¥¼ ë” ë§ì´ ì“´ë‹¤.

> ì£¼ì˜
- ì™ ë§Œí•´ì„œëŠ” if, forì„ ì“¸ê±°ë©´ ì´ëŸ°ì‹ìœ¼ë¡œ return ì•ˆì— ì“°ì§€ ë§ê³ , 
í•¨ìˆ˜ë¡œ ë¹¼ë˜ê°€ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ì£¼ì.
