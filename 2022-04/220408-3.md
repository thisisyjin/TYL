# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**React.js Lecture**](https://www.youtube.com/watch?v=KDJNjLZrqJk&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn&index=18)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)



***  


>  ### **React Lecture CH 4**
1 - ë¦¬ì•¡íŠ¸ ì¡°ê±´ë¬¸
2 - setTimeout (ë°˜ì‘ì†ë„ê²Œì„)
3 - ì„±ëŠ¥ì²´í¬
4 - ë°˜ì‘ì†ë„ê²Œì„ (Hooks)
5 - return ë‚´ë¶€ì— for, if ì‚¬ìš©(ì œì–´ë¬¸)-



## ë¦¬ì•¡íŠ¸ ì¡°ê±´ë¬¸

- ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸ ê²Œì„


- ì²˜ìŒ í™”ë©´ í´ë¦­ì‹œ wating -> ë…¹ìƒ‰í™”ë©´ ë˜ë©´ í´ë¦­ ì•ˆë‚´ì‹œ ready -> í´ë¦­ì‹œ now ìˆœìœ¼ë¡œ stateê°€ ë°”ë€œ.


### ì´ˆê¸° state, JSX ì‘ì„±

``` jsx
import React, { Component } from 'react';

class ResponseCheck extends Component {
  state = {
    state: 'wating',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };

  onClickScreen = () => {};

  render() {
    return (
      <>
        <div
          id="screen"
          className={this.state.state}
          onClick={this.onClickScreen}
        >
          {this.state.message}
        </div>

        <div>
          í‰ê·  ì‹œê°„:{' '}
          {this.state.results.reduce((prev, cur) => prev + cur) /
            this.state.results.length}
          ms
        </div>
      </>
    );
  }
}

export default ResponseCheck;


```

- return() ì•ˆì—ì„œ, ì¦‰ JSX ì•ˆì—ì„œëŠ” forì´ë‚˜ ifë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- for(ë°˜ë³µë¬¸)ëŒ€ì‹  `map`ì„ ì´ìš©í•˜ê³ , if(ì¡°ê±´ë¬¸)ëŒ€ì‹  `ì‚¼í•­ ì—°ì‚°ì`ë‚˜ ë‹¨ì¶•í‰ê°€(&&)ë¥¼ ì´ìš©í•œë‹¤.


- ìœ„ ì½”ë“œëŒ€ë¡œ ì‹¤í–‰í•˜ë©´, ì—ëŸ¬ê°€ ë°œìƒí•¨. (`results`ê°€ ë¹ˆ ë°°ì—´ì´ë¼ reduceë¥¼ í• ìˆ˜ ì—†ìŒ)
![](https://velog.velcdn.com/cloudflare/thisisyjin/9d258a5c-edb2-40f6-a565-29858f49c34f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-04-08%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%208.45.33.png)



- resultsê°€ ë¹ˆ ë°°ì—´ì´ë©´(=lenghê°€ 0ì´ë©´) -> nullì„ ë°˜í™˜í•˜ê³ , ì•„ë‹ˆë©´ `<div>` ë°˜í™˜í•˜ê²Œ.
- âœ… JSXì—ì„œ `undefined`, `false`, `null`ì€ íƒœê·¸ê°€ ì—†ìŒì„ ì˜ë¯¸í•¨!

-> **ì‚¼í•­ ì—°ì‚°ì** ì´ìš©
```jsx
{this.state.results.length === 0 ? null : (
          <div>
            í‰ê·  ì‹œê°„:
            {this.state.results.reduce((prev, cur) => prev + cur) /
              this.state.results.length}
            ms
          </div>
)}
```
> **â—ï¸ ì°¸ê³ **
ë¹ˆ ë°°ì—´ []ëŠ” Falsy valueê°€ ì•„ë‹ˆë‹¤. `!![]`ëŠ” falseì§€ë§Œ, ì¡°ê±´ì‹ìœ¼ë¡œ ì‚¬ìš©ì‹œ `true`ì´ë‹¤.
-> ë”°ë¼ì„œ, ìœ„ì—ì„œëŠ” `results.length === 0`ì„ ì¡°ê±´ìœ¼ë¡œ í•´ì•¼í•œë‹¤! 


> ì°¸ê³  - 2
- ì‚¼í•­ì—°ì‚°ì ( ? : ) ë§ê³ ë„ ë‹¨ì¶•í‰ê°€ (&&)ë„ ì‚¬ìš© ê°€ëŠ¥
- ì¢Œí•­ì´ falseë©´ false ë¦¬í„´ / trueë©´ ìš°í•­ì˜ ê°’ ë¦¬í„´.
``` jsx
{this.state.results.length === 0 && (
          <div>
            í‰ê·  ì‹œê°„:
            {this.state.results.reduce((prev, cur) => prev + cur) /
              this.state.results.length}
            ms
          </div> 
)}
```

***

### ì¡°ê±´ë¬¸ ì‘ì„±
- ì‚¼í•­ì—°ì‚°ì( ? : ) ì‚¬ìš©.
- í•¨ìˆ˜ë¡œ ë”°ë¡œ ë¹¼ì¤˜ì„œ ë Œë”ë§ í• ë•Œë§ˆë‹¤ ë°˜ë³µí•  ì¼ì´ ì—†ë„ë¡ í•¨ + ê°€ë…ì„±

``` jsx
import React, { Component } from 'react';

class ResponseCheck extends Component {
  state = {
    state: 'wating',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };

  onClickScreen = () => {};

  renderAverage = () => {
    const { results } = this.state;  // this.state.resultsëŠ” ë„ˆë¬´ ê¸¸ì–´ì„œ ê°€ë…ì„± X - êµ¬ì¡°ë¶„í•´ë¡œ ì¤„ì—¬ì¤Œ
    return results.length === 0 ? null : (
      <div>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) /
          results.length}
        ms
      </div>
    );
  };

  render() {
    const { state, message } = this.state;
    return (
      <>
        <div id="screen" className={state} onClick={this.onClickScreen}>
          {message}
        </div>
        {this.renderAverage}
      </>
    );
  }
}

export default ResponseCheck;

```

<br>


### onClick í•¨ìˆ˜ ì‘ì„±

#### 1) waiting -> ready -(setTimeout)-> now
``` jsx

  onClickScreen = () => {
    const { state, message, results } = this.state;
    if (state === 'wating') {      // waiting ìƒíƒœì¼ë•Œ í´ë¦­ì‹œ
      this.setState({        
        state: 'ready',            // readyë¡œ ë³€ê²½í›„, message ë³€ê²½
        message: 'ì´ˆë¡ìƒ‰ì´ ë˜ë©´ í´ë¦­í•˜ì„¸ìš”.',
      });
      
      setTimeout(() => {        // 2-3ì´ˆ í›„ì— nowë¡œ ë³€ê²½ í›„, message ë³€ê²½
        this.setState({
          state: 'now',
          message: 'ì§€ê¸ˆ í´ë¦­',
        });
      }, Math.floor(Math.random() * 1000) + 2000); // 2sec-3sec ì‚¬ì´ ëœë¤ìœ¼ë¡œ
    } else if (state === 'ready') {
      // ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤ ë¼ëŠ” ë¬¸êµ¬ ëœ¨ê²Œ
    } else if (state === 'now') {
        // í´ë¦­ì‹œ ì‹œê°„ ëœ¨ê²Œ
    }
  };
```


#### 2) ready, nowì¼ë•Œ ë¡œì§

``` jsx
import React, { Component } from 'react';

class ResponseCheck extends Component {
  state = {
    state: 'waiting',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };

  onClickScreen = () => {
    const { state, message, results } = this.state;
    if (state === 'waiting') {
      this.setState({
        state: 'ready',
        message: 'ì´ˆë¡ìƒ‰ì´ ë˜ë©´ í´ë¦­í•˜ì„¸ìš”.',
      });
      setTimeout(() => {
        this.setState({
          state: 'now',
          message: 'ì§€ê¸ˆ í´ë¦­',
        });
      }, Math.floor(Math.random() * 1000) + 2000); // 2sec-3sec ì‚¬ì´ ëœë¤ìœ¼ë¡œ
    } else if (state === 'ready') {
      this.setState({
        state: 'waiting',
        message: 'ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤. ì´ˆë¡ìƒ‰ì´ ëœ í›„ì— í´ë¦­í•˜ì„¸ìš”.',
      });
    } else if (state === 'now') {
      this.setState({
        state: 'waiting',
        results: [], // ì¶”í›„ ìˆ˜ì • (result ì¶”ê°€í•˜ëŠ”ê²ƒ)
        message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”.',
      });
    }
  };

  renderAverage = () => {
    const { results } = this.state;
    return results.length === 0 ? null : (
      <div>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
      </div>
    );
  };

  render() {
    const { state, message } = this.state;
    return (
      <>
        <div id="screen" className={state} onClick={this.onClickScreen}>
          {message}
        </div>
        {this.renderAverage}
      </>
    );
  }
}

export default ResponseCheck;
```

<figure>
  <img src="https://velog.velcdn.com/cloudflare/thisisyjin/943280f1-538e-478f-b49f-af555ab738ce/Apr-08-2022%2021-31-54.gif" />
  <img src="https://velog.velcdn.com/cloudflare/thisisyjin/baae62b1-f022-448d-99d7-2096aa3d9d10/Apr-08-2022%2021-32-48.gif" />
</figure>

- ready ìƒíƒœì—ì„œ í´ë¦­í•˜ë©´, this.setStateì— ì˜í•´ `state`ê°€ 'waiting'ì´ ë˜ì§€ë§Œ,
setTimeoutì€ ê·¸ëŒ€ë¡œ ì§„í–‰ëœë‹¤.
-> ë§ˆì§€ë§‰ì— stateê°€ nowê°€ ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ.
-> âœ… clearTimeoutì´ í•„ìš”í•˜ë‹¤!


```jsx
import React, { Component } from 'react';

class ResponseCheck extends Component {
  state = {
    state: 'waiting',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };

  timeout;    // â• 1. this.timeoutì„ ì„ ì–¸í•´ì¤Œ (ê·¸ëƒ¥ í•¨ìˆ˜ ëª¸ì²´ì— ì„ ì–¸í•˜ë©´ ë¨)

  onClickScreen = () => {
    const { state, message, results } = this.state;
    if (state === 'waiting') {
      this.setState({
        state: 'ready',
        message: 'ì´ˆë¡ìƒ‰ì´ ë˜ë©´ í´ë¦­í•˜ì„¸ìš”.',
      });
      this.timeout = setTimeout(() => {   // â• 2. setTimeoutí•¨ìˆ˜ë¥¼ this.timeoutì— í• ë‹¹
        this.setState({
          state: 'now',
          message: 'ì§€ê¸ˆ í´ë¦­',
        });
      }, Math.floor(Math.random() * 1000) + 2000); 
    } else if (state === 'ready') {
      clearTimeout(this.timeout);    // â• 3. clearTimeout() í•´ì¤Œ
      this.setState({
        state: 'waiting',
        message: 'ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤. ì´ˆë¡ìƒ‰ì´ ëœ í›„ì— í´ë¦­í•˜ì„¸ìš”.',
      });
    } else if (state === 'now') {
      this.setState({
        state: 'waiting',
        results: [...results], // ìˆ˜ì •
        message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”.',
      });
    }
  };

...
```
> ì™œ ë¯¸ë¦¬ `this.timeout`ì„ ì„ ì–¸í•´ë‘ì—ˆëŠ”ì§€?
- ë§Œì•½ ifë¬¸ ì•ˆì—ì„œ timeoutë³€ìˆ˜ë¥¼ ì„ ì–¸í–ˆë‹¤ë©´ ì¤‘ë³µì„ ì–¸ ë¶ˆê°€ì´ê³ ,
í´ë˜ìŠ¤ì˜ í”„ë¡œí¼í‹°(this.timeout)ë¡œ ì‚¬ìš©í•˜ë ¤ë©´, í´ë˜ìŠ¤ ë‚´ë¶€(=ëª¸ì²´)ì—ì„œ ì„ ì–¸í•´ì•¼í•¨.

<br>

### 3) ë°˜ì‘ì‹œê°„ ì¸¡ì •

- ë°˜ì‘ì‹œê°„ = state:nowê°€ ëœ ìˆœê°„ë¶€í„° -> í´ë¦­ì„ í•œ ìˆœê°„ê¹Œì§€.
-> ì¦‰, setTimeoutì„ í• ë•Œ ì‹œì‘ì‹œê°„ì„ ì¬ê³ , else if(state === 'now')ì¼ë•Œ í´ë¦­ì‹œê°„ì„ ì¬ì„œ ë‘ ì‹œê°„ì˜ ì°¨ë¥¼ êµ¬í•¨.
- new Date() - í˜„ì¬ ì‹œê°„ (Date ê°ì²´)

> **âœ… ì°¸ê³ **
- ì—¬ê¸°ì„œ ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ë„ ë³€í•˜ëŠ” ê°’ì´ì§€ë§Œ,
ë Œë”ë§ì´ ì¼ì–´ë‚  í•„ìš”ëŠ” ì—†ìœ¼ë¯€ë¡œ stateê°€ ì•„ë‹Œ, í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•˜ê¸°!
- stateê°€ ë°”ë€Œë©´ ë‹¤ì‹œ ë Œë”ë§ì´ ë˜ì§€ë§Œ, í”„ë¡œí¼í‹°ëŠ” ë°”ë€Œì–´ë„ ë¦¬ë Œë”ë§ âŒ
>
>
- ë Œë”ë§ì´ ì¼ì–´ë‚˜ì•¼ í•˜ëŠ” ê²ƒì€? - `state`ë¡œ
- ë Œë”ë§ì´ í•„ìš”ì—†ëŠ” ë³€ìˆ˜ëŠ”? - this.~~ (í”„ë¡œí¼í‹°)ë¡œ

<br>


```jsx
import React, { Component } from 'react';

class ResponseCheck extends Component {
  state = {
    state: 'waiting',
    message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”',
    results: [],
  };

  timeout;
  startTime;
  endTime;

  onClickScreen = () => {
    const { state, message, results } = this.state;
    if (state === 'waiting') {
      this.setState({
        state: 'ready',
        message: 'ì´ˆë¡ìƒ‰ì´ ë˜ë©´ í´ë¦­í•˜ì„¸ìš”.',
      });
      this.timeout = setTimeout(() => {
        this.setState({
          state: 'now',
          message: 'ì§€ê¸ˆ í´ë¦­',
        });
        this.startTime = new Date();
      }, Math.floor(Math.random() * 1000) + 2000); // 2sec-3sec ì‚¬ì´ ëœë¤ìœ¼ë¡œ
    } else if (state === 'ready') {
      clearTimeout(this.timeout);
      this.setState({
        state: 'waiting',
        message: 'ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤. ì´ˆë¡ìƒ‰ì´ ëœ í›„ì— í´ë¦­í•˜ì„¸ìš”.',
      });
    } else if (state === 'now') {
      this.endTime = new Date();
      this.setState((prevState) => {
        return {
          state: 'waiting',
          message: 'í´ë¦­í•´ì„œ ì‹œì‘í•˜ì„¸ìš”.',
          results: [...prevState.results, this.endTime - this.startTime], // pushë§ê³  spreadë¥¼ ì¨ì•¼í•¨. (ì›ë³¸ ë³€ê²½ X)
        };
      });
      console.log(this.startTime, this.endTime, this.state.results);
    }
  };

  renderAverage = () => {
    const { results } = this.state;
    return results.length === 0 ? null : (
      <div>
        í‰ê·  ì‹œê°„:
        {results.reduce((prev, cur) => prev + cur) / results.length}
        ms
      </div>
    );
  };

  render() {
    const { state, message } = this.state;
    return (
      <>
        <div id="screen" className={state} onClick={this.onClickScreen}>
          {message}
        </div>
        {this.renderAverage()} 
      </>
    );
  }
}

export default ResponseCheck;

```

> **Error Breaking ğŸ”¨**
- ì²˜ìŒì— JSX ë¶€ë¶„ì— {this.renderAverage} ë¼ê³ ë§Œ ì‘ì„±í–ˆì—ˆëŠ”ë°,
- í•¨ìˆ˜ì´ë¦„ ì ê¸°ë§Œ í•˜ë‹ˆ í•¨ìˆ˜ ì‹¤í–‰ì´ ì•ˆëœë‹¤.
- ê³ ë¡œ, ë¦¬í„´ê°’ì´ ì—†ë‹¤.
- ë°˜ë“œì‹œ í˜¸ì¶œë¶€ ()ì™€ í•¨ê»˜ ì ì–´ì¤˜ì•¼ ë¦¬í„´ê°’ì¸ JSXê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤.

<br>


###  ì‹¤í–‰ ê²°ê³¼

![](https://velog.velcdn.com/cloudflare/thisisyjin/f81b7d41-cbe4-4b91-91d6-40c09e1df344/Apr-08-2022%2022-22-10.gif)

- í´ë¦­ í• ë•Œë§ˆë‹¤ -> results ë°°ì—´ì— ê°’ì´ ì¶”ê°€ë˜ê³  -> í‰ê· ê°’ì´ ë³€í™”í•¨




### ìˆœì„œë„ + ì •ë¦¬

- í´ë¦­ì‹œë§ˆë‹¤ if-elseë¡œ í˜„ì¬ stateë¥¼ ê²€ì‚¬í•¨.
- ë°˜ë“œì‹œ setTimeout -> clearTimeoutì„ í•´ì¤˜ì•¼í•¨.
- ë Œë”ë§ì´ í•„ìš”ì—†ëŠ” timeout(setTimeout í• ë‹¹ìš©)ì´ë‚˜ startTime, endTimeì€ í”„ë¡œí¼í‹°ë¡œ.
(stateë¡œ ì„¤ì •ì‹œ, ë°”ë€”ë•Œë§ˆë‹¤ ë Œë”ë§ ë°œìƒ)

![](https://velog.velcdn.com/cloudflare/thisisyjin/824980e2-85e2-48f0-8ca4-04474c7a419a/Frame%201%20(3).jpg)
