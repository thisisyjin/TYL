# React.js

**Today I Learned ... **`react.js`

>ğŸ™‹â€â™‚ï¸ [**Reference Book**](https://thebook.io/080203/)

>ğŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)

***

> **ë¦¬ì•¡íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ  DAY 17**
- React + Redux 


# React + Redux Project

- Reactì—ì„œ ì†Œê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œëŠ” stateë¡œë„ ì¶©ë¶„í•˜ì§€ë§Œ, í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§€ë©´ state ê´€ë¦¬ê°€ ë²ˆê±°ë¡œì›€.


- Reactì—ì„œ Reduxë¥¼ ì‚¬ìš©í•˜ë©´, **ìƒíƒœ ì—…ë°ì´íŠ¸ì— ê´€í•œ ë¡œì§**ì„ `ëª¨ë“ˆ`ë¡œ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ **ë³„ê°œì˜ íŒŒì¼ë¡œ ê´€ë¦¬**í•  ìˆ˜ ìˆìŒ.
-> ì½”ë“œ ìœ ì§€ë³´ìˆ˜ ë° ìµœì í™” ìš©ì´.
- ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ **ë™ì¼í•œ ìƒíƒœë¥¼ ê³µìœ **í•´ì•¼í•  ë•Œ ë§¤ìš° ìœ ìš©.


[ì´ì „ í¬ìŠ¤íŒ…](https://velog.io/@thisisyjin/TIL-22-05-03)ì—ì„œ vanila JS í™˜ê²½ì—ì„œ ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œì—ëŠ” storeì˜ ë‚´ì¥ í•¨ìˆ˜ì¸ `store.dispatch`, `store.subscribe`ë¥¼ ì‚¬ìš©í–ˆìŒ.

- ë¦¬ì•¡íŠ¸ì—ì„œ ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ”, storeê°ì²´ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” 
`react-redux`ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ **ìœ í‹¸ í•¨ìˆ˜** ë° **ì»´í¬ë„ŒíŠ¸**ë¥¼ ì‚¬ìš©í•¨.


## redux, react-redux ì„¤ì¹˜

``` bash
$ yarn add redux react-redux
```

## UI ì¤€ë¹„í•˜ê¸°

ë¦¬ì•¡íŠ¸ í™˜ê²½ì—ì„œ ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì€
**í”„ë ˆì  í…Œì´ì…”ë„ ì»´í¬ë„ŒíŠ¸**ì™€ **ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸**ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒ.

|í”„ë ˆì  í…Œì´ì…”ë„ ì»´í¬ë„ŒíŠ¸|ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸|
|:--:|:--:|
|state ê´€ë¦¬ X. ê·¸ì € propsë¥¼ ë°›ì•„ í™”ë©´ì— UIë¥¼ ë³´ì—¬ì£¼ê¸°ë§Œ í•¨|ë¦¬ë•ìŠ¤ì™€ ì—°ë™. ë¦¬ë•ìŠ¤ë¡œë¶€í„° stateë¥¼ ë°›ì•„ì˜¤ê¸°ë„ í•˜ê³ , <br>storeì— ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜ í•˜ê¸°ë„ í•¨.|

-> ì´ëŸ¬í•œ íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œ ì¬ì‚¬ìš©ì„±ë„ ë†’ì•„ì§€ê³ , UI ì‘ì„±ì— ë” ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.

![](https://velog.velcdn.com/images/thisisyjin/post/be44c899-a21a-44f8-a78f-b7f790d7c5e8/image.jpg)

UI ê´€ë ¨ **í”„ë ˆì  í…Œì´ì…”ë„ ì»´í¬ë„ŒíŠ¸**ëŠ” `src/components`ì— ì €ì¥í•˜ê³ ,
Reduxì— ì—°ë™ëœ **ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸**ëŠ” `src/containers` ì»´í¬ë„ŒíŠ¸ì— ì‘ì„±í•¨.

***

### 1) Counter ì»´í¬ë„ŒíŠ¸ ìƒì„± 

src/components/Counter.js

``` jsx
const Counter = ({ number, onIncrease, onDecrease }) => {
    return (
        <div>
            <h1>{number}</h1>
            <div>
                <button onClick={onIncrease}>+1</button>
                <button onClick={onDecrease}>-1</button>
            </div>
        </div>
    )
}
export default Counter;
```
<br />

App.js
``` jsx
import Counter from "./components/Counter";

function App() {
  return (
    <div>
      <Counter number={0} />
    </div>
  );
}

export default App;
```

### 2) Todos ì»´í¬ë„ŒíŠ¸ 

``` jsx
const TodoItem = ({ todo, onToggle, onRemove }) => {
    return (
        <div>
            <input type="checkbox" />
            <span>ì˜ˆì œ í…ìŠ¤íŠ¸</span>
            <button>ì‚­ì œ</button>
        </div>
    );
};

const Todos = ({
    input,
    todos,
    onChangeInput,
    onInsert,
    onToggle,
    onRemove
}) => {
    const onSubmit = e => {
        e.preventDefalt();
    };
    return (
        <div>
            <form onSubmit={onSubmit}>
                <input />
                <button type="submit">ë“±ë¡</button>
            </form>
            <div>
                <TodoItem />
                <TodoItem />
                <TodoItem />
                <TodoItem />
                <TodoItem />
            </div>
        </div>
    );
};

export default Todos;
```
- íŒŒì¼ í•˜ë‚˜ì— ë‘ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„ ì–¸í•¨. (ë¶„ë¦¬í•´ë„ OK)
 
 

### 3) App.js ë Œë”ë§
``` jsx
import Counter from "./components/Counter";
import Todos from "./components/Todos";

function App() {
  return (
    <div>
      <Counter number={0} />
      <hr />
      <Todos />
    </div>
  );
}

export default App;
```

***

## ë¦¬ë•ìŠ¤ ê´€ë ¨ ì½”ë“œ ì‘ì„±

- ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì•¡ì…˜ íƒ€ì…, ì•¡ì…˜ ìƒì„±í•¨ìˆ˜, reducer ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•¨.
- ê°ê° ë‹¤ë¥¸ í´ë”ë¥¼ ì§€ì •í•˜ì—¬ ì‘ì„±í•  ìˆ˜ë„ ìˆìŒ.

![](https://velog.velcdn.com/images/thisisyjin/post/ca1093e2-335a-4bc2-927a-3f76e9df7a84/image.png)
-  Redux ê³µì‹ ë¬¸ì„œì—ì„œë„ ì‚¬ìš©ë˜ëŠ” **ê¸°ë³¸ì  êµ¬ì¡°**.
- `actions`, `constants`, `reducers` ì„¸ ê°œì˜ ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— ê¸°ëŠ¥ë³„ë¡œ íŒŒì¼ì„ ìƒì„±.
-> ìƒˆë¡œìš´ ì•¡ì…˜ì„ ë§Œë“¤ ë•Œ ë§ˆë‹¤ ì„¸ì¢…ë¥˜ì˜ íŒŒì¼ì„ ëª¨ë‘ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ O.



> #### ğŸ¥ Ducks íŒ¨í„´
- ì•„ë˜ì™€ ê°™ì´ ì•¡ì…˜íƒ€ì… / ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ / ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ê¸°ëŠ¥ë³„ë¡œ íŒŒì¼ í•˜ë‚˜ë¡œ ëª°ì•„ì„œ ì‘ì„±í•¨.
![](https://velog.velcdn.com/images/thisisyjin/post/b193e34b-5570-4095-9004-f85015c86153/image.png)
- ë‘˜ì¤‘ ì•„ë¬´ íŒ¨í„´ì´ë‚˜ ì‚¬ìš©í•´ë„ ë¨. (ìƒê´€ X)


### counter ëª¨ë“ˆ ì‘ì„±

#### 1) ì•¡ì…˜ íƒ€ì… + ìƒì„± í•¨ìˆ˜
``` js
// ì•¡ì…˜ íƒ€ì… 
const INCREASE = 'counter/INCREASE';
const DECREASE = 'counter/DECREASE';

export const increase = () => ({ type: INCREASE });
export const decrease = () => ({ type: DECREASE });
```

- ì•¡ì…˜ íƒ€ì…ì€ ëŒ€ë¬¸ìë¡œ ì •ì˜í•˜ê³ , ë‚´ìš©ì€ '**ëª¨ë“ˆì´ë¦„**/ì•¡ì…˜ì´ë¦„'ì˜ í˜•íƒœë¡œ ì‘ì„±í•¨.
-> ë‹¤ë¥¸ ëª¨ë“ˆê³¼ ì•¡ì…˜ì´ë¦„ì´ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡.

- ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ëŠ” `export`í•´ì¤Œ. 



#### 2) initialState + reducer ìƒì„±
``` js
const INCREASE = 'counter/INCREASE';
const DECREASE = 'counter/DECREASE';


export const increase = () => ({ type: INCREASE });
export const decrease = () => ({ type: DECREASE });

// ğŸ”» ì¶”ê°€ëœ ë¶€ë¶„
const initialState = {
    number: 0
};

const counter = (state = initialState, action) => {
    switch (action.type) {
        case INCREASE:
            return {
                number: state.number + 1
            };
        case DECREASE:
            return {
                number: state.number - 1
            };
        default:
            return state;
    }
}

export default counter;
```
- initialState ê°’ì„ ì„¤ì •í•´ì¤€ í›„, 
- reducer í•¨ìˆ˜ë¥¼ ìƒì„±. (í•¨ìˆ˜ëª…ì€ êµ¬ë¶„ì„ ìœ„í•´ 'counter'ë¡œ í•¨.)
-> `export default` í‚¤ì›Œë“œë¡œ í•¨ìˆ˜ë¥¼ exportí•¨.

>  #### âœ… export vs. export default
- exportëŠ” ì—¬ëŸ¬ê°œë¥¼ ë‚´ë³´ë‚¼ ìˆ˜ ìˆì§€ë§Œ
- export defaultëŠ” í•œê°œë§Œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŒ.
- **importì‹œ**ì—ëŠ” `import counter`ë¡œ í•œë²ˆì— ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê³ ,
increase, decreaseëŠ” `import {increase, decrease}`ë¡œ ë¶ˆëŸ¬ì™€ì•¼í•¨.


<br>

### todos ëª¨ë“ˆ ì‘ì„±

#### 1) ì•¡ì…˜ íƒ€ì… + ìƒì„± í•¨ìˆ˜

``` js
const CHANGE_INPUT = 'todos/CHANGE_INPUT';
const INSERT = 'todos/INSERT';
const TOGGLE = 'todos/TOGGLE';
const REMOVE = 'todos/REMOVE';

export const changeInput = input => ({
    type: CHANGE_INPUT,
    input
});

let id = 3;

export const insert = text => ({
    type: INSERT,
    todo: {
        id: id++,
        text,
        done: false
    }
});

export const toggle = id => ({
    type: TOGGLE,
    id
});

export const remove = id => ({
    type: REMOVE,
    id
})
```
idëŠ” ì „ì—­ë³€ìˆ˜ idë¡œ ê´€ë¦¬í•´ì„œ todoì˜ idë¡œ ì‚¬ìš©í•˜ë„ë¡ í•¨.
-> insert í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œ ë§ˆë‹¤ 1ì”© ì¦ê°€í•˜ë„ë¡. (id++)

#### 2) initialState + reducer ìƒì„±

``` js
const CHANGE_INPUT = 'todos/CHANGE_INPUT';
const INSERT = 'todos/INSERT';
const TOGGLE = 'todos/TOGGLE';
const REMOVE = 'todos/REMOVE';

export const changeInput = input => ({
    type: CHANGE_INPUT,
    input
});

let id = 3;

export const insert = text => ({
    type: INSERT,
    todo: {
        id: id++,
        text,
        done: false
    }
});

export const toggle = id => ({
    type: TOGGLE,
    id
});

export const remove = id => ({
    type: REMOVE,
    id
});

// ğŸ”» ì¶”ê°€í•œ ë¶€ë¶„
const initialState = {
    input: '',
    todos: [
        {
            id: 1,
            text: 'ë¦¬ë•ìŠ¤ ê¸°ì´ˆ ë°°ìš°ê¸°',
            done: true
        },
        {
            id: 2,
            text: 'ë¦¬ì•¡íŠ¸ì™€ ë¦¬ë•ìŠ¤ ì‚¬ìš©í•˜ê¸°',
            done: false
        },
    ]
};

const todos = (state = initialState, action) => {
    switch (action.type) {
        case CHANGE_INPUT:
            return {
                ...state,
                input: action.input
            };
        case INSERT:
            return {
                ...state,
                todos: state.todos.concat(action.todo)
            };
        case TOGGLE:
            return {
                ...state,
                todos: state.todos.map(todo =>
                    todo.id === action.id ? { ...todo, done: !todo.done } : todo
                )
            };
        case REMOVE:
            return {
                ...state,
                todos: state.todos.filter(todo => todo.id !== action.id)
            };
        default:
            return state;
    }
}
    
export default todos;
```
<br>

### ë£¨íŠ¸ ë¦¬ë“€ì„œ ìƒì„±

modules/index.js
``` js
import { combineReducers } from "redux";
import counter from "./counter";
import todos from "./todos";

const rootReducer = combineReducers({
    counter,
    todos,
});

export default rootReducer;
```
> redux ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `combineReducers`í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë‘ê°œì˜ ëª¨ë“ˆì„ í•©ì¹¨.
-> `createStore`ì„ í†µí•´ **ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ ë•Œ** í•˜ë‚˜ì˜ ë¦¬ë“€ì„œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ê¸° ë•Œë¬¸.

<br>

### ë¦¬ì•¡íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ë¦¬ë•ìŠ¤ ì ìš©

- redux ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ createStore() í•¨ìˆ˜ë¥¼ ì„í¬íŠ¸í•¨.

src/index.js
``` jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { createStore } from 'redux';
import App from './App';
import './index.css'
import rootReducer from './modules';

const store = createStore(rootReducer);

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
    <App />
);
```

> â—ï¸ **ë£¨íŠ¸ ë¦¬ë“€ì„œ**ì˜ íŒŒì¼ëª…ì„ `index.js`ë¡œ í•´ì£¼ë©´, importì‹œ í´ë”ëª…ê¹Œì§€ë§Œ ì ì–´ë„ ëœë‹¤!
``` js
import rootReducer from './modules';
```

<br>

### Provider ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

- `react-redux`ì˜ Provider ì»´í¬ë„ŒíŠ¸ë¥¼ ì„í¬íŠ¸í•¨.
- Provider ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ì‹œ `store`ì„ **propsë¡œ ì „ë‹¬**í•´ì£¼ì–´ì•¼ í•¨.

``` js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { createStore } from 'redux';
import { Provider } from 'react-redux';
import App from './App';
import './index.css'
import rootReducer from './modules';

const store = createStore(rootReducer);

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

> ğŸ™‹â€â™€ï¸ ì°¸ê³  - ì´ì œëŠ” createStore() ì´ ì•„ë‹Œ **react-redux**ì˜ `configureStore({})` ì„ ì´ìš©í•˜ì.


<br>


### Redux DevTool

- í¬ë¡¬ í™•ì¥í”„ë¡œê·¸ë¨ Redux DevToolë¡œ ì„¤ì¹˜í•œ í›„,
ì•„ë˜ì™€ ê°™ì´ ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ ì ìš© ê°€ëŠ¥.

``` js
const store = createStore(
  rootReducer, /* preloadedState */
  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
);
```

- ìœ„ ì½”ë“œë¥¼ ì ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©´ í›¨ì”¬ ê°„í¸í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥.

#### ğŸ›  redux-devtools-extension ì„¤ì¹˜
```bash
$ yarn add redux-devtools-extension
```


src/index.js
``` js
import React from 'react';
import ReactDOM from 'react-dom/client';
import { createStore } from 'redux';
import { Provider } from 'react-redux';
import { composeWithDevTools } from 'redux-devtools-extension';
import App from './App';
import './index.css'
import rootReducer from './modules';

const store = createStore(rootReducer, composeWithDevTools);

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

- Redux DevToolì˜ 'state'íƒ­ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¨ë‹¤.
![](https://velog.velcdn.com/images/thisisyjin/post/f0d7abe4-bcfa-4c1f-95bf-9ee790f33f7d/image.png)

ğŸ”» ì°¸ê³ ë¡œ, ì´ë ‡ê²Œ ì°¨íŠ¸í˜• or Raw(ê°ì²´í˜•ì‹)ìœ¼ë¡œë„ ë³¼ ìˆ˜ ìˆë‹¤.
![](https://velog.velcdn.com/images/thisisyjin/post/a5db4a8b-cba6-4893-aa8d-cc70e67318a3/image.png)

***

## ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ ìƒì„±

- ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ì— ì ‘ê·¼í•˜ì—¬ ì›í•˜ëŠ” ìƒíƒœë¥¼ ë°›ì•„ì˜¤ê³ , ì•¡ì…˜ë„ ë””ìŠ¤íŒ¨ì¹˜í•´ì¤Œ.
- ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ì™€ ì—°ë™ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ `ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸`ë¼ê³  í•œë‹¤.

### 1) CounterContainer ìƒì„±

src/containers/CounterContainer.js
``` jsx
import Counter from "../components/Counter";

const CounterContainer = () => {
    return <Counter />;
};

export default CounterContainer; 
```

ìœ„ CounterContainer ì»´í¬ë„ŒíŠ¸ë¥¼ **ë¦¬ë•ìŠ¤ì™€ ì—°ë™**í•˜ê¸° ìœ„í•´ì„œëŠ” **react-redux ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `connect`í•¨ìˆ˜**ë¥¼ ì´ìš©í•´ì•¼í•¨.

ex> 
```js
connect(mapStateToProps, mapDispatchToPRops)(CounterContainer);
```

### connect(mapStateToProps, mapDispatchToProps)()

CounterContainer.js (ìˆ˜ì •)

``` jsx
import Counter from "../components/Counter";
import { connect } from "react-redux";

const CounterContainer = ({ number, increase, decrease }) => {
    return (
        <Counter number={number} onIncrease={increase} onDecrease={decrease} />
    );
};

const mapStateToProps = state => ({
    number: state.counter.number,
});

const mapDispatchToProps = dispatch => ({
    increase: () => {
        console.log('increase');
    },
    decrease: () => {
        console.log('decrease');
    },
});

export default connect(mapStateToProps, mapDispatchToProps)(CounterContainer);
```
mapStateToPropsì™€ mapDispatchToPropsì—ì„œ ë¦¬í„´í•˜ëŠ” ê°ì²´ ë‚´ë¶€ì˜ ê°’ì€ ì»´í¬ë„ŒíŠ¸ì˜ propsë¡œ ì „ë‹¬ë¨.
- mapStateToProps : stateë¥¼ ì¸ìë¡œ ë°›ì•„ì˜´. = í˜„ì¬ storeê°€ ì§€ë‹ˆê³  ìˆëŠ” ê°’.
- mapDispatchToProps : `store.dispatch()` í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜´.


### App - Container ë Œë”ë§ 

App.js (ìˆ˜ì •)
``` jsx
import CounterContainer from "./containers/CounterContainer";
import Todos from "./components/Todos";

function App() {
  return (
    <div>
      <CounterContainer />
      <hr />
      <Todos />
    </div>
  );
}

export default App;
```
-> Counter ëŒ€ì‹  CounterContainer ì»´í¬ë„ŒíŠ¸ ë Œë”ë§.


### increase, decrease ê¸°ëŠ¥ êµ¬í˜„

CounterContainer.js
``` jsx
import Counter from "../components/Counter";
import { connect } from "react-redux";
import { increase, decrease } from "../modules/counter";

...

const mapDispatchToProps = dispatch => ({
    increase: () => {
        dispatch(increase());
    },
    decrease: () => {
        dispatch(decrease());
    },
});

export default connect(mapStateToProps, mapDispatchToProps)(CounterContainer);
```

ì´ì œ +1, -1 ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì¹´ìš´í„°ê°€ ë³€ê²½ëœë‹¤.
Redux DevToolì„ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì•¡ì…˜ëª…ì´ ë‚˜ì˜¨ë‹¤.
![](https://velog.velcdn.com/images/thisisyjin/post/1a47def9-dba7-42b0-8fb7-8bad09923393/image.png)


> - `connect` í•¨ìˆ˜ ì‚¬ìš©ì‹œ, ì¼ë°˜ì ìœ¼ë¡œ ìœ„ì™€ ê°™ì´ mapStateToProps, mapDispatchToPropsë¥¼ ë¯¸ë¦¬ ì •ì˜í•´ë†“ê³  ì‚¬ìš©í•œë‹¤.
- `connect` ì•ˆì— ìµëª…í•¨ìˆ˜ í˜•ì‹ìœ¼ë¡œ ì„ ì–¸í•´ë„ ê´œì°®ë‹¤.

``` jsx
export default connect(state => ({
    number: state.counter.number,
}), dispatch => ({
    increase: () => dispatch(increase()),
    decrease: () => dispatch(decrease()),
})
)(CounterContainer);
```


### bindActionCreator

- ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•¡ì…˜ì„ dispatchë¡œ ê°ì‹¸ëŠ” ì‘ì—…ì´ ë²ˆê±°ë¡œì›€.
ì•¡ì…˜ ìƒì„± í•¨ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë” ë²ˆê±°ë¡œì›Œì§.

- redux ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ìœ í‹¸í•¨ìˆ˜ì¸ `bindActionCreator`ì„ ì‚¬ìš©í•´ì£¼ë©´ ë¨.

CreateContainer.js
``` jsx
...
export default connect(state => ({
    number: state.counter.number,
}),
    dispatch =>
        bindActionCreators(
            {
                increase,
                decrease,
            },
            dispatch,
        )
)(CounterContainer);
```
dispatch => `bindActionCreators({increase,decrease}, dispatch})()` í•´ì¤Œ.
-> ë”°ë¡œ Actionì„ ë¶ˆëŸ¬ì˜¤ê³  dispatchë¡œ ê°ì‹¸ì¤„ í•„ìš”ê°€ ì—†ì–´ì§.


### mapDispatchToProps - ì‰¬ìš´ ë°©ë²•
- `mapDispatchToProps()`ì˜ ì¸ìì— ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ ê°ì²´ë¥¼ ë„£ì–´ì¤Œ.
-> ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¥¼ ìš”ì†Œë¡œ ê°–ëŠ” ê°ì²´.

``` jsx
...
export default connect(state => ({
    number: state.counter.number,
}),
{
    increase, decrease
}
)(CounterContainer);
```

<br>

### 2) TodosContainer ìƒì„±

- connect í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ê³ , mapDispatchToPropsë¥¼ í•¨ìˆ˜ê°€ ë‹´ê¸´ ê°ì²´ë¡œ ë‚˜íƒ€ëƒ„

``` jsx
import { connect } from "react-redux";
import { changeInput, insert, toggle, remove } from "../modules/todos";
import Todos from "../components/Todos";

const TodoContainer = ({ input, todos, changeInput, insert, toggle, remove }) => {

    return (
        <Todos
            input={input}
            todos={todos}
            onChangeInput={changeInput}
            onInsert={insert}
            onToggle={toggle}
            onRemove={remove}
        />
    );
};

export default connect(
    // state.todos ê°€ì ¸ì˜´
    ({ todos }) => ({
        input: todos.input,
        todos: todos.todos,
    }),
    {
        changeInput,
        insert,
        toggle,
        remove
    },
)(TodoContainer);
```

ì•„ê¹Œ connectì˜ ë‘ë²ˆì§¸ ì¸ìì¸ `mapDispatchToProps`í•¨ìˆ˜ì˜ ì¸ìë¡œ stateê°€ ê°”ì—ˆëŠ”ë°,
ì´ í•¨ìˆ˜ëŠ” stateë¥¼(=storeê°€ ê°€ì§€ê³  ìˆëŠ” ê°’) ì¸ìë¡œ ê°€ì§.
ì—¬ê¸°ì„œë„ ë§ˆì°¬ê°€ì§€ë¡œ stateë¥¼ ê°€ì§€ì§€ë§Œ, state.todosë¥¼ {todos}ë¡œ êµ¬ì¡°ë¶„í•´ í• ë‹¹í•´ì¤Œ.


### App - Container ë Œë”ë§

``` jsx
import CounterContainer from "./containers/CounterContainer";
import TodosContainer from "./containers/TodosContainer";

function App() {
  return (
    <div>
      <CounterContainer />
      <hr />
      <TodosContainer />
    </div>
  );
}

export default App;

```

### Todos.js - props ì‚¬ìš©
components/Todos.js

``` jsx
const TodoItem = ({ todo, onToggle, onRemove }) => {
    return (
        <div>
            <input
                type="checkbox"
                onClick={() => onToggle(todo.id)}
                checked={todo.done}
                readOnly={true}
            />
            <span style={{ textDecoration: todo.done ? 'line-through' : 'none' }}>
                {todo.text}
            </span>
            <button onClick={() => onRemove(todo.id)}>ì‚­ì œ</button>
        </div>
    );
};

const Todos = ({
    input,
    todos,
    onChangeInput,
    onInsert,
    onToggle,
    onRemove
}) => {
    const onSubmit = e => {
        e.preventDefalt();
        onInsert(input);
        onChangeInput('');
    };
    const onChange = e => onChangeInput(e.target.value);

    return (
        <div>
            <form onSubmit={onSubmit}>
                <input value={input} onChange={onChange} />
                <button type="submit">ë“±ë¡</button>
            </form>
            <div>
                {todos.map(todo => (
                    <TodoItem
                        todo={todo}
                        key={todo.id}
                        onToggle={onToggle}
                        onRemove={onRemove}
                    />
                ))}
            </div>
        </div>
    );
};

export default Todos;
```

### RESULT

![](https://velog.velcdn.com/images/thisisyjin/post/8202cfab-7c18-479a-9735-be7258e2a501/image.gif)
