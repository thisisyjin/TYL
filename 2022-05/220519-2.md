# Blogrow Project

> ğŸ“ DAY 02 - 220519 (2)
- í—¤ë” ì»´í¬ë„ŒíŠ¸ ìƒì„±
- ë¡œê·¸ì¸ ìœ ì§€
- ë¡œê·¸ì•„ì›ƒ


## í—¤ë” ì»´í¬ë„ŒíŠ¸

- í—¤ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ì „ì—, ë°˜ì‘í˜• ë””ìì¸ì„ ìœ„í•œ `Responsive` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±.


### Responsive ì»´í¬ë„ŒíŠ¸
components/common/Responsive.js

``` jsx
import styled from 'styled-components';

const ResponsiveBlock = styled.div`
  padding-left: 1rem;
  padding-right: 1rem;
  width: 1024px;
  margin: 0 auto;

  @media screen and (max-width: 1024px) {
    width: 768px;
  }
  @media screen and (max-width: 768px) {
    width: 100%;
  }
`;

const Responsive = ({ children, ...rest }) => {
  return <ResponsiveBlock {...rest}>{children}</ResponsiveBlock>;
};

export default Responsive;

```


### Header ì»´í¬ë„ŒíŠ¸

components/common/Header.js ìƒì„±

``` jsx
import styled from 'styled-components';
import Responsive from './Responsive';
import Button from './Button';

const HeaderBlock = styled.div`
  position: fixed;
  width: 100%;
  background: #fff;
  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);
`;

const Wrapper = styled(Responsive)`
  height: 4rem;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .logo {
    font-size: 1.2rem;
    font-weight: 800;
    letter-spacing: 0.1em;
  }

  .right {
    display: flex;
    align-items: center;
  }
`;

// í—¤ë” ë†’ì´ë§Œí¼ ì½˜í…ì¸ ë¥¼ ë‚´ë ¤ì•¼í•¨. (position: fixedì´ë¯€ë¡œ)
const Spacer = styled.div`
  height: 4rem;
`;

const Header = () => {
  return (
    <>
      <HeaderBlock>
        <Wrapper>
          <div className="logo">BLOGROW</div>
          <div className="right">
            <Button>ë¡œê·¸ì¸</Button>
          </div>
        </Wrapper>
      </HeaderBlock>
      <Spacer />
    </>
  );
};

export default Header;
```

position: fixedë¡œ í—¤ë”ë¥¼ ê³ ì •ì‹œí‚´.
-> ì»¨í…ì¸  ë¶€ë¶„ì„ í—¤ë” ë†’ì´ë§Œí¼ ë‚´ë ¤ì¤˜ì•¼ í•¨.
-> height: 4remì¸ divë¥¼ ë§Œë“¤ì–´ì„œ ë¼ì›Œë„£ê¸°.


![](https://velog.velcdn.com/images/thisisyjin/post/f4fadfda-5ea8-4ae1-a129-7fd5cb44240b/image.png)


ì´ì œ ì—¬ê¸°ì—ì„œ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ì‹œ `/login` ê²½ë¡œë¡œ ì´ë™í•´ì•¼ í•¨.
-> ì›ë˜ëŒ€ë¡œë¼ë©´ Link ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ë©´ ë¨.


> ë°©ë²• 1. Button ì»´í¬ë„ŒíŠ¸ì—ì„œ `withRouter` ì‚¬ìš©.
- react-router-domì˜ withRouter í•¨ìˆ˜ ì‚¬ìš©.

-> í˜„ì¬ react-router-dom v6ë¡œ ê°€ë©´ì„œ `withRouter`ê°€ ì—†ì–´ì§.

ëŒ€ì‹ í•´ì„œ withLocationì„ ë§Œë“¤ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥.
``` jsx
import { useLocation } from "react-router-dom";

const withLocation = Component => props => {
    const location = useLocation();
  
    return <Component {...props} location={location} />;
  };

export default withLocation( MyComponent)
```

<br>

> ë°©ë²• 2. Link ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•¨.
-> `styled(Link)`ë¡œ ìŠ¤íƒ€ì¼ë§ ë˜‘ê°™ì´ í•´ì£¼ê¸°.

components/common/Button.js ìˆ˜ì •

``` jsx
import styled, { css } from 'styled-components';
import { Link } from 'react-router-dom';
import palette from '../../lib/styles/palette';

const buttonStyle = css`
  border: none;
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 700;
  padding: 0.5rem 1rem;
  color: #fff;
  outline: none;
  cursor: pointer;

  background: ${palette.gray[8]};
  &:hover {
    background: ${palette.gray[6]};
  }

  ${(props) =>
    props.fullWidth &&
    css`
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
      width: 100%;
      font-size: 1.2rem;
    `}

  ${(props) =>
    props.teal &&
    css`
      background: ${palette.teal[7]};
      &:hover {
        background: ${palette.teal[6]};
      }
    `}
`;

const StyledButton = styled.button`
  ${buttonStyle}
`;

const StyledLink = styled(Link)`
  ${buttonStyle}
`;

const Button = (props) => {
  return props.to ? (
    <StyledLink {...props} teal={props.teal ? 1 : 0} />
  ) : (
    <StyledButton {...props} />
  );
};

export default Button;

```

- css`` ì•ˆì— ìŠ¤íƒ€ì¼ì„ ì‘ì„±í•œ í›„ buttonStyleì´ë¼ ì €ì¥í•¨.
- StyledButtonì€ styled.button ì´ê³ 
StyledLinkëŠ” styled(Link)ë¡œ ì‘ì„±.

- ì‚¼í•­ì—°ì‚°ì -> Button ì»´í¬ë„ŒíŠ¸ì˜ propsë¡œ `to`ê°€ ì¡´ì¬í•˜ë©´ - `StyledLink`
/ ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ `StyledButton` ë Œë”ë§í•¨.

- ë§Œì•½ Buttonì˜ propsë¡œ 'teal'ì´ ìˆë‹¤ë©´ ì ìš©. (true,falseë¥¼ 1,0ìœ¼ë¡œ ì‘ì„±í•¨.)

> a íƒœê·¸ëŠ” boolean ê°’ì´ ì„ì˜ì˜ propsë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, 1ê³¼ 0ìœ¼ë¡œ êµ¬ë¶„í•´ì•¼ í•œë‹¤.


![](https://velog.velcdn.com/images/thisisyjin/post/c28042fe-e9bf-4fdd-a352-82e6c655b506/image.png)

ì˜ ì ìš©ë¨!

> âœ… ì°¸ê³ 
- ì›¹ ì ‘ê·¼ì„±ì„ ìœ„í•´ì„œë¼ë„ ë°©ë²• 2ì¸ `styled(Link)`ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•¨!

***

## ë¡œê·¸ì¸ ìƒíƒœ ë‚˜íƒ€ë‚´ê¸°

- ë¡œê·¸ì¸ ì„±ê³µì‹œ Header ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¡œê·¸ì¸ì¤‘ì¸ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ê³ , ìƒˆë¡œê³ ì¹¨ í•´ë„ ìœ ì§€ë˜ë„ë¡.



### Headerì— ë¦¬ë•ìŠ¤ ì—°ê²°
- ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•¨. (ìŠ¤í† ì–´ì™€ ì—°ê²°í•˜ê¸° ìœ„í•´)

container/common/HeaderContainer.js ìƒì„±.
``` jsx
import { useSelector } from 'react-redux';
import Header from '../../components/common/Header';

const HeaderContainer = () => {
  const { user } = useSelector(({ user }) => ({ user: user.user }));
  return <Header user={user} />;
};

export default HeaderContainer;
```


### Header ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

- ë¡œê·¸ì¸ ìƒíƒœì´ë©´ ê³„ì •ëª…(username)ì´ ë³´ì´ê²Œ í•˜ê³ ,
'ë¡œê·¸ì¸' ëŒ€ì‹  'ë¡œê·¸ì•„ì›ƒ'ì´ ë³´ì´ë„ë¡.

``` jsx
import styled from 'styled-components';
import Responsive from './Responsive';
import Button from './Button';
import palette from '../../lib/styles/palette';
import { Link } from 'react-router-dom';

const HeaderBlock = styled.div`
  position: fixed;
  width: 100%;
  background: #fff;
  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);
`;

const Wrapper = styled(Responsive)`
  height: 4rem;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .logo {
    font-size: 1.2rem;
    font-weight: 800;
    letter-spacing: 0.25em;
    cursor: pointer;

    &:hover {
      color: ${palette.teal[7]};
    }
  }

  .right {
    display: flex;
    align-items: center;
  }
`;

const Spacer = styled.div`
  height: 4rem;
`;

// ğŸ”» username ë‚˜íƒ€ë‚´ê²Œ
const UserInfo = styled.div`
  font-weight: 800;
  margin-right: 1rem;
`;

const Header = ({ user }) => {
  return (
    <>
      <HeaderBlock>
        <Wrapper>
          <Link to="/" className="logo">
            BLOGROW
          </Link>
          // ğŸ”» userì´ nullì¸ì§€ ì•„ë‹Œì§€ì•  ë”°ë¼ ë Œë”ë§ ë‹¤ë¥´ê²Œ
          {user ? (
            <div className="right">
              <UserInfo>{user.username}</UserInfo>
              <Button>ë¡œê·¸ì•„ì›ƒ</Button>
            </div>
          ) : (
            <div className="right">
              <Button to="/login" teal>
                ë¡œê·¸ì¸
              </Button>
            </div>
          )}
        </Wrapper>
      </HeaderBlock>
      <Spacer />
    </>
  );
};

export default Header;
```

### PostListPage ë Œë”ë§ ëŒ€ì²´

pages/PostListPage.js ìˆ˜ì •

- Header ëŒ€ì‹  HeaderContainerì„ ë Œë”ë§í•´ì¤Œ.
``` jsx
import HeaderContainer from '../containers/common/HeaderContainer';

const PostListPage = () => {
  return (
    <div>
      <HeaderContainer />
      <div>this is contents!</div>
    </div>
  );
};

export default PostListPage;

```

![](https://velog.velcdn.com/images/thisisyjin/post/01f87d97-94db-4f3d-9655-870170ecdfcf/image.png)

- ë¡œê·¸ì¸ì‹œ ìœ„ì™€ ê°™ì´ ê³„ì •ëª… + ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì´ ë‚˜ì˜¤ë©´ ì„±ê³µ!
- ê·¸ëŸ¬ë‚˜ ìƒˆë¡œê³ ì¹¨ì‹œ ë‹¤ì‹œ ìƒíƒœê°€ ì´ˆê¸°í™”ë¨.

ğŸ”» ì°¸ê³  - state (user.username)

![](https://velog.velcdn.com/images/thisisyjin/post/ae97ffba-2401-4951-8c29-b21cc062d391/image.png)


***

## ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€í•˜ê¸°

- ë¸Œë¼ìš°ì €ì˜ ë‚´ì¥ëœ ìŠ¤í† ë¦¬ì§€ì¸ `LocalStorage`ë¥¼ ì´ìš©í•´ë³´ì!

### Login ì»¨í…Œì´ë„ˆ ìˆ˜ì •

containers/auth/LoginForm.js ìˆ˜ì •
``` jsx
...
useEffect(() => {
    if (user) {
      navigate('/');
      // ğŸ”» localStorage.setItem
      try {
        localStorage.setItem('user', JSON.stringify(user));
      } catch (e) {
        console.log('local storage error');
      }
    }
  }, [navigate, user]);
```

> â” ì™œ `JSON.stringify`ë¥¼ í•´ì£¼ëŠ”ê°€?
- `JSON.stringify()` : ë°°ì—´ì´ë‚˜ ê°ì²´ ë“± ëª¨ë“ ê²ƒì„ ë‹¤ stringìœ¼ë¡œ ë°”ê¿”ì¤Œ.
user ê°ì²´ë¥¼ string í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•¨.
-> ë‚´ [ì´ì „ ë¸”ë¡œê·¸ ê¸€](https://mywebproject.tistory.com/159)ì„ ì°¸ì¡°! 

### Register ì»¨í…Œì´ë„ˆ ìˆ˜ì •

containers/auth/RegisterForm.js ìˆ˜ì •
``` jsx
  const navigate = useNavigate();
  useEffect(() => {
    if (user) {
      navigate('/'); // í™ˆìœ¼ë¡œ ì´ë™

      try {
        localStorage.setItem('user', JSON.stringify(user));
      } catch (e) {
        console.log('local storage error');
      }
    }
  }, [navigate, user]);
```

- LoginFormê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ê°™ì€ ì½”ë“œë¥¼ ë„£ì–´ì¤Œ.


ë¦¬ì•¡íŠ¸ ì•±ì´ ë§¨ ì²˜ìŒ ë Œë”ë§ ë ë•Œ localStorageì—ì„œ ê°’ì„ ë¶ˆëŸ¬ì™€ ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ ì•ˆì— ë„£ë„ë¡ êµ¬í˜„í•´ì¤˜ì•¼ í•¨.
->componenetDidMount ë˜ëŠ” useEffect()ë¡œ í•œë‹¤ë©°, ì²« ë Œë”ë§ ì§í›„ ì‹¤í–‰ë˜ë¯€ë¡œ ê¹œë¹¡ì„ í˜„ìƒì´ ë‚˜íƒ€ë‚¨

ë”°ë¼ì„œ, entry í´ë”ì¸ `index.js`ì—ì„œ ì²˜ë¦¬í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŒ.
-> index.js ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì²˜ë¦¬.
-> **user ëª¨ë“ˆ**ì˜ `tempsetUser` / `check` ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜´

### index.js ìˆ˜ì •
- ê¹œë¹¡ì„ í˜„ìƒì„ ì—†ì• ê¸° ìœ„í•´.
``` jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import { BrowserRouter } from 'react-router-dom';
import './index.css';
import { Provider } from 'react-redux';
import { createStore, applyMiddleware } from 'redux';
import { composeWithDevTools } from 'redux-devtools-extension';
import createSagaMiddleware from 'redux-saga';
import rootReducer, { rootSaga } from './modules';
import { tempSetUser, check } from './modules/user';

const sagaMiddleware = createSagaMiddleware();
const store = createStore(
  rootReducer,
  composeWithDevTools(applyMiddleware(sagaMiddleware)),
);

// ğŸ”» localStorageì— 'user'ê°€ ìˆìœ¼ë©´ tempSetUser, check ì•¡ì…˜ìƒì„±í•¨ìˆ˜ë¥¼ dispatch í•´ì£¼ëŠ” í•¨ìˆ˜. 
function loadUser() {
  try {
    const user = localStorage.getItem('user');
    if (!user) return; // ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ ì‹œ

    store.dispatch(tempSetUser(JSON.parse(user))); // ê°ì²´ë¡œ ë‹¤ì‹œ ë°”ê¾¼ í›„ payloadë¡œ ë„£ì–´ì¤Œ
    store.dispatch(check());
  } catch (e) {
    console.log('local storge error');
  }
}

sagaMiddleware.run(rootSaga);
// ğŸ”» í•¨ìˆ˜ í˜¸ì¶œ. (ë°˜ë“œì‹œ sagaMiddleware.run ì´í›„ì— í˜¸ì¶œí•´ì•¼ í•¨)
loadUser();

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <Provider store={store}>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </Provider>,
);

```

loadUser í•¨ìˆ˜ëŠ” ë°˜ë“œì‹œ sagaMiddleware.run() ì´í›„ì— í˜¸ì¶œí•´ì•¼ í•œë‹¤.
-> ë¨¼ì € í˜¸ì¶œì‹œ, CHECK ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜ì‹œ sagaì—ì„œ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸.


> #### âš¡ï¸ ê³¼ì •
- CHECK ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
- sagaë¥¼ í†µí•´ `client.get(/api/check)` -> axios API ìš”ì²­
- ë§Œì•½ check API í˜¸ì¶œ ì‹¤íŒ¨ì‹œ - user stateë¥¼ ì´ˆê¸°í™”í•˜ê³ , localStorageë„ ë¹„ì›Œì¤˜ì•¼ í•¨.



### ë¡œê·¸ì¸ ê²€ì¦ ì‹¤íŒ¨ì‹œ ì •ë³´ ì´ˆê¸°í™”

modules/user.js ìˆ˜ì •

``` js
...

// saga ìƒì„±
const checkSaga = createRequestSaga(CHECK, authAPI.check); //  request = client.get('/api/auth/check')

// ğŸ”»ê²€ì¦ ì‹¤íŒ¨ì‹œ ì •ë³´ ì´ˆê¸°í™”
function checkFailureSaga() {
  try {
    localStorage.removeItem('user');
  } catch (e) {
    console.log('local storage error');
  }
}

export function* userSaga() {
  yield takeLatest(CHECK, checkSaga);
  // ğŸ”» CHECK_FAILURE ì•¡ì…˜ì´ ë°œìƒí•  ì‹œ checkFailureSagaê°€ ì‹¤í–‰ë˜ë„ë¡.
  yield takeLatest(CHECK_FAILURE, checkFailureSaga);
} // userSagaë¥¼ rootSagaë¡œ í•©ì³ì¤Œ
```

> checkFailureSaga í•¨ìˆ˜ì—ì„œëŠ” yieldë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¼ë°˜ í•¨ìˆ˜ì´ë¯€ë¡œ, `function*` ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì§€ ì•Šì•„ë„ ë¨.

### test

#### ì¿ í‚¤ ì´ˆê¸°í™”

ê°œë°œìë„êµ¬ - Application íƒ­ì—ì„œ [ëª¨ë“  ì¿ í‚¤ ì‚­ì œ] ì•„ì´ì½˜ì„ ëˆŒëŸ¬ì£¼ë©´ ëœë‹¤.

![](https://velog.velcdn.com/images/thisisyjin/post/55f9a70a-1077-41bc-ad08-d7d344886abb/image.png)

-> ì¿ í‚¤ ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´, ë¡œê·¸ì¸ ìƒíƒœê°€ ì´ˆê¸°í™” ë˜ì–´ìˆë‹¤.


![](https://velog.velcdn.com/images/thisisyjin/post/d64eda91-ce8f-4cf6-9d78-cdd82d501a7c/image.png)


ì–´í”Œë¦¬ì¼€ì´ì…˜ íƒ­ì—ì„œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ë¥¼ ë³´ë©´ ì•„ë¬´ ê°’ë„ ì—†ì´ ë¹„ì–´ìˆë‹¤!



***

## ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ êµ¬í˜„

- 1. ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ (`auth ëª¨ë“ˆ`ì— logout í•¨ìˆ˜ ì¶”ê°€)
- 2. localStorage.removeItem í•´ì£¼ê¸°.

### ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜ ì¶”ê°€

lib/api/auth.js ìˆ˜ì •

``` js
// axios ìš”ì²­
import client from './client';

export const login = ({ username, password }) =>
  client.post('/api/auth/login', { username, password });
// Path, payload ë¥¼ ì¸ìë¡œ ë°›ìŒ.

export const register = ({ username, password }) =>
  client.post('/api/auth/register', { username, password });

export const check = () => client.get('/api/auth/check');

// ğŸ”» logout í•¨ìˆ˜ ì¶”ê°€
export const logout = () => client.post('/api/auth/logout');
```
<br>

### user ëª¨ë“ˆ ìˆ˜ì •

- `LOGOUT` ì´ë¼ëŠ” ì•¡ì…˜ ìƒì„±.
-> ë””ìŠ¤íŒ¨ì¹˜ë˜ë©´ **API í˜¸ì¶œ** í›„ **localStorage.removeItem()** í•´ì£¼ê¸°.

modules/user.js
``` js
import { createAction, handleActions } from 'redux-actions';
import { takeLatest, call } from 'redux-saga/effects';
import * as authAPI from '../lib/api/auth';
import createRequestSaga, {
  createRequestActionTypes,
} from '../lib/createRequestSaga';

const TEMP_SET_USER = 'user/TEMP_SET_USER';
const [CHECK, CHECK_SUCCESS, CHECK_FAILURE] =
  createRequestActionTypes('user/CHECK');
const LOGOUT = 'user/LOGOUT';

export const tempSetUser = createAction(TEMP_SET_USER, (user) => user);
export const check = createAction(CHECK);
export const logout = createAction(LOGOUT);

// saga ìƒì„±
const checkSaga = createRequestSaga(CHECK, authAPI.check); //  request = client.get('/api/auth/check')

// ê²€ì¦ ì‹¤íŒ¨ì‹œ ì •ë³´ ì´ˆê¸°í™”
function checkFailureSaga() {
  try {
    localStorage.removeItem('user');
  } catch (e) {
    console.log('local storage error');
  }
}

// ğŸ”» ì‚¬ê°€ ìƒì„±. (API í˜¸ì¶œì´ë¯€ë¡œ, yield í•„ìš”)
function* logoutSaga() {
  try {
    yield call(authAPI.logout); // logoutAPI í˜¸ì¶œ
    localStorage.removeItem('user');
  } catch (e) {
    console.log(e);
  }
}

export function* userSaga() {
  yield takeLatest(CHECK, checkSaga);
  yield takeLatest(CHECK_FAILURE, checkFailureSaga);
  // ğŸ”» LOGOUT ë””ìŠ¤íŒ¨ì¹˜ì‹œ logoutSaga í•¨ìˆ˜ ì‹¤í–‰
  yield takeLatest(LOGOUT, logoutSaga);
} // userSagaë¥¼ rootSagaë¡œ í•©ì³ì¤Œ

const initialState = {
  user: null,
  checkError: null,
};

export default handleActions(
  {
    [TEMP_SET_USER]: (state, { payload: user }) => ({
      ...state,
      user,
    }),
    [CHECK_SUCCESS]: (state, { payload: user }) => ({
      ...state,
      user,
      checkError: null,
    }),
    [CHECK_FAILURE]: (state, { payload: error }) => ({
      ...state,
      user: null,
      checkError: error,
    }),
    // ğŸ”» state.userë„ ì§€ì›Œì¤Œ
    [LOGOUT]: (state) => ({
      ...state,
      user: null,
    }),
  },
  initialState,
);

```

- redux-sagaì˜ `call` í•¨ìˆ˜ ì´ìš© (call = ì²«ì¸ìì— ë‘ë²ˆì§¸ ì¸ìë¥¼ ì „ë‹¬í•˜ì—¬ í˜¸ì¶œ)
-> API í˜¸ì¶œì‹œ `yield call(apiëª…)`


> âœ… ì°¸ê³  - call()ê³¼ put()ì˜ ì°¨ì´
1. call = API ìš”ì²­ ë“± 
`yield call(request, action.payload)` // requestì— action.payloadë¥¼ ì „ë‹¬í•˜ì—¬ í˜¸ì¶œ
`yield call(API.logout)` // logout API í˜¸ì¶œ
>
2. put = ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
`yield put(startLoading(type))` // ì•¡ì…˜ìƒì„±í•¨ìˆ˜(í˜ì´ë¡œë“œ) ê°€ ì¸ìë¡œ ë“¤ì–´ê°.
`yield put({
        type: SUCCESS,
        payload: response.data,
      })` // í˜ì´ë¡œë“œ(ê°ì²´)ë§Œ ì ì–´ì¤Œ 
     
     
<br>

### onLogout í•¨ìˆ˜ ì „ë‹¬

containers/common/HeaderContainer.js ìˆ˜ì •

- ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ì—ì„œ onLogout ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ Headerì˜ propsë¡œ ì „ë‹¬í•´ì¤Œ.
``` jsx
import { useDispatch, useSelector } from 'react-redux';
import Header from '../../components/common/Header';
import { logout } from '../../modules/user';

const HeaderContainer = () => {
  const { user } = useSelector(({ user }) => ({ user: user.user })); // null ë˜ëŠ” usernameì´ ì „ë‹¬ë¨
  const dispatch = useDispatch();

  const onLogout = () => {
    dispatch(logout());
  };
  return <Header user={user} onLogout={onLogout} />;
};

export default HeaderContainer;

```

<br>

### Header ì»´í¬ë„ŒíŠ¸

propsë¡œ ë°›ì•„ì˜¨ onLogoutí•¨ìˆ˜ë¥¼ onClickì— ì—°ê²°ì‹œí‚´.

``` jsx
...

const Header = ({ user, onLogout }) => {
  return (
    <>
      <HeaderBlock>
        <Wrapper>
          <Link to="/" className="logo">
            BLOGROW
          </Link>
          {user ? (
            <div className="right">
              <UserInfo>{user.username}</UserInfo>
              <Button onClick={onLogout}>ë¡œê·¸ì•„ì›ƒ</Button>
            </div>
          ) : (
            <div className="right">
              <Button to="/login" teal>
                ë¡œê·¸ì¸
              </Button>
            </div>
          )}
        </Wrapper>
      </HeaderBlock>
      <Spacer />
    </>
  );
};

export default Header;

```
