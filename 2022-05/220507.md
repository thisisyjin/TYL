# React.js

**Today I Learned ... **`react.js`

>ðŸ™‹â€â™‚ï¸ [**Reference Lecture*](https://nomadcoders.co/react-hooks-introduction)

>ðŸ™‹â€ [**My Dev Blog**](https://mywebproject.tistory.com/)

***

> ** React Hooks ê°•ì˜ **


# Hooks

## useEffect

### useHover ìƒì„±
-> ì§€ë‚œë²ˆì— ë§Œë“¤ì—ˆë˜ useClickì—ì„œ ì´ë²¤íŠ¸ë§Œ mouseenterë¡œ ë°”ê¿”ì¤€ ê²ƒ.
``` jsx
import { useEffect } from "react";

const useHover = (onHover) => {
  const element = useRef();
  useEffect(() => {
    if (typeof onHover !== 'function') {
      return;
    }
    if (element.current) {
      element.current.addEventListener("mouseenter", onHover);
    }
    return () => {
      if (element.current) {
      element.current.removeEventListener("mouseenter", onHover)
      }};
  }, [onHover]); 
  return element;
};

export default useHover;
```

***

## í•¨ìˆ˜í˜• í”„ë¡œê·¸ëž˜ë°

### useConfirm
- ì‚¬ìš©í•˜ìž í–‰ë™ì„ í•˜ê¸°ì „ì— confirm ì°½ì„ ë„ì›Œì„œ í™•ì¸í•˜ëŠ” ë™ìž‘.

``` jsx
const useConfirm = (message, callback) => {
  if (typeof callback !== "function") {
    return;
  }
  const confirmAction = () => {
    if (confirm(message)) { // í™•ì¸ ëˆ„ë¥´ë©´ ì½œë°± ì‹¤í–‰
      callback();
    }
  };
  return confirmAction;
};

const App = () => {
  const deleteWorld = () => console.log("delete world!");
  const confirmDelete = useConfirm("Are you sure?", deleteWorld);

  return (
    <div>
      <button onClick={confirmDelete}>delete the world</button>
    </div>
  );
};
```
confirm('message') í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í™•ì¸ì„ ëˆ„ë¥´ë©´ trueë¥¼ ë°˜í™˜í•¨.
-> ifë¬¸ì˜ ì¡°ê±´ì„ ì¶©ì¡±í•˜ì—¬ callbackì´ ì‹¤í–‰ë¨.


+) ì·¨ì†Œë¥¼ ëˆŒë €ì„ë•Œ ë¡œì§ë„ ì¶”ê°€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

``` jsx
const useConfirm = (message, onConfirm, onCancel) => {
  if (!onConfirm && typeof onConfirm !== "function") {
    return;
  }
  if (onCancel && typeof onCancel !== "function") {
    return;
  }
  const confirmAction = () => {
    if (window.confirm(message)) {
      // í™•ì¸ ëˆ„ë¥´ë©´ ì½œë°± ì‹¤í–‰
      onConfirm();
    } else {
      onCancel();
    }
  };
  return confirmAction;
};
```
-> useConfirmì˜ ì„¸ë²ˆì§¸ ì¸ìžë¡œ onCancelì„ ë„£ì–´ì¤Œ.
-> ê¸°ì¡´ callbackì€ êµ¬ë¶„ì„ ìœ„í•´ onConfirmìœ¼ë¡œ ë°”ê¿”ì¤Œ.



#### âœ… validation check

``` js
if (!onConfirm || typeof onConfirm !== "function") {
    return;
  }

if (onCancel && typeof onCancel !== "function") {
    return;
  }
```
- `onConfirm`ì€ ë°˜ë“œì‹œ ìžˆì–´ì•¼ í•˜ë¯€ë¡œ !onConfirmì´ë©´ returnë˜ê²Œ í•´ì•¼ í•˜ê³ ,
ë˜ëŠ” í•¨ìˆ˜ê°€ ì•„ë‹ˆë©´ returnë˜ê²Œ í•´ì•¼ í•œë‹¤.

- `onCancel`ì€ ë°˜ë“œì‹œ ìžˆì–´ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ ê·¸ëƒ¥ onCancelì´ í•¨ìˆ˜ì¸ì§€ë§Œ ê²€ì‚¬í•˜ë©´ ëœë‹¤.

***

### usePreventLeave

- window ê°ì²´ì˜ ì´ë²¤íŠ¸ì¸ `beforeunload` ë¥¼ ì´ìš©í•¨.


- e.preventDefault()ë¥¼ í•´ì„œ ì°½ ë‹«ê¸°ë¥¼ ë©ˆì¶”ê³ ,
- e.returnValue = "" ë¥¼ í•´ì¤Œ.
> ì°¸ê³  - returnValueëŠ” ê¶Œìž¥í•˜ì§€ X. (í¬ë¡¬ì—ì„œë§Œ ì§€ì›) - mdn 
![](https://velog.velcdn.com/images/thisisyjin/post/14e22164-46db-4b78-baf5-76cd1163d47e/image.png)


``` jsx
const usePreventLeave = () => {
  const listener = (e) => {
    e.preventDefault();
    e.returnValue = "";
  };
  const enablePrevent = () => {
    window.addEventListener("beforeunload", listener);
  };
  const disablePrevent = () => {
    window.removeEventListener("beforeunload", listener);
  };
  return { enablePrevent, disablePrevent };
};

const App = () => {
  const { enablePrevent, disablePrevent } = usePreventLeave();
  return (
    <div>
      <button onClick={enablePrevent}>protect</button>
      <button onClick={disablePrevent}>unprotect</button>
    </div>
  );
};
```

`protect` ë²„íŠ¼ì„ í´ë¦­í•˜ê³  ì°½ì„ ë‹«ìœ¼ë©´ ì•„ëž˜ì™€ ê°™ì€ ì°½ì´ ëœ¬ë‹¤.
![](https://velog.velcdn.com/images/thisisyjin/post/4b180da6-8169-4930-8b49-a36af4276d57/image.png)

***

### useBeforeLeave
- `useEffect` ì‚¬ìš©
- íƒ­ì„ ë‹«ì„ë•Œ ì‹¤í–‰ë˜ëŠ” function.
-> ë§ˆìš°ìŠ¤ê°€ íƒ­ì„ ë²—ì–´ë‚  ë•Œ ì´ë²¤íŠ¸ ë°œìƒ.

``` jsx
const useBeforeLeave = (onBefore) => {
  if (typeof onBefore !== "function") {
    return;
  }
  const handle = () => {
    onBefore();
  };

  useEffect(() => {
    document.addEventListener("mouseleave", handle);
    return () => document.removeEventListener("mouseleave", handle);
  }, []);
};

const App = () => {
  const begForLife = () => console.log("plz dont leave");
  useBeforeLeave(begForLife);

  return (
    <div>
      <h1>hello</h1>
    </div>
  );
};
```

![](https://velog.velcdn.com/images/thisisyjin/post/9f6e6616-2110-44a0-8401-0ee3c0ba3480/image.gif)

+) improveMent

-> 
mouseEventë¥¼ ì´ìš©í•˜ì—¬ ë§Žì€ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìžˆë‹¤.

![](https://velog.velcdn.com/images/thisisyjin/post/9472ee9a-2096-4eba-8034-181625eca896/image.png)

- ì´ì¤‘ì—ì„œ, `clientY`ë¥¼ ë³´ë©´ 0ë³´ë‹¤ ìž‘ì€ ê²½ìš°ì— (í™”ë©´ì„ ë‹«ê¸°ìœ„í•´ ìƒë‹¨ë°”ë¡œ ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë¯€ë¡œ)
í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•´ì£¼ìž.

> ì°¸ê³  - clientX, offsetX, screenXì˜ ì°¨ì´
- clientX: ì‚¬ìš©ìžì˜ ë¸Œë¼ìš°ì € í™”ë©´ ê¸°ì¤€
- offsetX: ì´ë²¤íŠ¸ ëŒ€ìƒ DOM ê°ì²´ ê¸°ì¤€ 
- screenX: ëª¨ë‹ˆí„° í™”ë©´ ê¸°ì¤€


``` jsx
const handle = (e) => {
    const { clientY } = e;
    if(clientY <= 0) onBefore();
  };
```
event.clientYê°€ 0ë³´ë‹¤ ìž‘ê±°ë‚˜ ê°™ì„ë•Œ,
(0ì¼ë•Œë„ í¬í•¨ë¨) -> onBeforeì„ ì‹¤í–‰í•¨.

> ì´ì œ ë§ˆìš°ìŠ¤ê°€ ì°½ì„ ë²—ì–´ë‚  ë•Œ (document.mouseleave), clientYê°€ 0 ì´í•˜ì¼ë•Œë§Œ onBefore í•¨ìˆ˜ê°€ ì‹¤í–‰ë¨.
(ê·¸ ì™¸ì˜ ê²½ìš°ì—ëŠ” ì „ë¶€ X)

#### ì „ì²´ ì½”ë“œ
``` jsx
const useBeforeLeave = (onBefore) => {
  if (typeof onBefore !== "function") {
    return;
  }

  const handle = (e) => {
    const { clientY } = e;
    if (clientY <= 0) onBefore();
  };

  useEffect(() => {
    document.addEventListener("mouseleave", handle);
    return () => document.removeEventListener("mouseleave", handle);
  }, []);
};

const App = () => {
  const begForLife = () => console.log("plz dont leave");
  useBeforeLeave(begForLife);

  return (
    <div>
      <h1>hello</h1>
    </div>
  );
};
```

***


### useFadeIn
- elementê°€ ìžë™ìœ¼ë¡œ ì„œì„œížˆ ë‚˜íƒ€ë‚˜ë„ë¡ í•¨.
- cssë¡œë„ ë§Œë“¤ ìˆ˜ ìžˆì§€ë§Œ,
**animation**ì„ hookì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìžˆëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ìž.


- useRef, useEffect ì‚¬ìš©.

``` jsx
const useFadeIn = (duration = 1, delay = 0) => {
  const element = useRef();

  if (typeof duration !== "number" || typeof delay !== "number") {
    return;
  }

  useEffect(() => {
    if (element.current) {
      const { current } = element;
      current.style.transition = `opacity ${duration}s ease-in ${delay}s`;
      current.style.opacity = 1;
    }
  }, []);
  return { ref: element, style: { opacity: 0 } };
};

const App = () => {
  const fadeInH1 = useFadeIn(2, 2);
  const fadeInP = useFadeIn(4, 6);
  return (
    <div>
      <h1 {...fadeInH1}>hello</h1>
      <p {...fadeInP}>lorem ipsum lalallala</p>
    </div>
  );
};
```

- ë§Œì•½ transition-timingë„ ì„¤ì •í•˜ê²Œ í•˜ë ¤ë©´,
ì„¸ë²ˆì§¸ ì¸ìžë¡œ ease-in, ease-out, ease-in-out ë“±ì„ ë°›ê²Œ í•´ì•¼í•¨.
-> ìœ íš¨ì„± ê²€ì‚¬ì‹œ ì–´ë–»ê²Œ í• ì§€.
``` js
if (!['ease', 'ease-in', 'ease-out', 'ease-in-out'].includes(timing)) return;

const fadeInSpan = useFadeIn(3, 5, 'ease-in'); // í†µê³¼

const fadeInDiv = useFadeIn(3, 5, 'easy'); // ê±¸ëŸ¬ì§. (íš¨ê³¼X)
```
-> ê¸°ë³¸ê°’ìœ¼ë¡œ easeë¥¼ ì£¼ëŠ”ê²Œ ì¢‹ì„ë“¯?
ì˜¤íƒ€ê°€ ë‚˜ë”ë¼ë„ easeê°€ ì ìš©ë˜ê²Œ í•˜ë ¤ë©´
-> elseì—ë‹¤ê°€ timing = 'ease' ëŒ€ìž…í•˜ë©´ ë¨.

***

### useNetwork

- **navigator.onLine**ì„ ì´ìš©í•¨.
- **window ê°ì²´**ì˜ ì´ë²¤íŠ¸ì¸ `online`ê³¼ `offline`ì„ ì´ìš©í•¨.

> #### `navigator.onLine` ì´ëž€?
- [mdn ë¬¸ì„œ](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/onLine) ì°¸ê³ .
- Returns the online status of the browser. The property returns a boolean value, 
- with `true` meaning online and `false` meaning offline. 

``` js
const useNetwork = (onChange) => {
  const [status, setStatus] = useState(navigator.onLine); // true ë˜ëŠ” false
  const handleChange = () => {
    if (typeof onChange === "function") {
      onChange(navigator.onLine);
    }
    setStatus(navigator.onLine);
  };

  useEffect(() => {
    window.addEventListener("online", handleChange);
    window.addEventListener("offline", handleChange);
    return () => {
      window.removeEventListener("online", handleChange);
      window.removeEventListener("offline", handleChange);
    };
  }, []);

  return status;
};

const App = () => {
  const handleNetworkChange = (online) => {
    console.log(online ? "online status" : "offline status");
  };

  const onLine = useNetwork(handleNetworkChange);

  return (
    <div>
      <h1>{onLine ? "Online!" : "Offline"}</h1>
    </div>
  );
};
```
1. 

![](https://velog.velcdn.com/images/thisisyjin/post/9935376e-60f4-4dd9-a0f6-4f5d36bcbf7d/image.png)

