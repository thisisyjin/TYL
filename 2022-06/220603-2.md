# Vue.js

**Today I Learned ... **`Vue.js`

>ğŸ™‹â€â™‚ï¸ [**Reference Book**](https://www.inflearn.com/course/vue-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EA%B8%B0)

***


> DAY 04 - 220603
-9. Composition API
-10. Proxy ì‚¬ìš©



## Composition API

 ### âœ… ì»´í¬ì§€ì…˜ API ë€?
> ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŠ¹ì • ê¸°ëŠ¥ì„ ê°–ëŠ” ì½”ë“œë¥¼ ìœ ì—°í•˜ê²Œ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ê²Œ í•˜ëŠ”
í•¨ìˆ˜ ê¸°ë°˜ API. 
-> **Vue 3** ë²„ì „ì˜ í•µì‹¬ ê¸°ëŠ¥ì„.


- VueëŠ” í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ (data, computed, watch, methods ë“±) or
ê³„ì¸µ êµ¬ì¡°ê°€ ë³µì¡í• ìˆ˜ë¡ ì½”ë“œ ì¶”ì  ë° ê´€ë¦¬ê°€ ì–´ë ¤ì› ìŒ.
-> ì»´í¬ì§€ì…˜ APIë¥¼ ì´ìš©í•˜ë©´ `Setup` ì´ë¼ëŠ” ë©”ì„œë“œ ë‚´ì—ì„œ í•œë©ì–´ë¦¬ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.


- íŠ¹ì • ê¸°ëŠ¥ì„ ê°–ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , APIì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê²ƒì„.
- ì½”ë“œ ì¬í™œìš©ì„± / ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì¶”ê°€ëœ ê¸°ëŠ¥.


> â—ï¸ Vue 2ì—ì„œëŠ” mixin(ë¯¹ìŠ¤ì¸)ì„ í†µí•´ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í–ˆì§€ë§Œ, ì˜¤ë²„ë¼ì´ë”© ë¬¸ì œ ë“±ìœ¼ë¡œ ê´€ë¦¬ê°€ ì–´ë ¤ì› ìŒ. 




### Setup

- ì»´í¬ì§€ì…˜ APIë¥¼ êµ¬í˜„í•˜ëŠ” ê³³.


ğŸ“ ì˜ˆì œ - ì‚¬ìš©ìë¡œë¶€í„° ìˆ«ì ë‘ê°œë¥¼ ì…ë ¥ë°›ê³ , ë‘˜ì„ ë”í•œ ê°’ì„ ì¶œë ¥í•˜ëŠ” ì½”ë“œ.

``` vue
<template>
  <div>
    <h2>Calculator</h2>
    <div>
      <input type="number" v-model="num1" @keyup="plusNumbers" />
      <span> + </span>
      <input type="number" v-model="num2" @keyup="plusNumbers" />
      <span> = </span>
      <span>{{ result }}</span>
    </div>
  </div>
</template>

<script>
export default {
  // eslint-disable-next-line vue/multi-word-component-names
  name: 'calculator',
  data() {
    return {
      num1: 0,
      num2: 0,
      result: 0,
    };
  },
  methods: {
    plusNumbers() {
      this.result = this.num1 + this.num2;
    },
  },
};
</script>
```
![](https://velog.velcdn.com/images/thisisyjin/post/746db1fa-c1fd-4766-bee1-3dbe6963037f/image.png)


-> keyup ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ë§ˆë‹¤ ë‘ ìˆ˜ë¥¼ ë”í•˜ì—¬ result ê°’ì„ ë°˜í™˜í•¨.

<br>

> ì»´í¬ì§€ì…˜ ver.

ìœ„ì™€ ë™ì¼í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì½”ë“œë¥¼  **ì»´í¬ì§€ì…˜ API**ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•˜ë©´


### 1) reactive

``` vue
<template>
  <div>
    <h2>Calculator</h2>
    <div>
      <input type="number" v-model="state.num1" @keyup="plusNumbers" />
      <span> + </span>
      <input type="number" v-model="state.num2" @keyup="plusNumbers" />
      <span> = </span>
      <span>{{ state.result }}</span>
    </div>
  </div>
</template>

<script>
import { reactive } from 'vue';
export default {
  // eslint-disable-next-line vue/multi-word-component-names
  name: 'calculator',
  setup() {
    let state = reactive({
      num1: 0,
      num2: 0,
      result: 0,
    });

    function plusNumbers() {
      state.result = state.num1 + state.num2;
    }

    return {
      state,
      plusNumbers,
    };
  },
};
</script>
```


####  reactive

``` js
import { reactive } from 'vue';
```
vueì˜ reactiveë¥¼ ì„í¬íŠ¸í•´ì„œ ì‹¤ì‹œê°„ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ ë°˜ì‘í˜• ì ìš©.



#### return { state, plusNumbers }

- setup ë‚´ì—ì„œ `let state = reactive({});`ì™€
`function plusNumbers(){}`ë¡œ ì„ ì–¸í•¨.

- state, plusNumbersë¥¼ ë°˜í™˜í•¨ìœ¼ë¡œì¨ 
ê¸°ì¡´ì— data, methods ì˜µì…˜ ì²˜ëŸ¼ í…œí”Œë¦¿ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ í•¨.



<br>

### 2) computed

``` js
import { reactive, computed } from 'vue'; // ğŸ‘ˆ computed ì„í¬íŠ¸

...

setup() {
    let state = reactive({
      num1: 0,
      num2: 0,
      result: computed(() => state.num1 + state.num2), // num1, num2 ë³€ê²½ì‹œ ì¦‰ì‹œ  ë”í•œ ê°’ì„ resultë¡œ ë°˜í™˜
    });

    return {
      state,
    };
  },
```

#### computed

- computed()ì•ˆì—ëŠ” ì½œë°±ì´ ë“¤ì–´ê°.
- ë‚´ë¶€ì— ë“¤ì–´ê°„ ê°’ì„ ê´€ì°°í•˜ê³ , ë¦¬í„´ê°’ì„ í•´ë‹¹ ë³€ìˆ˜ë¡œ ë°˜í™˜í•¨.


``` js
computed: {
  fullName() {
    return this.firstName + this.lastName;
  }
}
```
ğŸ”º ê¸°ì¡´ computed ì˜µì…˜ ì‚¬ìš©ë²•

ğŸ”» setup ë‚´ì—ì„œ ì‚¬ìš©ì‹œ (ì»´í¬ì§€ì…˜ API)

``` js
// setup ë‚´ì—ì„œ ì‚¬ìš©ì‹œ
fullName: computed(() => state.firstName + state.lastName)
```


<br>


### 3) toRefs

- í˜„ì¬ ì»´í¬ë„ŒíŠ¸ ë§ê³  **ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‚¬ìš©**í•  ìˆ˜ ìˆê²Œ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬.

``` vue 
<template>
  <div>
    <h2>Calculator</h2>
    <div>
      <input type="number" v-model="num1" />
      <span> + </span>
      <input type="number" v-model="num2" />
      <span> = </span>
      <span>{{ result }}</span>
    </div>
  </div>
</template>

<script>
import { reactive, computed, toRefs } from 'vue';
function plusCalculator() {
  let state = reactive({
    num1: 0,
    num2: 0,
    result: computed(() => state.num1 + state.num2),
  });

  return toRefs(state); // ì™¸ë¶€ ì»´í¬ë„ŒíŠ¸ì—ì„œ num1, num2, resultê°€ ì •ìƒ ë™ì‘í•˜ê²Œ í•´ì¤Œ
}
export default {
  // eslint-disable-next-line vue/multi-word-component-names
  name: 'calculator',
  setup() {
    let { num1, num2, result } = plusCalculator();
    return {
      num1,
      num2,
      result,
    };
  },
};
</script>
```


#### LifeCycle Hooks

ì»´í¬ì§€ì…˜ API ë‚´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¼ì´í”„ì‚¬ì´í´ í›….
> created / beforeMount / mounted / beforeUpdate / updated / beforeUnmount  unmounted  ë“±

setup() -> beforeCreateì™€ created ì‚¬ì´ì—ì„œ ì‹¤í–‰ë¨.



***

### Provide / Inject

- provideì™€ injectë¥¼ ë³„ë„ë¡œ ì„í¬íŠ¸ í•´ì•¼ ì‚¬ìš© ê°€ëŠ¥.
- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” provide í•¨ìˆ˜ë¥¼ í†µí•´ ì „ë‹¬í•  ê°’ì˜ Key-valueë¥¼ ì„¤ì •í•¨.

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸
``` vue
<template>
  <CompositionInject />
</template>

<script>
import { provide } from '@vue';

import CompositionInject from './CompositionInject';

export default {
  components: {
    CompositionInject,
  },
  setup() {
    provide('title', 'Vue.js í”„ë¡œì íŠ¸'); // provide í•¨ìˆ˜ : key-value ìŒìœ¼ë¡œ ì „ë‹¬í•  ê°’ ì„¤ì •
  },
};
</script>

```

<br>

ìì‹ ì»´í¬ë„ŒíŠ¸
``` vue
<template>
  <h1>{{ title }}</h1>
</template>

<script>
import { inject } from 'vue';
export default {
  setup() {
    const title = inject('title'); // keyê°’ìœ¼ë¡œ ê°€ì ¸ì˜´
    return { title };
  },
};
</script>
```


***

### Mixins

ìì£¼ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ ë“±ë¡í•´ë†“ê³ , ëª¨ë“ˆì„ import í•˜ë“¯ì´
Vueì—ì„œë„ mixinì„ í†µí•´ ê°€ëŠ¥í•¨.

> ë¯¹ìŠ¤ì¸ ì´ë€?
- ê¸°ëŠ¥ì€ ë”°ë¡œ êµ¬í˜„í•˜ê³ , í•„ìš”í•  ë•Œ ë§ˆë‹¤ ë¯¹ìŠ¤ì´ íŒŒì¼ì„ ì»´í¬ë„ŒíŠ¸ì— ê²°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•.



> ì˜ˆì œ - Mock ì„œë²„ì˜ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ë¯¹ìŠ¤ì¸.

### ë¯¹ìŠ¤ì¸ íŒŒì¼ ìƒì„±


src/api.js ìƒì„±
``` js
import axios from 'axios';

export default {
  methods: {
    async $callAPI(url, method, data) {
      return (
        await axios({
          method: method,
          url,
          data,
        }).catch((e) => {
          console.log(e);
        })
      ).data;
    },
  },
};

```

### ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¯¹ìŠ¤ì¸ ì‚¬ìš©

views/Mixins.vue ìƒì„±
``` vue
<script>
import ApiMixin from '../api.js';

export default {
  mixins: [ApiMixin],
  data() {
    return {
      personList: [],
    };
  },
  async mounted() {
    this.personList = await this.$callAPI(
      'https://5604e27b-c8b9-48b0-98a9-c4a272c9456b.mock.pstmn.io/list',
      'get'
    );
    console.log(this.personList);
  },
};
</script>
```

- ìœ„ì™€ ê°™ì´ mounted ê°™ì€ ë¼ì´í”„ì‚¬ì´í´ í›…ì„ async-awiatìœ¼ë¡œ ì‘ì„± ê°€ëŠ¥í•¨.
-> axios.getì€ ë¹„ë™ê¸°ì´ë¯€ë¡œ

- Mixinì—ì„œ methodsë¡œ ë“±ë¡í•œ í•¨ìˆ˜ë¥¼ this.$callAPIì™€ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥í•¨.


