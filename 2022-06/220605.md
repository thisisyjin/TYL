# Redux

> [ðŸ™‹â€â™‚ï¸ Ref Lecture](https://nomadcoders.co/)

- redux toolkit / react-redux


## Redux-toolkit


``` 
$ yarn add @reduxjs/toolkit
```

### createAction
- redux-actionsì˜ createActionê³¼ ë™ì¼.
``` js
const addTodo = createAction('ADD');
```

ðŸ”» ê¸°ì¡´ ì½”ë“œ

``` js
const ADD = "ADD";
const addTodo = text => {
  return {
    type: ADD,
    text
  }
}
```

<br>

### createReducer
- redux-actionsì˜ handleActionsë¥¼ ëŒ€ì²´.
- ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ë” ê°„ë‹¨í•˜ê²Œ ìž‘ì„± ê°€ëŠ¥/


``` js
const reducer = createReducer([], { // ì²«ë²ˆì§¸ ì¸ìž = initialState
  [addtodo]: (state, action) => {
    state.push( // ì…ëžµ );
   }
      ...
});
```

ðŸ”» ê¸°ì¡´ ì½”ë“œ (switchë¬¸)
``` js
const reducer = (state = [], action) => {
  switch (action.type) {
    case ADD:
      const addItem = [...state, { text: action.text, id: Date.now() }];
      localStorage.setItem('wishes', JSON.stringify(addItem));
      return addItem;
      ...
  }
```

<br>

### configureStore

reduxì˜ createStoreì˜ ì—…ê·¸ë ˆì´ë“œ ë²„ì „.
(ì´ì œ IDEì—ì„œë„ createStoreë§ê³  configureStoreë¥¼ ê¶Œìž¥í•¨)
-> redux-devtoolë„ ì§€ì›í•¨.

``` js
const store = configureStore({ reducer });
```

- reducerê°€ ì—¬ëŸ¬ê°œì—¬ë„ ê°ì²´ ì•ˆì— ë„£ì–´ì£¼ë©´ ë¨.

ðŸ”» ê¸°ì¡´ ì½”ë“œ
``` js
const store = createStore(reducer);
```
- ë¦¬ë“€ì„œ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ê°œë©´ rootReducerì„ ë§Œë“¤ì–´ì„œ ë„£ì–´ì¤˜ì•¼ í•¨.


> ðŸ“ ê³µì‹ ë¬¸ì„œ ì°¸ì¡°
- If it is an object of slice reducers, like {users : usersReducer, posts : postsReducer}, configureStore will automatically create the root reducer by passing this object to the Redux combineReducers utility.
-> ë§Œì•½ ê°ì²´ ì•ˆì— ë¦¬ë“€ì„œê°€ í•œê°œë©´ ê·¸ê²ƒì´ ìžë™ìœ¼ë¡œ ë£¨íŠ¸ë¦¬ë“€ì„œê°€ ë˜ê³ ,
ë¦¬ë“€ì„œê°€ ì—¬ëŸ¬ê°œë¼ë©´ configureStoreì´ **ìžë™ìœ¼ë¡œ ë£¨íŠ¸ ë¦¬ë“€ì„œë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©**í•¨.

![](https://velog.velcdn.com/images/thisisyjin/post/3b9804a8-cdc9-46a7-b718-1eb5573f72b4/image.png)
-> ìžë™ìœ¼ë¡œ redux-devtoolì´ ì—°ë™ëœë‹¤!

> â—ï¸ ì´ì „ì—ëŠ” createStore()ì˜ ë‘ë²ˆì§¸ ì¸ìžë¡œ `composeWithDevTools`ë¥¼ ë„£ì–´ì¤˜ì•¼ í–ˆìŒ.
``` js
import { composeWithDevTools } from 'redux-devtools-extension';
>
const store = createStore(rootReducer, composeWithDevTools());
```

***

## wish-list í”„ë¡œì íŠ¸ ìˆ˜ì •

- redux-toolkitì„ ì´ìš©í•œ ë²„ì „ìœ¼ë¡œ ìˆ˜ì •í•¨.

store.js

``` js
import { configureStore, createAction, createReducer } from '@reduxjs/toolkit';

const addWish = createAction('ADD', (text) => ({ payload: { text } }));
const deleteWish = createAction('DELETE', (id) => ({ payload: { id } }));
const clearAll = createAction('CLEAR');

/*
const addWish = (text) => {
  return {
    type: ADD,
    text,
  };
};

const deleteWish = (id) => {
  return {
    type: DELETE,
    id,
  };
};

const clearAll = () => {
  return {
    type: CLEAR,
  };
};
*/

console.log(addWish());

JSON.parse(localStorage.getItem('wishes')) ||
  localStorage.setItem('wishes', JSON.stringify([]));

const reducer = createReducer(JSON.parse(localStorage.getItem('wishes')), {
  [addWish]: (state, action) => {
    const addItem = [...state, { text: action.payload.text, id: Date.now() }];
    localStorage.setItem('wishes', JSON.stringify(addItem));
    state.push({ text: action.payload.text, id: Date.now() });
  },
  [deleteWish]: (state, action) => {
    const deleteItem = state.filter((toDo) => toDo.id !== action.payload.id);
    localStorage.setItem('wishes', JSON.stringify(deleteItem));
    return deleteItem;
  },
  [clearAll]: (state, action) => {
    localStorage.setItem('wishes', JSON.stringify([]));
    return [];
  },
});

const store = configureStore({ reducer });

export const actionCreators = {
  addWish,
  deleteWish,
  clearAll,
};

export default store;

```
