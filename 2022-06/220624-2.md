# Next.js

> ê³µë¶€ ê¸°ê°„ : 6/18 - 6/24 
- ğŸ“ ìƒˆë¡­ê²Œ ì•Œê²Œëœ ë‚´ìš© ìœ„ì£¼ë¡œ ê¸°ë¡ (ing)

- `React`ë¡œ ë§Œë“œëŠ” ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ í”„ë ˆì„ì›Œí¬. (SSR)

## ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§

- í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ì€ ì‚¬ìš©ì ì¸¡ì—ì„œ ë§ì€ ëŒ€ê¸°ê°€ í•„ìš”í•¨.
- ë˜í•œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì˜ ê²½ìš° jsê°€ ë¡œë“œë˜ì§€ ì•Šìœ¼ë©´ ì•„ë¬´ëŸ° ì •ë³´ë„ ë³´ì´ì§€ ì•Šì•„
SEO ë¬¸ì œë„ ë°œìƒí•¨.
-> ì•„ë¬´ í˜ì´ì§€ë„ ê²€ìƒ‰ ì—”ì§„ì— ìŠ¤ìº”ë˜ì§€ ì•ŠìŒ.


+) `<meta>` íƒœê·¸ë¥¼ ì¶”ê°€í•˜ì—¬ SEOë¥¼ ìš©ì´í•˜ê²Œ í•  ìˆ˜ ìˆìŒ.


***


## next.js ì£¼ê¸°ëŠ¥

### 1. Hot Reloading

- ê°œë°œ ì¤‘ ì €ì¥ë˜ëŠ” ì½”ë“œ ìë™ ìƒˆë¡œê³ ì¹¨


### 2. automatic routing

- `/pages` í´ë”ì— ìˆëŠ” íŒŒì¼ì€ í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ ë¼ìš°íŒ…ë¨.

> ì˜ˆ> `/pages/page1.tsx` -> localhost:3000/page1

### 3. single file components

`<style jsx>`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë§Œ ìŠ¤ì½”í”„ë¥¼ ê°€ì§€ëŠ” css ì„¤ì • ê°€ëŠ¥.

``` tsx
function Heading(props) {
  const variable = "red";
  return (
    <div className="title">
      <h1>{props.heading}</h1>
      <style jsx>
        {`
          h1 {
            color: ${variable};
          }
        `}
      </style>
    </div>
  );
}

export default function Home() {
  return (
    <div>
      <Heading heading="heading" />
      <h1>Hello</h1>
    </div>
  );
}

```
ìœ„ cssëŠ” Home ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ìŠ¤ì½”í”„ë¥¼ ê°€ì§.
-> `<style jsx> </style>` ì‚¬ì´ì— ``ì•ˆì— cssë¥¼ ì‘ì„±í•¨.
- ì—¬ê¸°ì„œ jsì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ${ }ë¡œ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì²˜ëŸ¼ ì‚¬ìš© ê°€ëŠ¥.


### servel landing

ì„œë²„ ë Œë”ë§.
client ì‚¬ì´ë“œ ë Œë”ë§ê³¼ ë‹¬ë¦¬ ì„œë²„ë Œë”ë§ í•œ í˜ì´ì§€ì˜ ì†ŒìŠ¤ë¥¼ ë³´ë©´ ë‚´ë¶€ì— ì†ŒìŠ¤ê°€ ì¡´ì¬í•¨.


### code splitting

`dynamic import` ë¥¼ ì´ìš©í•œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ê°€ëŠ¥.

> **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…** ì€ ìì‹ ì´ ì›í•˜ëŠ” í˜ì´ì§€ì—ì„œ JSì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¦‰ ë Œë”ë§í•˜ëŠ” ê²ƒ.
-> ëª¨ë“  ë²ˆë“¤ì´ í•˜ë‚˜ë¡œ ë¬¶ì´ì§€ ì•Šê³ , ê°ê° ë‚˜ë‰˜ì–´ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë¡œë”© ì‹œê°„ ê°œì„  ê°€ëŠ¥.


### typescript

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ì‹œ webpack, babel ì„¤ì • í•„ìš” ì—†ìŒ.
- typescript ì„¤ì¹˜ í›„ `yarn add @types/node @types/react` ëª…ë ¹ì–´ë¡œ 
íŒ¨í‚¤ì§€ ì„¤ì¹˜ í›„ `yarn run dev` ë¡œ ì‹¤í–‰ 
-> ìë™ìœ¼ë¡œ tsconfig, next-end.d.tsê°€ ìƒì„±ë¨!


***


## _document.tsx

- meta íƒœê·¸ë¥¼ ì •ì˜í•˜ê±°ë‚˜, ì „ì²´ í˜ì´ì§€ì— ê´€ì—¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸.

/pages/_document.tsx

``` tsx
// pages/_document.tsx
import Document, { Html, Head, Main, NextScript } from "next/document";
export default class CustomDocument extends Document {
  render() {
    return (
      <Html>
        <Head>
          <meta property="custom" content="123123" />
        </Head>
        <body>
          <Main />
        </body>
        <NextScript />
      </Html>
    );
  }
}
```

'next'ì˜ document ë¥¼ ê°€ì ¸ì˜¤ê³ , Html, Head, Main ê·¸ë¦¬ê³  NextScript ì»´í¬ë„ŒíŠ¸ë¥¼ ì„í¬íŠ¸í•œë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ htmlê³¼ ë§ˆì°¬ê°€ì§€ë¡œ html-head-body-script ìˆœìœ¼ë¡œ ë‚˜ì—´í•œë‹¤.

meta íƒœê·¸ëŠ” headì˜ ë‚´ë¶€ì— ì‘ì„±í•˜ê³ , propertyì™€ contentë¼ëŠ” propsë¥¼ ê°€ì§„ë‹¤.

>â—ï¸ ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ `console.log`ëŠ” ì„œë²„ì—ì„œë§Œ ë³´ì¸ë‹¤!
ì¶”ê°€ë¡œ, jsëŠ” ë°˜ì˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ staticí•œ ìƒí™©ì—ë§Œ ì‚¬ìš©í•œë‹¤.


***

## _app.tsx

``` tsx
function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />;
}

export default MyApp;
```

- ë Œë”ë§ í•˜ëŠ” ê°’ì€ ëª¨ë“  í˜ì´ì§€ì— ì˜í–¥ì„ ì¤€ë‹¤.
- ìµœì´ˆë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒ = `_app.tsx` 
-> ìµœì´ˆ ì‹¤í–‰ì‹œ ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì‹¤í–‰í•¨.


***

### import style component

``` tsx
import styles from "./style.module.css";

function Heading(props) {
  return (
    <div className="title">
      <h1 className={styles.red}>{props.heading}</h1>
    </div>
  );
}

export default function Home() {
  return (
    <div>
      <Heading heading="heading" />
      <h1>Style ì ìš©í•˜ê¸°</h1>
    </div>
  );
}
```

***

### ë™ì  URL

- `[]` ë¬¸ë²•ìœ¼ë¡œ ë™ì  í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë™ì  URL ìƒì„± ê°€ëŠ¥


/pages/[id].tsx
``` tsx
import { useRouter } from "next/router";

export default () => {
  const router = useRouter();

  return (
    <>
      <h1>post</h1>
      <p>postid: {router.query.id}</p>
    </>
  );
};
```

- `next/router`ì—ì„œ `useRouter`ì„ ì„í¬íŠ¸í•¨.
- useRouter() ì„ í†µí•´ ê°’ì„ ê°€ì ¸ì˜¤ê³ ,
router.queryë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì¤‘ `id`ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë Œë”ë§í•¨
-> ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ì˜ useParams() ê°™ì€ ê¸°ëŠ¥

- ë§Œì•½ localhost:3000/610 ìœ¼ë¡œ ì ‘ì†ì‹œ postid = 610 ì´ ëœë‹¤.

> ì°¸ê³ ë¡œ next/routerê³¼ react-router-domì˜ ì‚¬ìš©ë²•ì€ ìœ ì‚¬í•˜ë‹¤!

***

## Prefetching

- ë°±ê·¸ë¼ìš´ë“œì—ì„œ í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì˜´.
(ê¸°ë³¸ê°’: true)

		
``` tsx
import { useEffect } from "react";
import { useRouter } from "next/router";
import posts from "../posts.json";

export default () => {
  const router = useRouter();

  const post = posts[router.query.id as string];
  if (!post) return <p>noting</p>;

  useEffect(() => {
    router.prefetch("/test");
  }, []);

  return (
    <>
      <h1>{post.title}</h1>
      <h1>{post.content}</h1>
      <button onClick={() => router.push("test")}>go to Test</button>
    </>
  );
};
 
```

